<!DOCTYPE html><html class="hide-aside" lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>重学java第二阶段(下) | 小u的博客</title><meta name="keywords" content="java,javaWeb"><meta name="author" content="小u"><meta name="copyright" content="小u"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="重学java第二阶段(下)"><meta name="application-name" content="重学java第二阶段(下)"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="重学java第二阶段(下)"><meta property="og:url" content="http://example.com/2023/10/01/codenotes/Java/qf/4/index.html"><meta property="og:site_name" content="小u的博客"><meta property="og:description" content="day11今日内容 0 复习昨日1 JDBC概述2 JDBC开发步骤3 完成增删改操作4 ResultSet5 登录案例  0 复习昨日 1 写出JQuery,通过获得id获得dom,并给input输入框赋值的语句$(“#id”).val(“值”) 2 mysql内连接和外连接的区别内连接只会保留完"><meta property="og:locale" content="en"><meta property="og:image" content="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202309300844043.png"><meta property="article:author" content="小u"><meta property="article:tag" content="Java,java,springboot,mysql,redis,教程,git,软件,编程,开发,互联网,Java 基础,Java 教程,Java程序员进阶之路,Java 入门,Vue,前端,算法"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202309300844043.png"><meta name="description" content="day11今日内容 0 复习昨日1 JDBC概述2 JDBC开发步骤3 完成增删改操作4 ResultSet5 登录案例  0 复习昨日 1 写出JQuery,通过获得id获得dom,并给input输入框赋值的语句$(“#id”).val(“值”) 2 mysql内连接和外连接的区别内连接只会保留完"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="http://example.com/2023/10/01/codenotes/Java/qf/4/"><link rel="preconnect" href="//cdn.cbd.int"/><link rel="preconnect" href="//hm.baidu.com"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.20/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?1433b93d16cca6b366bdf23126c0c200";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: {"enable":true,"img":"https://upload-bbs.miyoushe.com/upload/2023/09/03/125766904/ee23df8517f3c3e3efc4145658269c06_5714860933110284659.png"},
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"tianli","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"784b999ee9b2f0689c5a","Referer":"https://mydocs-1305448902.cos-website.ap-nanjing.myqcloud.com/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: undefined,
  greetingBox: {"enable":true,"default":"晚上好👋","list":[{"greeting":"晚安😴","startTime":0,"endTime":5},{"greeting":"早上好鸭👋, 祝你一天好心情！","startTime":6,"endTime":9},{"greeting":"上午好👋, 状态很好，鼓励一下～","startTime":10,"endTime":10},{"greeting":"11点多啦, 在坚持一下就吃饭啦～","startTime":11,"endTime":11},{"greeting":"午安👋, 宝贝","startTime":12,"endTime":14},{"greeting":"🌈充实的一天辛苦啦！","startTime":14,"endTime":18},{"greeting":"19点喽, 奖励一顿丰盛的大餐吧🍔。","startTime":19,"endTime":19},{"greeting":"晚上好👋, 在属于自己的时间好好放松😌~","startTime":20,"endTime":24}]},
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: {"skills":null},
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: 'days',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"Author: 小u","link":"Link: ","source":"Source: 小u的博客","info":"Copyright is owned by the author. For commercial reprints, please contact the author for authorization. For non-commercial reprints, please indicate the source.","copySuccess":"Copy success, copy and reprint please mark the address of this article"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"Traditional Chinese Activated Manually","cht_to_chs":"Simplified Chinese Activated Manually","day_to_night":"Dark Mode Activated Manually","night_to_day":"Light Mode Activated Manually","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: '小u的博客',
  title: '重学java第二阶段(下)',
  postAI: '',
  pageFillDescription: 'day11, 今日内容, 0 复习昨日, 1 JDBC概述, 2 JDBC开发步骤, 2.1 创建java项目, 2.2 导入mysql驱动包, 2.2.1 复制粘贴版本, 2.2.2 idea导入类库版本, 2.3 JDBC编程, 3 完成增删改, 3.1 插入, 3.2 更新, 3.3 删除, 4 查询结果集ResultSet【重要】, 5 登录案例【重要】, day12, 今日内容, 0 复习昨日, 1 SQL注入, 1.1 什么是SQL注入, 1.2 避免SQL注入, 2 PreparedStatement【重点】, 3 完成CRUD练习, 3.1 插入, 3.2 更新, 3.3 删除, 4 事务处理, 5 ORM【重点】, 5.1 什么是ORM, 5.2 实体类, 5.3 使用ORM完成CRUD, 5.3.1 查询使用ORM封装数据, 5.3.2 插入使用ORM封装数据, 6 DBUtil【理解会用】, day13, 今日内容, 0 复习昨日, 1 作业【重要】, 2 数据库连接池, 2.1 Druid数据库连接池, 3 反射(reflect), 3.1 获得类的字节码文件, 3.2 获得并设置属性(Field), 3.3 获得并设置方法(Method), 3.4 获得并设置构造方法(Constructor), 4 使用反射封装DBUtil, day14, 今日内容, 0 复习昨日, 1 Maven, 1.0 引言, 1.1 介绍, 1.2 下载, 1.3 安装, 1.3.1 解压, 1.3.2 配置环境变量, 1.3.3 测试, 1.4 仓库, 1.5 Maven配置, 1.5.1 修改仓库位置, 1.5.2 设置镜像, 2 IDEA - MAVEN, 2.1 idea关联maven, 2.2 创建java项目, 2.3 java项目结构, 2.4 pom, 2.5 导入依赖, 2.5.1 查找依赖, 2.5.2 使用依赖, 2.6 测试, 3 JavaWeb, 4 服务器, 5 Tomcat, 5.1 下载, 5.2 安装, 5.3 启动服务器, 5.4 访问服务器, 5.5 关闭服务器, 5.6 特别说明, 6 IDEA - Tomcat, 6.1 maven创建javaweb项目, 6.1.1 使用模板创建【推荐】, 模板创建并不完整, 手动补全目录, 6.1.2 不使用模板创建javaweb项目, 6.1.3 不使用模板也不使用框架支持, 6.2 web项目设置Tomcat(部署项目), day15, 今日内容, 0 复习昨日, 1 Servlet, 1.1 介绍, 1.2 第一个Servlet程序, 1.2.1 创建web项目, 1.2.2 pom依赖, 1.2.3 编写Servlet, 1.2.4 配置Servlet, 1.2.5 部署项目, day16, 今日内容, 0 复习昨日, 1 接收请求, 1.1 编写页面, 1.2 编写Servlet, 1.3 配置web.xml, 1.4 部署项目, 1.5 启动测试, 2 做出响应, 3 乱码解决, day17, 今日内容, 0 复习昨日, 1 MVC和三层架构, 2 Login案例, 2.1 搭建环境, 2.2 页面, 2.3 UserServlet, 2.4 UserService, 2.5 UserDao, 3 请求转发, 3.1 请求转发, 3.2 请求域, 3.3 跳转页面, 4 重定向, 5 注解, 5.1 创建注解文件, 5.2 元注解, 5.2.1 @Target, 5.2.2 @Retention, 5.3 注解参数, 5.4 实际应用, day18, 今日内容, 0 复习昨日, 1 关于路径, 2 IDEA热部署, 3 会话技术, 4 Cookie, 4.1 创建cookie, 4.2 响应给浏览器, 4.3 获得Cookie, 4.4 cookie的路径问题, 4.5 cookie保存中文问题, 5 Session【重点】, 5.1 创建session, 5.2 Session存取数据, 5.3 Session域和Request域, 5.4 Session域数据清除, 6 记录登录状态案例, 7 拦截器x2F过滤器(Filter), day19, 今日内容, 0 复习昨日, 1 session存储登录状态, 2 使用拦截器改造, 3 Ajax, 3.1 介绍, 3.2 语法, 3.3 测试, 3.3.1 $.get, 3.3.2 $.post, 3.3.3 $.ajax, 3.4 响应json问题, 3.5 BUG JS引入失败, 4 案例, 4.1 注册, 4.2 回显数据, 5 FastJson, day20, 今日内容, 复习, 要复习, day21, 今日内容, 0 引言, Layui, 1 介绍, 2 环境搭建, 2.1 下载, 2.2 解压, 2.3 项目搭建, 2.3.1 创建javaweb项目, 2.3.2 导入layui资源, 2.3.3 页面中引入layui, 3 入门使用, 4 页面元素, 4.1 布局, 4.2 图标, 4.3 按钮, 4.4 表单, 4.5 导航, 4.6 表格, 5 内置模块, 5.1 弹出层, 5.2 日期, 5.3 表格, 5.3.1 入门演示, 5.3.2 后台servlet接口, 5.3.3 转换返回的数据格式, 5.3.4 数据模板, 5.3.5 分页数据, 5.3.6 操作按钮, 5.3.7 操作按钮事件, day22, 今日内容, 0 复习昨日, 1 开发流程, 2 搭建环境, 2.1 创建项目, 2.2 导入依赖, 2.3 配置文件, 2.4 包结构, 2.5 实体类工具类, 2.6 拦截器, 2.7 前端环境, 3 功能开发, 3.1 首页, 3.2 添加, 3.3 操作按钮, 3.4 删除, 3.5 更新, 3.5.1 更新弹出层, 3.5.2 更新页面回显数据, 3.5.3 执行更新, 3.6 分页, 3.7 模糊查询, day23, 今日内容, 0 复习昨日, 1 了解项目开发流程, 2 项目需求, 3 数据库设计, 4 编码, 4.1 前端脚手架, 4.2 环境搭建, 4.3 登录页, 4.4 登录功能, 4.5 首页样式跳转, 4.6 展现房屋数据, 5 模糊搜索, 6 多表联查, 7 下拉框回显, 8 批量删除, 9 js-cookie, 今日内容复习昨日概述开发步骤完成增删改操作登录案例复习昨日写出通过获得获得并给输入框赋值的语句值内连接和外连接的区别内连接只会保留完全符合关联条件的数据外连接会保留表左外保留左表中不符合关联条件的数据事务是什么事务是逻辑一组操作要么全部成功要么全部失败索引有什么好处和坏处索引可以提高查询效率如果表是经常性的需要增删改有索引在就会非常慢概述目前我们操作数据库只能通过命令行或者图形工具来操作数据库但是实际开发时配合页面数据对数据操作如果还是使用命令行或者图形工具来操作就很麻烦就是另外一种操作数据库的方式操作数据库数据库连接的设计思想厂商提供了驱动包如下包包就是把项目压缩打包驱动包就是厂商提供一套规范的实现每个知识点小问什么是设计思想什么是包驱动包是什么开发步骤创建项目导入驱动包厂商提供的规范的实现要想完成操作就需要将驱动包加入到当前项目中复制粘贴版本在项目名下创建文件夹命名为将驱动包复制粘贴到此处添加驱动包为当前项目的类库导入类库版本打开项目结构选择添加包应用生效成功编程准备数据库表进行用户编号用户名密码手机号注册时间账户余额性别男女需求使用完成对表插入数据编程有标准步骤八股文注册驱动将语句的运行环境加载到连接数据库获得执行的对象执行语句获得结果关流天道酬勤演示加载驱动利用反射技术将驱动类加载到通过驱动管理对象获得连接对象参数数据库连接的地址协议端口库名参数数据库用户名参数数据库密码通过连接对象创建执行语句的对象通过执行语句对象执行获得结果执行查询是执行增删改是返回受影响的行数插入成功关流小总结记住个步骤的关联和顺序会读代码理解的写法协议端口参数其中涉及的单词要认识完成增删改插入参考入门案例更新任何的都是那个步骤天道酬勤更新加载驱动通过驱动管理对象获得连接对象通过连接对象创建执行语句对象通过执行语句对象执行获得结果小孟更新成功将对象的流关闭一定自己主动试错看报错信息删除删除成功查询结果集重要查询返回的是一种虚拟表的中是使用结果集来封装这个虚拟表结果集就是一个集合内部就存储了列名和每行数据那么学习查询的重点是从结果集取值天道酬勤查询执行查询的方法方法返回值是内部包含了整个查询返回的虚拟表数据内部提供了方法可以操作结果集判断结果集有没有下一行数据返回即没有下一行数据返回就是有下一行数据此时就可以进入取值获得数据返回值是获得数据返回对应数据类型通过列下标获得对应数据类型的数据下标从开始顺序是按照查询返回虚拟表顺序通过列名获得对应数据类型的数据根据虚拟表列名如果有别名那就是别名通过列下标获得数据通过列名获得数据推荐每个知识点小问是什么有什么特点和有啥区别如果按下标取值下标从哪开始下标顺序是什么顺序如果按列名取值列名根据谁来定登录案例重要需求通过控制台用户输入用户名和密码用户输入的用户名和密码作为条件编写查询语句如果该用户存在提示登录成功反之提示失败天道酬勤输入用户名和密码请输入用户名请输入密码根据用户名和密码查人结果登录成功用户名或密码错误使用捕获代码完成根据用户名和密码查询注意字符串拼接特别注意单引号只要有值就说明数据库有这个信息登录成功登录成功用户名或密码错误操作出错打印异常关流异常打印异常今日内容复习昨日注入问题完成练习事务操作复习昨日已经找人提问注入什么是注入用户输入的数据中有关键词导致在执行语句时出现一些不正常的情况这就是注入出现注入是很危险避免注入问题出现在用户输入数据时里面有关键词再配合字符串拼接导致出现注入所以为了避免注入可以在用户输入数据到之前先把语句预编译预处理后就会知道此需要几个参数后续再将用户输入的数据给参数填充这就是重点是的子接口用来预处理语句使用先写语句语句中的参数不能直接拼接而是使用占位使用预处理语句处理的号内部就会知道此语句需要几个参数再动态给处填充值天道酬勤登录使用预处理语句完成请输入用户名请输入密码改造将拼接变量变成占位处理前由之前的换成将改造好的传入方法处理后给处理好的占位参数赋值给指定类型赋值第一个下标是填充后特别注意此处不需要再传入参数登录成功用户名或密码错误请输入用户名请输入密码处理前处理后填充后用户名或密码错误完成练习插入天道酬勤使用预处理语句插入数据先改造由拼接变成预处理给处赋值亚鹏特别注意的参数设置是我们常用的是是的子类有个构造方法可以通过毫秒值创建日期通过常用的获得毫秒值如果需要设置日期时间使用特别注意此处不要再填参数插入成功更新天道酬勤改造预处理填充小谢更新成功删除改造预处理填充删除成功事务处理事务是逻辑一组操作要么全部成功要么全部失败使用客户端操作事务因为支持事务且每句话都在事务内且自动提交所以关闭自动提交事务手动开启事务正常写执行一切正常提交事务如果不正常要回滚也可以完成事务操作关闭自动提交就相当于是开启手动管理正常的处理一切正常提交事务如果不正常回滚演示以转账案例演示天道酬勤以转账为案例演示语句和语句与事务操作没有影响张三转账给李四开启事务张三的钱减少张三转账完成模拟在转账中出现异常后续不执行李四的钱要增加李四转账完成一切顺利提交事务不顺利中间有异常回滚事务回滚事务异常异常关流时有异常另外发现建立与连接后关流之前可以执行很多次语句重点什么是目前使用完成了但是现在是进行增删改方法要设计很多参数查询的方法需要设计集合才能返回在实际开发中我们需要将零散的数据封装到对象处理对象关系映射是指数据库表与的实体类有关系可以进行映射数据库表的类字段类的属性一行数据类的对象实体类实体类数据表中零散数据的载体用来封装数据表名设计类名将列名设计成属性名下划线转驼峰将列的数据类型设计成属性的数据类型给类提供对应一般项目中一个表就会对应一个实体类所有的实体类都会放在包结构中将来写项目数据库设计完搭建完项目第一件事件就是根据表结构创建实体类包实体类是表名属性是字段名使用完成查询使用封装数据天道酬勤登录完成查询到数据将数据封装到对象使用封装数据将查询得到结果集封装到对象中即登录成功对象中有值登录不成功对象不存在请输入用户名请输入密码声明用于封装数据表数据的实体类从结果集取值创建封装数据用的实体类对象开始封装是的子类登录成功个人信息为登录失败插入使用封装数据天道酬勤李冰注册成功异常关流异常理解会用操作数据库的工具类因为发现每次操作数据库的步骤第步完全重复的即加载驱动获得连接对象已经最后的关流是每次都要写但每次都是一样的现在设计工具类简化第步设计个方法调用直接获得连接对象设计个方法调用直接关闭全部的流对象天道酬勤创建类对象专用于操作文件加载驱动的目的是为了在中有运行的环境该环境有一份就行了不用重复加载静态代码块保证内存中只有一份保证随着类加载而加载即该代码块会执行通过反射的技术获得字节码文件再通过字节码文件将配置文件读取成输入流再通过流获得其中数据从对象取值加载驱动异常一般会将关于配置信息抽取出来形成一个配置文件方便维护文件类型是文件该文件类似键值对类型名字位置内容获得连接出异常关闭所有流在下创建文件今日内容复习昨日讲作业数据库连接池反射改造完成练习复习昨日注入预处理语句事务操作作业重要利用完成以下的几个方法非常重要将来写项目就是这些操作写项目步骤搭建环境创建项目导入依赖工具类数据库对应实体类开发数据库层的代码数据库层代码一般称为操作的是表所以类用户编号用户名密码手机号注册时间账户余额性别男女根据从数据库查询出用户信息向数据库插入一个用户返回是否插入成功通过删除用户数据返回设计方法查询全部数据返回值是集合集合中是全部用户数据通过更改用户数据注意根据更新即参数对象中一定有属性值更新表的数据根据对象的属性更新如果属性值是则不跟更新不为就更新对应的字段返回值是受影响的行数天道酬勤根据查用户查询全部数据返回值是集合集合中是全部用户数据每一行数据都需要创建新对象将每个对象装入集合插入数据删除数据根据更新用户更新表的数据根据对象的属性更新如果属性值是则不更新不为就更新对应的字段因为值为空不为空情况不一样那么每次更新的语句也不太一样解决方案方案一更新全部字段在传给的对象中属性全部赋值没有属性值跟原表一样的更新了也跟原表没变化属性值跟原表不一样的就会更新成新值方案二更新部分字段根据传给的对象中的属性值判断属性有值就更新属性没有值就不更新即语句要动态拼接方案一方案二继续拼接其他字段我在此省略字段拼接完的截取最后一个截取后的最后拼接条件最终的测试天道酬勤博文插入是否成功删除是否成功小结是什么关于数据库操作的类应该放在什么包什么类中要将数据封装成对象学会在编码时通过输出语句确定结果是否符合预期学会记住以上个思路数据库连接池目前数据库连接是使用是建立连接用完直接关闭连接即需要不断创建和销毁连接就会消耗系统资源借鉴线程池的思想设计出数据库连接池在程序初始时预先创建好指定数量的数据库连接对象存储连接池需要用时就去取用完就放回去即可就会不会频繁创建和销毁从而节省系统资源使用上的线程池有很多德鲁伊数据库连接池是阿里开源技术性能很好使用步骤导入依赖包创建一个加入的一些连接配置初始化连接最大连接数量最小空闲连接超时等待时间以毫秒为单位毫秒等于秒修改之前的创建类对象专用于操作文件声明连接池的连接池对象数据连接一般称作数据源不需要由我们加载驱动需要给赋值加载驱动异常不需要我们获得连接而是通过获得获得连接出异常后续正常跟之前一样开始使用跟之前一样使用反射反射机制是在运行状态中对于任意一个类都能够知道这个类的所有属性和方法对于任意一个对象都能够调用它的任意一个方法和属性这种动态获取的信息以及动态调用对象的方法的功能称为语言的反射机制反射是在程序运行过程中拿到类的字节码文件进而获得类中的属性方法等获得类的字节码文件类的方法类的静态属性类的静态方法演示获取字节码文件方式方式方式是同一个字节码文件不是获得并设置属性获得字节码中的属性并操作通过属性名获得属性对象只能获得修饰的属性的属性对象通过属性名获得属性对象获得任意修饰符修饰的属性对象获得修饰所有属性对象返回数组获得所有属性对象返回数组获得属性名获得属性访问修饰符访问修饰符获得属性值获得哪个对象的该属性值但是不能获得私有属性的值可以通过设置就可以访问设置属性值设置哪个对象的该属性值获得并设置方法获得字节码中的方法方法有重载需要通过参数来确定获得哪个方法获得无参的方法获得有参的方法获得关于方法的所有信息参数个数参数个数操作方法让方法执行参数哪个对象的该方法执行参数该方法执行时的参数执行后的返回值获得并设置构造方法获得字节码中的构造方法通过参数来获得有参还是无参构造构造方法执行创建对象创建字节码的对象还有另外方法可以通过字节码直接创建使用反射封装天道酬勤创建类对象专用于操作文件声明连接池的连接池对象数据连接一般称作数据源不需要由我们加载驱动需要给赋值加载驱动异常不需要我们获得连接而是通过获得获得连接出异常关闭所有流封装查询方法返回一个对象参数执行查询的预处理的条件用占位参数结果要封装的类参数给赋值不定长参数是数组创建对象从数据库取出数据并设置对象属性破解私有给对象的该字段赋值创建对象从数据库取出数据并设置对象属性破解私有给对象的该字段赋值增删改方法一样今日内容复习昨日创建项目复习昨日单词写遍参数参数访问字段调用非法无效列属性数据源数据库连接池有啥好处获得字节码文件的方式对象封装隐藏实现的细节对外提供访问的方法方法的封装类的封装工具类的封装继承多态方法的参数列表是父类抽象接口引言之前写项目时会有不同的问题包管理项目中有很多包需要自己找包下载手动导入项目中包版本更新占磁盘空间重复量大项目结构不规范代码和配置文件位置不规范介绍项目管理工具统一项目结构配置文件依赖部署测试等等这个单词来自于意第绪语犹太语意为知识的积累最初在项目中用来简化构建过程当时有一些项目有各自文件仅有细微的差别而文件都由来维护于是希望有一种标准化的方式构建项目一个清晰的方式定义项目的组成一个容易的方式发布项目的信息以及一种简单的方式在多个项目中共享下载网址下载地址安装解压特别注意尽量不要有中文路径解压后有几个文件夹运行命令的脚本运行是需要类库配置有关于的配置文件运行是需要的包配置环境变量系统变量创建值是安装路径系统变量添加测试打开输入仓库项目管理工具管理依赖包实现依赖的复用有仓库将依赖放入仓库每个项目都去复用本地仓库自己电脑上需要依赖的时候会先从本地仓库中如果找不到就会去中央仓库找下载到本地仓库中央仓库位于国外服务器包含绝大部分依赖可能有时候访问比较慢公共仓库私服个人阿里云网易等等配置修改仓库位置安装好后默认本地仓库在盘要修改为其他地方修改的配置文件将行注释内代码复制出来粘贴到行修改路径为自己本地仓库位置记得保存设置镜像依赖会先从本地仓库找本地没有会从中央仓库下载到本地仓库中央仓库访问很慢所以需要设置国内镜像访问就很快中添加如下配置行附近一定是在开闭标签中间设置中心仓库的镜像仓库地址以后所有要指向中心仓库的请求都会指向仓库关联打开任何一个项目找到创建项目找到选项设置信息项目结构项目名项目对象模型这是一个文件文件一种文件格式类似是标签形式的文件内定义项目信息项目名组织名版本打包方式默认是普通项目可以指定为即项目项目依赖依赖就是包是以坐标的形式展现构建工具项目信息打包方式默认是如果是项目打包方式是依赖具体的包依赖坐标构建信息导入依赖查找依赖官方提供一中央仓库网站网站中有所有包的依赖信息就可以搜索依赖使用依赖将复制的依赖坐标粘贴到文件依赖就是包还可以进入仓库中去查看是否下载成功测试使用之前测试使用创建项目导入依赖驱动包编码文件夹写代码文件夹写配置文件测试开发就是前端页面发请求后台服务器接收请求将请求中数据发送到数据库数据库处理数据库处理完再响应给服务器服务器根据结果再响应数据到浏览器项目开发的架构必须要开发客户端软件微信钉钉优点性能好画质交互流程度安全度高一般用于游戏音视频软件缺点软件更新维护升级很麻烦只需要一个浏览器一般用于功能不复杂比如微博淘宝京东优点更新维护只需重启服务器缺点图形显示流畅度安全性相对比较低目前我们学习是为了开发架构的项目服务器服务器也称为服务器是运行及发布应用的容器只有将开发的项目放到服务器中才可以通过请求访问到数据常见的服务器主流免费并发量左右效率会比高淘宝用的就这个新浪在用服务器是一个免费的开放源代码的应用服务器属于轻量级应用服务器在中小型系统和并发访问用户不是很多的场合下被普遍使用是开发和调试程序的首选下载官网安装解压即可使用特别注意解压路径中不要有中文路径放运行命令配置文件运行所需库包等运行日志临时文件重要存放项目的路径运行时产生文件此处启动服务器进入安装路径的目录下执行双击命令访问服务器服务器是在本地所以访问是端口默认是即完整服务器路径关闭服务器只需要关闭服务器黑窗口特别说明现在进行的操作只是证明装好可以使用等后续需要配置进行启动访问停止关联是要为每个项目关联服务器创建项目使用模板创建推荐模板创建并不完整手动补全目录补上目录补上目录补上目录图略完整结构如下不使用模板创建项目像创建项目一样创建项目这样创建出的是项目改造成项目但是这样创建的文件夹位置跟规范的不一致这样不推荐不使用模板也不使用框架支持这种方式是纯手动改造项目为项目手动创建目录并在在目录下创建目录并在其下创建文件内容如下最后在目录下创建一个文件文件理解为在项目结构中配置该路径项目设置部署项目今日内容复习昨日基础介绍第一个流程分析使用细节映射细节生命周期请求响应状态码和的区别复习昨日创建项目结构创建项目结构的端口地址通过地址找到这台电脑服务器端口应用程序的编号通过端口找到服务器部署项目启动后访问路径是协议端口项目名页面什么意思端口占用解决方案端口查杀进程号改端口号我们自己设计端口最好是以上工件项目依赖复数依赖单数介绍开发就是需要服务器接收前端发送的请求以及请求中的数据经过处理操作然后向浏览器做出响应我们要想在服务器中写代码来接收请求做出响应我们的代码就得遵循开发规范因此提供了开发的规范就是就是运行在服务器上的程序可交互式的接收服务器的请求并可以做出响应总结的作用运行在服务器是一个服务器端的程序接收客户端请求向客户端做出响应动态网页第一个程序创建项目补全目录结构依赖项目打包方式是包项目打包方式是包引入依赖引入依赖编写实现接口重写方法在核心方法里面完成接收请求做出响应天道酬勤核心方法服务在这个方法中可以完成接收请求做出响应用来处理请求的对象用来处理响应的对象通过请求对象可以获得请求的响应获得字符输出流写出到浏览器字符中文可能乱码配置因为服务器中会有很多浏览器发请求如何确定访问哪一个此时就需要做一个映射请求路径和类的映射即发出的请求由哪个类来处理配置需要写在中在这里写路径和映射的名字任意的路径请求路径映射该路径映射的名请求路径的模板一定要开头浏览器发出请求经过中配置的信息匹配有该路径则正常访问无该路径报通过找到类再通过找到类路径该就可以执行部署项目项目已经开发完毕将项目部署到服务器配置部署项目启动发出请求今日内容复习昨日接收请求处理响应复习昨日请求中请求行请求方法请求路径请求头页面信息请求正文请求的数据响应中响应行状态码信息响应头页面信息响应正文要给浏览器的内容接收请求浏览器发出请求经过映射匹配找到对应的方法接收请求数据可以接收请求中的请求行请求头请求正文浏览器发出请求经过映射匹配行代码前端是请求就重写前端是请求就重写如何接收数据通过对象处理需求页面中写一个表单发送请求后台服务器接收所有请求数据编写页面表单提交数据一定要有属性后台服务器就是获得值点击提交会以指定的请求方式将数据发送到指定后台服务器路径建议是项目名路径用户名密码性别男女技能学历高中大专本科提交编写天道酬勤处理请求的对象处理响应的对象请求方法获得请求路径资源标识符资源定位符接收请求头了解接收请求数据重点接收请求数据无论单选还是下拉框等都是是前端标签属性的值复选框如果一个没选数组没有创建是不是长度为空指针异常就是使用空对象调用属性和方法配置此处不需要写项目名只需要写请求路径部署项目启动测试做出响应做出响应是通过对象响应行状态码响应头响应信息其中有一个后续会用到以及编码格式响应正文向浏览器展现的内容响应状态码是成功重定向资源未找到服务器错误一般不用设置为自动响应设置响应头指定浏览器如何解析响应的内容解决响应乱码向浏览器响应内容响应正文这是响应这是响应欢迎乱码解决请求乱码响应乱码今日内容周一复习上周本周计划和三层架构案例请求转发重定向复习昨日五大步骤注册驱动反射获得连接获得执行对象执行关流什么是注入通过关键词在执行时出现不正常的情况怎么使用有什么特点怎么使用之前拼接参数的地方现在使用占位经过预处理后再给处赋值有什么特点执行时不需要再给传参数可以避免注入的问题向赋值的时候自动给字符串拼接单引号字符串什么是是运行在服务上的程序主要功能是接收请求做出响应请求方式有哪些请求报文都有哪些内容请求头请求行请求正文数据针对不同的请求方式后台有哪些请求方法后台接收请求内容的方法有哪些属性的值获得请求数据前端如何发送数据表单标签得设置属性提交标签登录前端后后台之间如何映射通过配置行代码和三层架构通过案例一个中接收请求完成操作根据结果做出响应以上这种开发模式不好不便于后期迭代维护在开发中有一个思想分而治之思想模型模型主要是指有一些类比如封装数据的类类比如其他功能类视图视图就是页面比如为了展现数据控制器控制器控制整个流程的走向控制页面跳转三层架构是指开发中编码时项目结构主要是指将不同的功能代码再细分控制层主要做控制控制页面跳转业务层层主要处理业务逻辑数据访问层层主要与数据库交互案例需求页面中输入框用户名和密码登录登录成功给出提供欢迎登录不成功给出提示用户名或密码错误搭建环境数据库环境用户编号用户名密码手机号注册时间账户余额性别男女项目环境创建项目补全项目结构导入依赖驱动连接池项目必备的包和类工具包和工具类实体类包结构页面登录页面用户名密码登录天道酬勤控制层防止乱码接收请求调用业务层处理业务根据结果做出响应响应登录成功应该是跳转一个页面来展现数据而不是直接作出响应但是现在还没学暂时还是使用手动响应欢迎登录响应登录不成功用户名或密码错误一般开发时会将以及设计成接口实现类的形式可以先设计接口规定项目的功能接口还可以松耦合实现多态易于代码扩展接口天道酬勤用户的业务层处理天道酬勤包只用于存放实现类所有的实现类都应该是接口名来命名例如通过这个名字要得到两个信息有一个接口有一个类层是业务层处理业务逻辑业务逻辑处理但是今天这个需求没有什么业务就可以不做调用数据访问层操作数据库业务层还可以对数据库返回的结果再处理接口天道酬勤实现类天道酬勤这里使用了不习惯使用的话也可以使用原始的自己操作请求转发请求对象请求的转发将请求转发到其他的跳转页面请求域存取数据请求转发的总结请求转发地址栏不动请求转发是服务器行为是服务器内部动作浏览器只有一次请求可以当做请求域数据可以在之间共享请求转发需求发出请求映射利用请求转发将请求转发到天道酬勤请求转发就是要转发的对应的映射路径执行转发路径不需要写成项目名天道酬勤映射映射请求域请求域是指对象相当于是容器存取数据可以在请求转发的几个类中共享数据存储数据取出数据请求域作用以及场景在多个请求转发的时候用来传递数据天道酬勤请求域存储数据到请求域请求转发就是要转发的对应的映射路径执行转发路径不需要写成项目名天道酬勤请求域中取出数据跳转页面重定向重定向是对象完成一个动作可以将请求重新跳转至其他可以跳转页面重定向总结重定向是浏览器动作重定向地址栏会有变化是发出两次请求请求域中的数据在重定向后不能共享因为是两次请求需求需求发出请求映射利用重定向将请求重新发送请求到请求域存储数据到请求域请求转发就是要转发的对应的映射路径执行转发路径不需要写成项目名是因为请求转发是服务器动作即从服务器根路径开始访问服务器的根路径自带项目名请求转发可以跳转页面重定向重定向是浏览器行为发出请求那就是从浏览器的根路径发出请求浏览器的根路径是端口获得项目名注解后出现的技术注解是一种注释给程序注释然后程序运行给中的代码看的注解文件既不是类也不是接口创建注解文件元注解注解的注解就是元注解目标用来规定注解能用在什么位置位置包上类接口数组枚举上成员变量局部变量方法构造方法保留指注解保留到什么时候或者说叫保留至什么时候生效如果是自定义注解一般是为了通过反射技术读取注解所以要定义保留策略为保留策略解释源码阶段有效编译后中有效运行时生效注解参数注解的参数数据类型参数名一旦设置了参数那么在使用注解时就必需给注解参数赋值除非给参数设置了默认值当注解的参数名使用时可以省略注解的参数都是为了通过反射技术去读取到注解参数中的值实际应用开发中也支持使用注解大大提高开发效率注解可以取代中经典行代码今日内容复习昨日复习昨日和三层架构是什么三层架构请求转发有什么特点功能将请求转发到其他当做域对象存取数据跳转页面特点地址栏不变请求转发是服务器动作一次请求在一次请求中请求域是可以共享重定向有什么特点功能跳转跳转页面特点地址栏会改变重定向是浏览器动作两次请求在重定向中请求域是不可以共享关于路径关于请求时出的路径路径中加就是从根路径请求路径中不加就是从当前路径请求请求转发是服务器动作服务器的根路径是项目名请求其实是项目名重定向是浏览器动作浏览器的根路径是端口请求其实是热部署换句话就是可以实现修改代码不重启服务器设置的为这样设置完之后修改前端页面只需要鼠标离开代码就会自动更新前端代码设置完之后修改后端代码只需要点击下面地方就可以服务器中的代码会话技术开发中会话就是指客户端与服务器的一次会话交互比如使用浏览器访问淘宝那就是开启会话关闭浏览器会话结束在访问淘宝网站时经常提醒你登录登录完成后访问所有的淘宝的网页以及功能下单查订单付款聊天等等都不需要登录那么淘宝怎么知道是你在操作或者说淘宝怎么知道是登录了还是没登录呢淘宝网站会记录登录信息记录会话中数据的技术就是会话技术协议是无状态不能保存信息会话技术是指浏览器技术服务端技术是浏览器技术用来存储一小段数据存储或者通过浏览器访问某个网站时后台服务器创建了通过响应头返回给浏览器浏览器就存储了后续每次访问中请求头中都会自动带上访问服务器创建创建创建的构造方法只有一个有参构造参数都是类型默认创建的到期时间是保存至浏览器关闭保存的路径是当前项目下通过方法设置保存时间时间值保存至浏览器关闭销毁秒数保存路径特别说明的名字值路径一致才是同一个响应给浏览器天道酬勤创建响应创建设置时间销毁保存至浏览器关闭默认的指定保存的秒数默认存储到当前项目下响应给浏览器获得一旦创建后续每次请求服务器请求头中都会自动带上那么就可以使用对象获得天道酬勤获得没有获得单个的方法直接获得所有获得的路径问题的路径在创建时默认是当前路径下其实路径就是的使用范围只有在指定的范围路径内才可以读取的演示第一个设置个不设置路径默认当前项目名创建另外两个分别取得这个两个请求路径请求路径默认路径是项目名即也就是说只有请求是在都可以获得这些结果和能获得所有的演示第一个设置个设置了不同的路径另外两个分别取得这个两个请求路径请求路径默认路径是项目名即也就是说只有请求是在都可以获得这些设置了路径也就是说只有请求是在才可以获得这些结果的请求路径是只获得了下面的的请求路径是只获得了下面的总结因为路径不同的范围不同导致取值范围不同所以为了保证大部分时候都能取出好多都将路径设置成了即所有请求都可以获得到该保存中文问题的就直接不能使用中文中文会乱码存储中文时如果乱码可以使用编码解码如果存储要中文可以对中文编码用户名老王取出时需要解码知识点小问是用来干什么的谁创建谁存储如何获取是谁携带在哪里携带重点也是用于保存会话数据的技术之一是服务器端技术用于记录用户的状态是基于服务器会为每一个会话创建一个对象第一次访问服务器时会自动创建还会创建并且将存储到响应到浏览器后续再向服务器发送请求就会携带后台服务器就会根据找到就可以获得其中的数据创建创建如果这次请求没有其实就是请求中没有就会创建对象存取数据可以当做域对象存取数据域和域域中的数据只在一次请求中有效域中的数据一次中会话中有效无论是请求转发还是重定向域数据清除清除数据删除一个数据销毁记录登录状态案例需求项目中有登录页面个人中心页面添加用户页面实现目标只有登录才可以访问实现步骤登录成功后将登录信息存入设置拦截器拦截请求判断有没有登录信息有登录信息就放行没有登录登录信息就跳转至首页重新登录在个人中心有退出登录会销毁登录成功后将登录信息存入假设用户名是密码是登录成功将信息放入登录成功跳转个人中心登录失败跳转登录页面设置拦截器拦截请求判断有没有登录信息有登录信息就放行没有登录登录信息就跳转至首页重新登录该拦截器拦截的路径放行退出登录销毁退出登录销毁回到首页拦截器过滤器拦截请求可以使用指定拦截的路径开发步骤创建类实现接口重写方法执行拦截请求的方法处理请求处理响应的拦截器链放行请求到下一个拦截器如果没有下一个拦截器就放行到对应的资源在使用注解开发中如果有多个拦截器顺序是按照拦截器的名字的首字母顺序应用场景拦截请求判断用户登录拦截请求设置编码格式今日内容复习昨日存储登录状态使用拦截器改造复习昨日服务器的根路径项目名项目名谁能从服务器发出请求请求转发浏览器的根路径端口谁能从浏览器发出请求如果通过浏览器发请求重定向手动在地址栏输入请求是谁创建后台服务器创建通过响应返回浏览器储存在浏览器由谁携带后续每次向该服务器发请求时会在请求头中携带保存时间是关闭浏览器时销毁直接销毁具体秒数指定时间销毁的路径是一种作用范围在该路径范围内可以取出什么时候创建当需要使用当域对象存储数据时就获得域有什么特点域在一次会话中有效无论请求转发还是重定向都可以取出该数据拦截器如何使用创建类实现接口重写方法执行拦截放行到下一个拦截器没有拦截器放行到对应的资源完成登录页面存储登录状态需求做到登录认证目前服务器中有关于用户操作的几个这些有对应的映射路径要保证只有登录后才可以进行注册删除实现思路执行登录时如果登录成功将登录信息放入在真正执行注册删除等功能前先判断有没有登录其实就是判断中有没有登录的信息执行退出时销毁登录登录成功放入登录成功信息放入登录成功登录不成功用户名或密码错误添加用户执行前判断登录状态在执行功能前先判断有没有登录已经登录过可以执行添加用户没有登录没有权限操作删除用户执行前判断登录状态已经登录过可以执行删除用户没有登录没有权限操作退出登录销毁登录状态退出登录销毁登录状态使用拦截器改造场景服务器中有很多处理请求的项目要求有登录认证所以我们每个执行功能前都要对登录信息判断那就会有很多次登录判断的代码编写重复性很高因为以上操作不高效代码重复率太高解决方案拦截器使用拦截器拦截请求对请求进行判断如果有登录信息就放行没有登录信息就响应到首页提示改造后面的不再进行判断已经登录过可以执行添加用户添加拦截器执行拦截天道酬勤将登录请求放行其他请求判断登录信息不为空就说明登录就放行没有登录不能操作没有权限跳转登录页面让其重写登录也可以跳转提示没有权限和之前一样不用改动介绍即异步和使用技术网页应用能够快速地将增量更新呈现在用户界面上而不需要重载刷新整个页面这使得程序能够更快地回应用户的操作语法使用原生操作很麻烦我们一般使用封装好的操作很简单对象等价于就可以向服务器发送一个请求服务器地址向服务器发送的数据形式请求成功的回调函数是后台服务器返回的数据返回的内容的格式就可以向服务器发送一个请求服务器地址向服务器发送的数据形式请求成功的回调函数是后台服务器返回的数据返回的内容的格式路径获得默认是是发送到服务器的数据可以是字符串也可以对象默认适合大多数情况发送到服务器的内容的格式也可以改成服务器返回的数据类型格式不设置会自动识别向服务器请求成功就会此处成功回调函数就是服务器返回的数据向服务器请求失败就会此处失败回调函数测试需求分别使用发送请求后台接收请求并做出响应第一步项目得引用第二步写页面页面中使用发请求发送请求第三步后台接收请求并响应接收参数发送的数据可以处理业务逻辑响应这是后台的响应第四步将数据响应给回调函数前端发请求后台接收请求并响应发送的数据直接响应给浏览器的就是这是后台的响应一般响应一个数据请求成功前端发请求数据格式是字符串形式数据格式是对象形式方式是或者不写默认是服务器正忙请稍后再试后端接收请求并作出响应接收参数发送的数据可以处理业务逻辑直接响应给浏览器的就是这是后台的响应一般响应一个数据请求成功接收参数发送的数据可以处理业务逻辑直接响应给浏览器的就是这是后台的响应一般响应一个数据请求成功以上和代码是一模一样其实可以省略这么写接收参数发送的数据可以处理业务逻辑直接响应给浏览器的就是这是后台的响应一般响应一个数据请求成功响应问题使用方式后台响应字符串前端需要解析为对象再使用接收参数发送的数据可以处理业务逻辑响应响应字符串请求成功如果后台返回的是字符串可以使用解析方法解析为对象使用方式后台设置响应内容为前端直接使用对象接收参数发送的数据可以处理业务逻辑直接响应给浏览器的就是响应一个数据请求成功获得数据类型后台返回的可以直接使用引入失败因为服务器部署时没有将文件加载删除文件夹修改配置为案例注册需求注册时写完用户名提示该用户名是否存在可否注册思路前端页面输入框当失去焦点时触发函数函数内发出请求要携带输入框的数据到服务回调函数接收到服务器的数据根据状态码做出对应的操作后端接收请求接收请求中的数据返回数据如果数据库查到数据说明已经注册过响应如果数据库没有查到说明没有注册过响应数据库别忘了加入驱动数据库连接池回显数据需求展现数据时在输入完用户后下方的个人信息内容直接自动补全整个思路通过查用户返回一个用户对象在前端展现前端页面表格很多个输入框输入完触发失去焦点函数发送请求将发送服务器回调函数接收服务器返回的数据操作补全表格数据后端接收请求接收数据将查询的结果响应回以后工作中前后端数据的交互都是以形式再封装一个对象对应与格式目前使用手动拼接字符串很麻烦不好用专业也用于转换阿里巴巴开源字符串转对象转集合转转字符串对象集合数组等项目中引入依赖在需要转的地方使用天道酬勤获得请求数据调用业务层查询数据封装返回给前端的数据使用工具类转字符串响应今日内容复习复习这一阶段学习写项目前端后端数据库数据库语句动态五大步骤前端展现数据和收集数据展现数据数据何时加载情况页面加载时去查数据情况点击某些按钮标签表单其他情况通过什么手段查数据核心思想就是通过请求标签路径路径其中的路径路径数据又如何展现前后端交互使用后端返回从中把数据取出通过操作展现数据收集数据主要是发请求到后台后端项目管理工具管理项目结构项目名管理项目依赖导包服务器运行项目的容器关联部署项目到运行访问按照关联和部署时候的路径访问出现检查路径是否正确检查访问页面是不是不存在检查访问请求是不是没有对应的映射路径检查部署中是不是没生效清空缓存重启重新打包部署是可以运行在服务器上的一个程序主要作用接收请求做出响应前端发送请求重写前端发送请求重写使用对象接收请求使用对象做出响应关于可以接收请求数据可以当做域对象存取数据在一次请求转发的时候请求域中的数据可以共享请求转发服务器的内部动作可以将一个请求转发到另外一个还可以转发到页面路径不变服务器动作是一次请求关于可以向浏览器响应一些内容一般用于响应重定向可以将一个请求重新到另外一个还可以重新跳转到页面路径会变浏览器动作是两次请求写项目的架子思想和三层架构控制层跟前端交互控制接收请求调用业务层处理业务做出响应处理业务逻辑处理数据库要复习框架标签操作获得取值赋值函数事件前端调试工具添加的内容全部是字符串如果添加的有标签时会解析成对应的标签效果它是给开闭标签之间设置内容如果之前有内容会覆盖在开闭标签之间内容的后面追加且会解析为标签效果今日内容复习昨日引言我们已经学完基础服务器数据库项目管理工具以上这些技术已经可以写项目写项目写页面太慢了有点丑所以要使用现成的提供好的前端组件或模块拿来即用介绍谐音类是一套开源的解决方案采用自身经典的模块化规范并遵循原生的开发方式常适合网页界面的快速开发区别于那些基于底层的前端框架它更多是面向后端开发者无需涉足前端各种工具只需面对浏览器本身让一切所需要的元素与交互年月官网发布公告称官网年月日进行下线届时包括新版下载文档和示例在内的所有框架日常维护工作将全部迁移到和虽然没有官网但是网友都自己又重新部署了一些网站内容是一模一样经典开源模块化前端框架经典开源模块化前端组件库通过官网得知框架的主要内容是页面元素内置模块两部分页面元素理解为一些静态样式组件拿走即用内置模块定义了一套更轻量的模块规范将一些特殊功能比如一些动态效果封装成了一个一个的函数一个功能就是一个模块每个模块有对应的名字用的时候需要加载这些函数或者说模块然后再使用对应的功能环境搭建下载经典开源模块化前端组件库解压将上一步下载的压缩包解压得到如下结构文件核心样式文件核心库项目搭建开发前端页面工具可以使用为了配合后面写项目今天就使用来开发创建项目创建项目暂时不用导入依赖因为不写代码配置部署项目导入资源静态资源各种图片放在项目下页面中引入只需要在页面中引入引入核心样式在此处写主要内容引入核心入门使用演示使用模块弹出层使用页面样式引入核心样式在此处写主要内容一个标准的按钮一个可跳转的按钮引入核心模块页面元素页面元素理解为一些静态样式组件拿走即用布局有栅格系统采用业界比较常见的等分规则布局容器水平居中两边有留白铺满全屏栅格系统要配合容器使用先定义容器容器中定义行行内定义列布局引入核心样式在此处写主要内容先写容器水平居中容器内写行行行内写列总共列先写容器铺满全屏容器内写行行内写列容器内写行单元格间距行内写列偏移量容器内写行行内写列引入核心图标通过对一个内联元素一般推荐用标签设定来定义一个图标然后对元素加上图标对应的即可显示出你想要的图标譬如按钮向任意元素设定建立一个基础按钮通过追加格式为的来定义其它按钮风格按钮标签链接标签按钮原始按钮按钮按钮按钮表单在一个容器中设定来标识一个表单元素块通过规范好的结构及类来组装成各式各样的表单元素并通过内置的模块来完成各种交互依赖加载模块请注意如果不加载模块等将无法显示并且无法使用相关功能表单输入框请输入标题密码框请输入密码辅助文字选择框北京上海广州深圳杭州复选框写作阅读发呆开关单选框男男女女文本域请输入内容立即提交重置加载模块渲染出等效果取出对象导航导航一般指页面引导性频道集合多以菜单的形式呈现可应用于头部和侧边是整个网页画龙点晴般的存在面包屑结构简单支持自定义分隔符千万不要忘了加载模块虽然大部分行为都是在加载完该模块后自动完成的但一些交互操作如呼出二级菜单等需借助模块才能使用通过对导航追加背景类让导航呈现不同的主题色如定义一个墨绿背景色的导航藏青墨绿艳蓝水平垂直侧边三个导航的结构是完全一样的不同的是垂直导航需要追加侧边导航需要追加导航最新活动产品大数据解决方案二级菜单移动模块后台模版电商平台社区一定注意加载模块表格现在使用的是的样式是静态效果要想有动态效果比如加载数据表格排序需要使用模块代码看文档内置模块内置模块定义了一套更轻量的模块规范将一些特殊功能比如一些动态效果封装成了一个一个的函数一个功能就是一个模块每个模块有对应的名字用的时候需要加载这些函数或者说模块然后再使用对应的功能使用模块的语法要先加载模块通过方法加载模块再获得对应的模块对象在方法的回调中完成业务加载模块可以一次加载多个模块此时使用数组获得对应的模块对象完成一些业务弹出层弹出层模块名弹出层方法加载模块获得对象使用这是弹出是否删除删除确定删除将来发请求后台删除数据取消删除默认框这是一个弹框确定关闭弹出层取消弹出一个页面例如添加页面框架层框架内显示的页面日期模块名写一个输入框设置一个加载模块获得对象使用对象渲染日期框效果绑定元素选择的日期类型是否开启范围选择年月日日期格式表格模块加载名称用于在表格中对数据进行一系列动态化的操作使用步骤写一个空标签设置加载模块获得对象开始渲染入门演示表格编号用户名性别签名经验非常重要非常重要非常重要渲染数据的前提后台返回的数据格式一定是且格式必须是如果不是那么就需要通过来转换必须是时认为是成功才会渲染出效果后台接口后台接口指的是前后端交互对接的口子接口也就是指后端控制层代码需求前端使用模块加载后台数据并在前端展现后台代码编写就是三层架构返回一个数据三层架构的代码不再粘贴失败成功成功转换返回的数据格式组件默认规定的数据格式为返回才是成功数据条数分页中使用接口返回的数据格式并不一定都符合默认规定的格式比如我们自己的返回值后台返回是成功那么需要借助回调函数将其解析成组件所规定的数据格式即为原始返回的数据解析接口状态解析提示文本解析数据长度解析数据列表其他参数数据模板模板内有一个参数可以将后台返回的数据再转换成指定的数据返回给函数有一个参数包含当前行数据及特定的额外字段如下所示编号用户名密码手机号注册时间年月日余额性别男女分页数据中设置开启分页参数还可以设置为模块中的参数分页组件文档首页尾页在渲染数据时发送请求时会自动拼接出分页参数意思是指从第一页展现每页展现条操作按钮提供两种方案来给表格提供操作按钮通过指定按钮脚本通过自己拼接方案一设置按钮脚本使用引用脚本按钮脚本注意能使用短横线编辑删除操作方案二自己拼接操作编辑删除操作按钮事件有自己的事件处理方式给标签设置过滤器随意名设置事件源在按钮标签中设置自己随便写的事件名绑定事件事件编号操作编辑删除给即操作按钮绑定事件是事件触发的对象内含当前行数据以及自定义事件名发送请求更新删除确定删除取消删除需要注意的是固定的事件名不能乱改是标签中的名字需要使用发送请求的话项目中需要加入文件文件中需要使用引用文件加载模块获得对象就可以操作了今日内容复习昨日练习复习昨日开发流程需求分析增删改查分页模糊查询数据库技术工具浏览器搭建环境依赖工具类实体类配置文件前端后端搭建环境创建项目导入依赖配置文件放在下加入的一些连接配置初始化连接最大连接数量最小空闲连接超时等待时间以毫秒为单位毫秒等于秒包结构实体类工具类符和前后端交互使用的格式天道酬勤封装的结果数据符合默认模板格式是成功其他都是不成功成功成功失败拦截器天道酬勤编码格式内容类型过滤器直接固定每个响应都是放行前端环境资源资源功能开发首页需求打开展现所有用户数据前端页面首页用户管理系统表格容器用户名密码手机号余额性别男女注册时间后端代码天道酬勤接收参数调用业务层响应后续还要改动添加前端设置添加按钮绑定事件弹出层弹出层内加载里面写表单样式绑定提交按钮点击提交触发事件发送请求及数据在关闭弹出层在中等弹出层销毁后再重新加载数据后端接收数据完成处理作出响应操作按钮操作编辑删除删除前端点击删除按钮弹出确认框给设置并且给两个操作按钮设置给表格绑定工具栏事件过滤器通过判断具体事件弹出确认框点击取消不删除关闭弹出层点击确定使用发送请求携带当前行的执行删除关闭弹出层重新加载表格数据表格点击事件确定删除吗提示发请求执行删除删除成功删除失败取消删除更新操作后端接收请求接收响应更新更新弹出层新建页面复制的更新用户弹出层销毁时重新加载表格数据方法方法官方文档后续还要改动上面代码现在只是先弹出更新层更新页面回显数据弹出层出现后在表单内回显数据更新用户弹出层提供一个方法可以获得弹出的那个层的对象官方文档是页面的内容根据性别判断给标签添加属性默认选中以下代码并没有给中设置上选择效果为什么表单中需要来渲染完成即页面加载完渲染效果已经完成所以后续再去改动效果没有直接生效怎么解决设置定时等这边回显完再渲染弹出层销毁时重新加载表格数据方法方法官方文档等页面完成回显后这边再渲染表单其他代码略执行更新绑定提交事件把弹出层关闭官方文档添加失败服务器正忙后台分页前端在渲染数据时设置开启分页发送请求时会自动拼接出分页参数意思是指从第一页展现每页展现条也可以通过设置来设置每页多少条数据后端修改后台中代码接收分页数据修改后台和的添加参数修改后台和的添加参数发现分页的页数不对需要后台查询数据条数返回给前端数据库已知条件当前页页面大小第页第页第页第页模糊查询前端请选择用户名手机号请输入搜索关键词搜索查询全部搜索框点击提交事件调用方法渲染表格查询全部点击调用方法渲染表格删除更新回显代码省略用户列表渲染抽取出渲染表格的方法只是查询全部应该是模糊查询应该是用户名密码手机号余额性别男女注册时间操作编辑删除后端主要是改动方法传入参数所以设计了承载所有参数层要动态拼接要判断数据库动态没有关键词有关键词邱今日内容复习昨日了解项目开发流程项目需求设计数据库编码复习昨日五大步骤加载驱动获得连接获得执行对象执行关流使用方式自己写完整的语句如果有参数都要自己拼接使用调用方法使用方式自己写语句如果有参数用占位进行预处理对赋值它俩区别处理语句需要自己写完整需要拼接容易注入预处理语句不需要拼接避免注入写出分页语句假设每页条第三页的数据表名表名画出后台代码的执行流程三层架构中的数据流转了解项目开发流程公司部门的组成人事部门技术部门研发部部组组组组产品行政部门财务部门市场部门运营部门总经理老板董事项目部人员的组成各种开发人员前端后端测试实施运维项目的来源怎么接项目客户人脉广告效应朋友推荐可行性方法分析立项报价表以及项目周期合同签订首付中期后期交付使用人员分配中等项目月个个前端个后台个测试项目开发原型图甲方乙方思维导图需求文档接口文档技术选型架构设计数据库设计几张表表中多少字段字段约束表和表之间的关系产品设计项目编码单元测试测试测试环境公司测试内部测试产品使用说明书专业上线项目部署项目需求详见文档数据库设计设计一个独立的库建表一个模块一张表活动活动时间活动主题活动内容介绍活动地址活动费用活动表相亲单身青年相亲同乐公园合同号关联房屋关联租户合同签订时间合同生效起始时间合同失效时间合同总金额月付半年付年付合同表主键房屋地址楼层房间号面积朝向装修类型毛坯精装是否双气是否价格出租状态已出租未出租停止出租房屋图片路径添加时间更新时间房屋状态正常已删除房屋表老代庄号平南航海路号平西二七万达平东海为科技园平北台胞小区平东北主键租户姓名手机号性别男女籍贯身份证号码租户表张三郑州主键后勤人员姓名后勤人员身份证号后勤人员手机男女工资后勤人员表关联房屋关联后勤人员维修时间维修结果维修表关联房屋关联租户缴纳房租房租表男女真实姓名入职时间正常离职用户表邱世举张三李四编码前端脚手架可以快速搭建一个前端界面目前使用这个这两个脚手架都是基于改造的如果使用看上哪个效果就赋值粘贴哪个页面根据实际需求改动页面内容环境搭建创建项目导入依赖创建对应包结构创建对应实体类工具类配置文件加入前端静态资源在下创建文件夹把前端脚手架资源拷贝到下另外单独导入配置部署项目登录页在下创建复制脚手架的代码改动的引入路径设置欢迎页登录功能前端登录表单提交事件获得用户名密码数据发请求到后台的回调函数中判断是否登录成功登录失败弹框提示登录成功跳转页面到首页后端后台接收请求如果查询到要存储登录状态响应首页样式跳转前端登录成功后跳转首页展现房屋数据登录成功跳转至首页后立即展现房屋列表是通过的指定路径会自动发请求加载页面页面通过渲染数据模糊搜索要实现的是多条件搜索关键词和字段有多套比如地址字段对应地址的内容楼层字段对应楼层内容使用优化渲染表格的方法参数使用字段参数优化拼接路径后台要根据关键词动态拼接多表联查业务需求查询合同时需要关联查询房屋和租户因为查询到的数据不止有合同信息还要关联房屋租户信息如何封装查询到数据此时一个单独的合同类不能够展现全部数据怎么解决实体类中展现的数据不够就加加哪一般不直接加在原实体类还是创建一个扩展类还有另外的一种思路分而治之分开一个一个查先查询且只查询合同根据上一步查询得到的结果房屋租户根据查房屋根据查租户下拉框回显复选框单选框选中是添加下拉框选中是添加批量删除登录成功后主页右上角人名应该是当前登录的人是登录成功跳转到需要在展现登录成功的人名人名数据在哪人名在登录成功的回调函数中那么数据如何从传递到其中一个方案是注意是前端操作在将数据存储到在从中取出操作显示数据官方文档',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-08-09 17:17:53',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202309300844043.png"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://mydocs.guoyaxue.top/" title="旧版博客"><img class="back-menu-item-icon" src="/img/favicon.ico" alt="旧版博客"/><span class="back-menu-item-text">旧版博客</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="http://pan.xiaou61.top/#/" title="免费网盘"><img class="back-menu-item-icon" src="/img/favicon.ico" alt="免费网盘"/><span class="back-menu-item-text">免费网盘</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="http://cloud.xiaou61.top/" title="云盘(自用)"><img class="back-menu-item-icon" src="/img/favicon.ico" alt="云盘(自用)"/><span class="back-menu-item-text">云盘(自用)</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="http://wpzc.xiaou61.top/" title="云盘转存"><img class="back-menu-item-icon" src="/img/favicon.ico" alt="云盘转存"/><span class="back-menu-item-text">云盘转存</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="http://love.xiaou61.top/#/" title="关于我们(My girlFriend)"><img class="back-menu-item-icon" src="/img/favicon.ico" alt="关于我们(My girlFriend)"/><span class="back-menu-item-text">关于我们(My girlFriend)</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">娱乐项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="http://fxq.xiaou61.top/#/" title="飞行棋"><img class="back-menu-item-icon" src="/img/favicon.ico" alt="飞行棋"/><span class="back-menu-item-text">飞行棋</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://blogutil-1305448902.cos-website.ap-nanjing.myqcloud.com/game/sqnwmai803/" title="谁去拿外卖"><img class="back-menu-item-icon" src="https://image.anheyu.com/favicon.ico" alt="谁去拿外卖"/><span class="back-menu-item-text">谁去拿外卖</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://blogutil-1305448902.cos-website.ap-nanjing.myqcloud.com/win12kymain/win12-main/desktop.html" title="win12网页版"><img class="back-menu-item-icon" src="https://blogutil-1305448902.cos-website.ap-nanjing.myqcloud.com/win12kymain/win12-main/icon/logo.svg" alt="win12网页版"/><span class="back-menu-item-text">win12网页版</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="http://game.xiaou61.top/" title="在线游戏"><img class="back-menu-item-icon" src="/img/favicon.ico" alt="在线游戏"/><span class="back-menu-item-text">在线游戏</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">小u的博客</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 开往</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" target="_blank" rel="noopener" href="https://www.travellings.cn/go.html"><span> 开往</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button only-home" id="travellings_button" title="随机前往一个开往项目网站"><a class="site-page" onclick="anzhiyu.totraveling()" title="随机前往一个开往项目网站" href="javascript:void(0);" rel="external nofollow" data-pjax-state="external"><i class="anzhiyufont anzhiyu-icon-train"></i></a></div><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202309300816229.jpg" target="_blank"><img class="post-qr-code-img" alt="微信" src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202309300816229.jpg"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202309300816224.jpg" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202309300816224.jpg"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> Newest Comments</span></div><div class="aside-list"><span>loading...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Git/" style="font-size: 1.05rem;">Git<sup>3</sup></a><a href="/tags/HTML/" style="font-size: 1.05rem;">HTML<sup>1</sup></a><a href="/tags/JVM/" style="font-size: 1.05rem;">JVM<sup>22</sup></a><a href="/tags/Nginx/" style="font-size: 1.05rem;">Nginx<sup>1</sup></a><a href="/tags/Spring/" style="font-size: 1.05rem;">Spring<sup>1</sup></a><a href="/tags/Ts/" style="font-size: 1.05rem;">Ts<sup>1</sup></a><a href="/tags/TypeScript/" style="font-size: 1.05rem;">TypeScript<sup>1</sup></a><a href="/tags/WebApi/" style="font-size: 1.05rem;">WebApi<sup>1</sup></a><a href="/tags/coder1v5/" style="font-size: 1.05rem;">coder1v5<sup>2</sup></a><a href="/tags/css/" style="font-size: 1.05rem;">css<sup>3</sup></a><a href="/tags/java/" style="font-size: 1.05rem;">java<sup>12</sup></a><a href="/tags/javaSE/" style="font-size: 1.05rem;">javaSE<sup>3</sup></a><a href="/tags/javaWeb/" style="font-size: 1.05rem;">javaWeb<sup>2</sup></a><a href="/tags/js%E9%80%86%E5%90%91/" style="font-size: 1.05rem;">js逆向<sup>1</sup></a><a href="/tags/leetcode/" style="font-size: 1.05rem;">leetcode<sup>3</sup></a><a href="/tags/python/" style="font-size: 1.05rem;">python<sup>8</sup></a><a href="/tags/%E4%B9%A6%E7%B1%8D%E6%8E%A8%E8%8D%90/" style="font-size: 1.05rem;">书籍推荐<sup>2</sup></a><a href="/tags/%E5%85%AC%E4%BC%97%E5%8F%B7%E6%90%AC%E8%BF%90/" style="font-size: 1.05rem;">公众号搬运<sup>35</sup></a><a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 1.05rem;">前端<sup>10</sup></a><a href="/tags/%E5%8A%9E%E5%85%AC/" style="font-size: 1.05rem;">办公<sup>1</sup></a><a href="/tags/%E5%90%8E%E7%AB%AF/" style="font-size: 1.05rem;">后端<sup>8</sup></a><a href="/tags/%E5%A4%A9%E6%B6%AF%E8%AE%BA%E5%9D%9B/" style="font-size: 1.05rem;">天涯论坛<sup>1</sup></a><a href="/tags/%E5%AF%BC%E8%88%AA/" style="font-size: 1.05rem;">导航<sup>1</sup></a><a href="/tags/%E5%B0%B1%E4%B8%9A/" style="font-size: 1.05rem;">就业<sup>16</sup></a><a href="/tags/%E5%BE%AE%E4%BF%A1/" style="font-size: 1.05rem;">微信<sup>1</sup></a><a href="/tags/%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/" style="font-size: 1.05rem;">技术杂谈<sup>51</sup></a><a href="/tags/%E6%8E%98%E9%87%91/" style="font-size: 1.05rem;">掘金<sup>14</sup></a><a href="/tags/%E6%9D%82%E9%A1%B9/" style="font-size: 1.05rem;">杂项<sup>1</sup></a><a href="/tags/%E6%B5%8B%E8%AF%95/" style="font-size: 1.05rem;">测试<sup>1</sup></a><a href="/tags/%E6%B8%A1%E4%B8%80%E5%A4%A7%E5%B8%88%E8%AF%BE/" style="font-size: 1.05rem;">渡一大师课<sup>3</sup></a><a href="/tags/%E7%88%AC%E8%99%AB/" style="font-size: 1.05rem;">爬虫<sup>1</sup></a><a href="/tags/%E7%9B%AE%E5%BD%95/" style="font-size: 1.05rem;">目录<sup>1</sup></a><a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 1.05rem;">算法<sup>4</sup></a><a href="/tags/%E8%99%9A%E6%8B%9F%E6%9C%BA/" style="font-size: 1.05rem;">虚拟机<sup>12</sup></a><a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 1.05rem;">设计模式<sup>6</sup></a><a href="/tags/%E8%B7%AF%E9%A3%9E%E5%AD%A6%E9%99%A2/" style="font-size: 1.05rem;">路飞学院<sup>3</sup></a><a href="/tags/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" style="font-size: 1.05rem;">面向对象<sup>1</sup></a><a href="/tags/%E9%9D%A2%E8%AF%95/" style="font-size: 1.05rem;">面试<sup>51</sup></a><a href="/tags/%E9%A3%9E%E8%A1%8C%E6%A3%8B/" style="font-size: 1.05rem;">飞行棋<sup>1</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>Archives</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/10/"><span class="card-archive-list-date">October 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">234</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/09/"><span class="card-archive-list-date">September 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">3</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/05/"><span class="card-archive-list-date">May 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item on" id="consoleCommentBarrage" onclick="anzhiyu.switchCommentBarrage()" title="热评开关"><a class="commentBarrage"><i class="anzhiyufont anzhiyu-icon-message"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/java/" itemprop="url">java</a><i class="anzhiyufont anzhiyu-icon-angle-right post-meta-separator"></i><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/java/javaWeb/" itemprop="url">javaWeb</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/java/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>java</span></a><a class="article-meta__tags" href="/tags/javaWeb/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>javaWeb</span></a></span></div></div><h1 class="post-title" itemprop="name headline">重学java第二阶段(下)</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2023-09-30T23:34:06.002Z" title="Created 2023-10-01 07:34:06">2023-10-01</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2023-08-09T09:17:53.942Z" title="Updated 2023-08-09 17:17:53">2023-08-09</time></span></div><div class="meta-secondline"><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为邯郸"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>邯郸</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src=""></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="http://example.com/2023/10/01/codenotes/Java/qf/4/"><header><a class="post-meta-categories" href="/categories/java/" itemprop="url">java</a><a class="post-meta-categories" href="/categories/java/javaWeb/" itemprop="url">javaWeb</a><a href="/tags/java/" tabindex="-1" itemprop="url">java</a><a href="/tags/javaWeb/" tabindex="-1" itemprop="url">javaWeb</a><h1 id="CrawlerTitle" itemprop="name headline">重学java第二阶段(下)</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">小u</span><time itemprop="dateCreated datePublished" datetime="2023-09-30T23:34:06.002Z" title="Created 2023-10-01 07:34:06">2023-10-01</time><time itemprop="dateCreated datePublished" datetime="2023-08-09T09:17:53.942Z" title="Updated 2023-08-09 17:17:53">2023-08-09</time></header><h2 id="day11"><a href="#day11" class="headerlink" title="day11"></a>day11</h2><h3 id="今日内容"><a href="#今日内容" class="headerlink" title="今日内容"></a>今日内容</h3><blockquote>
<p>0 复习昨日<br>1 JDBC概述<br>2 JDBC开发步骤<br>3 完成增删改操作<br>4 ResultSet<br>5 登录案例</p>
</blockquote>
<h3 id="0-复习昨日"><a href="#0-复习昨日" class="headerlink" title="0 复习昨日"></a>0 复习昨日</h3><blockquote>
<p>1 写出JQuery,通过获得id获得dom,并给input输入框赋值的语句<br>$(“#id”).val(“值”)</p>
<p>2 mysql内连接和外连接的区别<br>内连接只会保留完全符合关联条件的数据<br>外连接会保留表(左外保留左表)中不符合关联条件的数据</p>
<p>3 事务是什么?<br>事务是逻辑一组操作,要么全部成功,要么全部失败</p>
<p>4 索引有什么好处和坏处<br>索引可以提高查询效率</p>
<p>如果表是经常性的需要增删改,有索引在就会非常慢</p>
</blockquote>
<h3 id="1-JDBC概述"><a href="#1-JDBC概述" class="headerlink" title="1 JDBC概述"></a>1 JDBC概述</h3><blockquote>
<p>目前我们操作数据库,只能通过命令行(cmd)或者图形工具Navicat来操作数据库.</p>
<p>但是实际开发时配合页面数据对数据操作,如果还是使用命令行(cmd)或者图形工具Navicat来操作就很麻烦!</p>
</blockquote>
<blockquote>
<p>JDBC就是另外一种操作数据库的方式.(Java操作数据库)</p>
<p>JDBC: Java DataBase Connectivity  Java 数据库连接</p>
</blockquote>
<blockquote>
<p>JDBC的设计思想</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091640012.png" alt="image-20221121101745669"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091640016.png" alt="image-20221121101805975"></p>
<p>Mysql厂商提供了驱动包,如下(jar包)(jar包就是把java项目压缩打包)</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091640024.png" alt="image-20221121102009316"></p>
<p>驱动包,就是MYSQL厂商提供一套JDBC规范的实现.</p>
<hr>
<p>每个知识点小问?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">什么是JDBC ?</span><br><span class="line">设计思想 ?</span><br><span class="line">什么是jar包 ?</span><br><span class="line">mysql驱动包是什么 ?</span><br></pre></td></tr></table></figure>

<h3 id="2-JDBC开发步骤"><a href="#2-JDBC开发步骤" class="headerlink" title="2 JDBC开发步骤"></a>2 JDBC开发步骤</h3><h4 id="2-1-创建java项目"><a href="#2-1-创建java项目" class="headerlink" title="2.1 创建java项目"></a>2.1 创建java项目</h4><h4 id="2-2-导入mysql驱动包"><a href="#2-2-导入mysql驱动包" class="headerlink" title="2.2 导入mysql驱动包"></a>2.2 导入mysql驱动包</h4><p>mysql厂商提供的jdbc规范的实现,要想完成JDBC操作,就需要将驱动包加入到当前项目中.</p>
<h4 id="2-2-1-复制粘贴版本"><a href="#2-2-1-复制粘贴版本" class="headerlink" title="2.2.1 复制粘贴版本"></a>2.2.1 复制粘贴版本</h4><ul>
<li>在项目名下创建文件夹lib</li>
</ul>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091640022.png" alt="image-20221121105646545" style="zoom:50%;" />

<ul>
<li>命名为lib</li>
</ul>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091640025.png" alt="image-20221121105703497" style="zoom:50%;" />

<ul>
<li><p>将mysql驱动包复制粘贴到此处</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091640025.png" alt="image-20221121105753513" style="zoom:50%;" />
</li>
<li><p>添加驱动包为当前项目的类库</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091640625.png" alt="image-20221121110032950" style="zoom:50%;" /></li>
</ul>
<h3 id="2-2-2-idea导入类库版本"><a href="#2-2-2-idea导入类库版本" class="headerlink" title="2.2.2 idea导入类库版本"></a>2.2.2 idea导入类库版本</h3><ul>
<li>打开项目结构(Project Structure)</li>
</ul>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091640723.png" alt="image-20221121111145900" style="zoom:50%;" />

<ul>
<li><p>选择libraries,添加jar包</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091640765.png" alt="image-20221121111310058" style="zoom:50%;" /></li>
</ul>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091640815.png" alt="image-20221121111402075" style="zoom:50%;" />

<ul>
<li><p>应用生效</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091640063.png" alt="image-20221121111442727" style="zoom:67%;" />
</li>
<li><p>成功</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091640143.png" alt="image-20221121111616446" style="zoom:67%;" /></li>
</ul>
<h4 id="2-3-JDBC编程"><a href="#2-3-JDBC编程" class="headerlink" title="2.3 JDBC编程"></a>2.3 JDBC编程</h4><p>准备数据库表,进行CRUD.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tb_user(</span><br><span class="line"> id <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">primary</span> key auto_increment comment <span class="string">&#x27;用户编号&#x27;</span>,</span><br><span class="line"> username <span class="type">varchar</span>(<span class="number">10</span>) comment <span class="string">&#x27;用户名&#x27;</span>,</span><br><span class="line"> password <span class="type">varchar</span>(<span class="number">10</span>) comment <span class="string">&#x27;密码&#x27;</span>,</span><br><span class="line"> phone <span class="type">varchar</span>(<span class="number">11</span>) comment <span class="string">&#x27;手机号&#x27;</span>,</span><br><span class="line"> createTime <span class="type">date</span> comment <span class="string">&#x27;注册时间&#x27;</span>,</span><br><span class="line"> money <span class="keyword">double</span>(<span class="number">10</span>,<span class="number">2</span>) comment <span class="string">&#x27;账户余额&#x27;</span>,</span><br><span class="line"> sex <span class="type">int</span>(<span class="number">1</span>) comment <span class="string">&#x27;性别 1男2女&#x27;</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>需求: 使用JDBC完成对tb_user表插入数据</p>
<hr>
<p>JDBC编程有标准步骤(八股文)</p>
<ul>
<li>注册驱动<ul>
<li>将sql语句的运行环境加载到JVM</li>
</ul>
</li>
<li>连接数据库</li>
<li>获得执行SQL的对象</li>
<li>执行SQL语句,获得结果</li>
<li>关流</li>
</ul>
<hr>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">package com.qf.jdbc;</span><br><span class="line"></span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.DriverManager;</span><br><span class="line">import java.sql.SQLException;</span><br><span class="line">import java.sql.Statement;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * --- 天道酬勤 ---</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @author QiuShiju</span></span><br><span class="line"><span class="comment"> * @desc 演示JDBC</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">public class Demo1_insert &#123;</span><br><span class="line"></span><br><span class="line">    public <span class="keyword">static</span> void main(String[] args) throws ClassNotFoundException, <span class="keyword">SQLException</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="operator">/</span><span class="operator">/</span> <span class="number">1</span> 加载驱动</span><br><span class="line">        <span class="operator">/</span><span class="operator">/</span> ps: 利用反射技术,将驱动类加载到JVM</span><br><span class="line">        Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</span><br><span class="line"></span><br><span class="line">        <span class="operator">/</span><span class="operator">/</span> <span class="number">2</span> 通过驱动管理对象获得连接对象</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 参数1 url: 数据库连接的地址</span></span><br><span class="line"><span class="comment">         *    协议://ip:端口/库名</span></span><br><span class="line"><span class="comment">         * 参数2 username: 数据库用户名</span></span><br><span class="line"><span class="comment">         * 参数3 password: 数据库密码</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        String url <span class="operator">=</span> &quot;jdbc:mysql://localhost:3306/java2217?useSSL=false&amp;serverTimezone=UTC&quot;;</span><br><span class="line">        String username <span class="operator">=</span> &quot;root&quot;;</span><br><span class="line">        String password <span class="operator">=</span> &quot;123456&quot;;</span><br><span class="line">        Connection conn <span class="operator">=</span> DriverManager.getConnection(url,username,password);</span><br><span class="line"></span><br><span class="line">        <span class="operator">/</span><span class="operator">/</span> <span class="number">3</span> 通过连接对象,创建执行<span class="keyword">sql</span>语句的对象</span><br><span class="line">        Statement statement <span class="operator">=</span> conn.createStatement();</span><br><span class="line"></span><br><span class="line">        <span class="operator">/</span><span class="operator">/</span> <span class="number">4</span> 通过执行语句对象,执行<span class="keyword">sql</span>,获得结果</span><br><span class="line">        String <span class="keyword">sql</span> <span class="operator">=</span> &quot;insert into tb_user (id,username,password,phone,createTime,money,sex) values (2,&#x27;root&#x27;,&#x27;123456&#x27;,&#x27;1122200&#x27;,&#x27;2022-11-21&#x27;,2000.0,2)&quot;;</span><br><span class="line">        <span class="operator">/</span><span class="operator">/</span> 执行查询,是executeQuery()</span><br><span class="line">        <span class="operator">/</span><span class="operator">/</span> 执行增删改,是executeUpdate(),返回受影响的行数</span><br><span class="line">        <span class="type">int</span> num <span class="operator">=</span> statement.executeUpdate(<span class="keyword">sql</span>);</span><br><span class="line"></span><br><span class="line">        if (num <span class="operator">&gt;</span> <span class="number">0</span>) &#123;</span><br><span class="line">            System.out.println(&quot;插入成功!!&quot; );</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="operator">/</span><span class="operator">/</span> <span class="number">5</span> 关流</span><br><span class="line">        statement.close();</span><br><span class="line">        conn.close();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>小总结:</p>
<ul>
<li><p>记住5个步骤的关联和顺序,会读代码</p>
</li>
<li><p>理解url的写法</p>
<ul>
<li>协议</li>
<li>ip</li>
<li>端口</li>
<li>参数</li>
</ul>
</li>
<li><p>其中涉及的单词要认识</p>
<p>Driver,Connection,Manager,url,Statement, execute</p>
</li>
</ul>
<h3 id="3-完成增删改"><a href="#3-完成增删改" class="headerlink" title="3 完成增删改"></a>3 完成增删改</h3><h4 id="3-1-插入"><a href="#3-1-插入" class="headerlink" title="3.1 插入"></a>3.1 插入</h4><p>参考入门案例</p>
<h4 id="3-2-更新"><a href="#3-2-更新" class="headerlink" title="3.2 更新"></a>3.2 更新</h4><p>任何的JDBC都是那5个步骤.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">package com.qf.jdbc;</span><br><span class="line"></span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.DriverManager;</span><br><span class="line">import java.sql.Statement;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * --- 天道酬勤 ---</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @author QiuShiju</span></span><br><span class="line"><span class="comment"> * @desc 更新</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">public class Demo2_update &#123;</span><br><span class="line"></span><br><span class="line">    public <span class="keyword">static</span> void main(String[] args) throws Exception &#123;</span><br><span class="line"></span><br><span class="line">        <span class="operator">/</span><span class="operator">/</span> <span class="number">1</span> 加载驱动</span><br><span class="line">        Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</span><br><span class="line"></span><br><span class="line">        <span class="operator">/</span><span class="operator">/</span> <span class="number">2</span> 通过驱动管理对象获得连接对象</span><br><span class="line">        String url <span class="operator">=</span> &quot;jdbc:mysql://localhost:3306/java2217?useSSL=false&quot;;</span><br><span class="line">        String username <span class="operator">=</span> &quot;root&quot;;</span><br><span class="line">        String password <span class="operator">=</span> &quot;123456&quot;;</span><br><span class="line">        Connection conn <span class="operator">=</span> DriverManager.getConnection(url, username, password);</span><br><span class="line"></span><br><span class="line">        <span class="operator">/</span><span class="operator">/</span> <span class="number">3</span> 通过连接对象创建执行语句对象</span><br><span class="line">        Statement statement <span class="operator">=</span> conn.createStatement( );</span><br><span class="line"></span><br><span class="line">        <span class="operator">/</span><span class="operator">/</span> <span class="number">4</span> 通过执行语句对象执行<span class="keyword">sql</span>,获得结果</span><br><span class="line">        String <span class="keyword">sql</span> <span class="operator">=</span> &quot;update tb_user set username = &#x27;小孟&#x27;, phone = &#x27;666666&#x27; where id = 3&quot;;</span><br><span class="line">        <span class="type">int</span> num <span class="operator">=</span> statement.executeUpdate(<span class="keyword">sql</span>);</span><br><span class="line"></span><br><span class="line">        if (num <span class="operator">&gt;</span> <span class="number">0</span>) &#123;</span><br><span class="line">            System.out.println(&quot;更新成功!&quot; );</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="operator">/</span><span class="operator">/</span> <span class="number">5</span> 将对象的流关闭</span><br><span class="line">        statement.close();</span><br><span class="line">        conn.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ps: 一定自己主动试错,看报错信息 </p>
<h4 id="3-3-删除"><a href="#3-3-删除" class="headerlink" title="3.3 删除"></a>3.3 删除</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">public class Demo3_delete &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    public <span class="keyword">static</span> void main(String[] args) throws Exception &#123;</span><br><span class="line">        Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</span><br><span class="line">        Connection conn <span class="operator">=</span> DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/java2217?useSSL=false&quot;, &quot;root&quot;, &quot;123456&quot;);</span><br><span class="line"></span><br><span class="line">        Statement statement <span class="operator">=</span> conn.createStatement( );</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> num <span class="operator">=</span> statement.executeUpdate(&quot;delete from tb_user where id = 3&quot;);</span><br><span class="line"></span><br><span class="line">        if (num <span class="operator">&gt;</span> <span class="number">0</span>) &#123;</span><br><span class="line">          System.out.println(&quot;删除成功!&quot;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        statement.close();</span><br><span class="line">        conn.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-查询结果集ResultSet【重要】"><a href="#4-查询结果集ResultSet【重要】" class="headerlink" title="4 查询结果集ResultSet【重要】"></a>4 查询结果集ResultSet【重要】</h3><blockquote>
<p>查询返回的是一种虚拟表,Java的JDBC中是使用结果集(ResultSet)来封装这个虚拟表,结果集就是一个集合,内部就存储了列名和每行数据,那么学习查询的重点是</p>
<ul>
<li>从结果集取值</li>
</ul>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">package com.qf.jdbc;</span><br><span class="line"></span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.DriverManager;</span><br><span class="line">import java.sql.ResultSet;</span><br><span class="line">import java.sql.Statement;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * --- 天道酬勤 ---</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @author QiuShiju</span></span><br><span class="line"><span class="comment"> * @desc 查询</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">public class Demo4_select &#123;</span><br><span class="line"></span><br><span class="line">    public <span class="keyword">static</span> void main(String[] args) throws Exception &#123;</span><br><span class="line"></span><br><span class="line">        Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</span><br><span class="line"></span><br><span class="line">        Connection conn <span class="operator">=</span> DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/java2217?useSSL=false&quot;, &quot;root&quot;, &quot;123456&quot;);</span><br><span class="line"></span><br><span class="line">        Statement statement <span class="operator">=</span> conn.createStatement( );</span><br><span class="line"></span><br><span class="line">        String <span class="keyword">sql</span> <span class="operator">=</span> &quot;select id,username,password from tb_user&quot;;</span><br><span class="line">        <span class="operator">/</span><span class="operator">/</span> 执行查询的方法executeQuery,方法返回值是ResultSet</span><br><span class="line">        ResultSet rs <span class="operator">=</span> statement.executeQuery(<span class="keyword">sql</span>);</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * ResultSet 内部包含了整个查询返回的虚拟表数据</span></span><br><span class="line"><span class="comment">         * 内部提供了方法可以操作结果集</span></span><br><span class="line"><span class="comment">         * boolean next(); 判断结果集有没有下一行数据,返回false,即没有下一行数据返回</span></span><br><span class="line"><span class="comment">         *                 true就是有下一行数据,此时就可以进入取值</span></span><br><span class="line"><span class="comment">         * getObject()                获得数据,返回值是Object</span></span><br><span class="line"><span class="comment">         * getInt/getString/getDate() 获得数据,返回对应数据类型</span></span><br><span class="line"><span class="comment">         * --------------------------------------</span></span><br><span class="line"><span class="comment">         * getXxx(int columnIndex)  通过列下标获得对应Xxx数据类型的数据</span></span><br><span class="line"><span class="comment">         *                         下标从1开始,顺序是按照查询返回虚拟表顺序</span></span><br><span class="line"><span class="comment">         * getXxx(String columnLabel)  通过列名获得对应Xxx数据类型的数据</span></span><br><span class="line"><span class="comment">         *                         根据虚拟表列名,如果有别名那就是别名</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        while (rs.next()) &#123;</span><br><span class="line">            <span class="operator">/</span><span class="operator">/</span> 通过列下标获得数据</span><br><span class="line">            <span class="operator">/</span><span class="operator">/</span> <span class="type">int</span> id <span class="operator">=</span>  rs.getInt(<span class="number">2</span>);</span><br><span class="line">            <span class="operator">/</span><span class="operator">/</span> String username <span class="operator">=</span> rs.getString(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">            <span class="operator">/</span><span class="operator">/</span> 通过列名获得数据 【推荐】</span><br><span class="line">            <span class="type">int</span> id <span class="operator">=</span> rs.getInt(&quot;id&quot;);</span><br><span class="line">            String username <span class="operator">=</span> rs.getString(&quot;username&quot;);</span><br><span class="line">            System.out.println(id <span class="operator">+</span> &quot;-&quot; <span class="operator">+</span> username);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        statement.close();</span><br><span class="line">        conn.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091640195.png" alt="image-20221121164359945"></p>
<hr>
<p>每个知识点小问?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ResultSet是什么?</span><br><span class="line">next()有什么特点?</span><br><span class="line">if(next())和while(next())有啥区别 ?</span><br><span class="line">如果按下标取值,下标从哪开始,下标顺序是什么顺序?</span><br><span class="line">如果按列名取值,列名根据谁来定?</span><br></pre></td></tr></table></figure>

<h3 id="5-登录案例【重要】"><a href="#5-登录案例【重要】" class="headerlink" title="5 登录案例【重要】"></a>5 登录案例【重要】</h3><blockquote>
<p>需求: </p>
<ul>
<li>通过控制台用户输入用户名和密码。 </li>
<li>用户输入的用户名和密码作为条件，编写查询 SQL 语句。 <ul>
<li>select * from user where usename &#x3D; xxx and password &#x3D; xxx</li>
</ul>
</li>
<li>如果该用户存在，提示登录成功，反之提示失败。</li>
</ul>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">package com.qf.jdbc;</span><br><span class="line"></span><br><span class="line">import com.mysql.jdbc.Driver;</span><br><span class="line"></span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.DriverManager;</span><br><span class="line">import java.sql.ResultSet;</span><br><span class="line">import java.sql.Statement;</span><br><span class="line">import java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * --- 天道酬勤 ---</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @author QiuShiju</span></span><br><span class="line"><span class="comment"> * @desc</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">public class Demo5_Login &#123;</span><br><span class="line"></span><br><span class="line">    public <span class="keyword">static</span> void main(String[] args) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="operator">/</span><span class="operator">/</span> <span class="number">1</span> 输入用户名和密码</span><br><span class="line">        Scanner scanner <span class="operator">=</span> <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        System.out.println(&quot;请输入用户名:&quot; );</span><br><span class="line">        String username <span class="operator">=</span> scanner.nextLine( );</span><br><span class="line"></span><br><span class="line">        System.out.println(&quot;请输入密码:&quot; );</span><br><span class="line">        String password <span class="operator">=</span> scanner.nextLine( );</span><br><span class="line"></span><br><span class="line">        <span class="operator">/</span><span class="operator">/</span> <span class="number">2</span> 根据用户名和密码查人</span><br><span class="line">       <span class="type">boolean</span> isOk <span class="operator">=</span>  findUserByLogin(username,password);</span><br><span class="line"></span><br><span class="line">        <span class="operator">/</span><span class="operator">/</span> <span class="number">3</span> 结果</span><br><span class="line">        if (isOk) &#123;</span><br><span class="line">            System.out.println(&quot;登录成功!&quot; );</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(&quot;用户名或密码错误!&quot; );</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="operator">/</span><span class="operator">/</span> 使用捕获代码完成</span><br><span class="line">    private <span class="keyword">static</span> <span class="type">boolean</span> findUserByLogin(String username, String password) &#123;</span><br><span class="line">        Connection conn <span class="operator">=</span> <span class="keyword">null</span>;</span><br><span class="line">        Statement statement <span class="operator">=</span> <span class="keyword">null</span>;</span><br><span class="line">        <span class="type">boolean</span> isOk <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">        try &#123;</span><br><span class="line">            Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</span><br><span class="line">            conn <span class="operator">=</span> DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/java2217?useSSL=false&quot;, &quot;root&quot;, &quot;123456&quot;);</span><br><span class="line"></span><br><span class="line">            statement <span class="operator">=</span> conn.createStatement( );</span><br><span class="line"></span><br><span class="line">            <span class="operator">/</span><span class="operator">/</span> 根据用户名和密码查询,注意字符串拼接.特别注意单引号</span><br><span class="line">            ResultSet rs <span class="operator">=</span> statement.executeQuery(&quot;select * from tb_user where username = &#x27;&quot;<span class="operator">+</span>username<span class="operator">+</span>&quot;&#x27; and password = &#x27;&quot;<span class="operator">+</span>password<span class="operator">+</span>&quot;&#x27;&quot;);</span><br><span class="line"></span><br><span class="line">            <span class="operator">/</span><span class="operator">/</span> 只要有值,就说明数据库有这个信息,登录成功</span><br><span class="line">            if (rs.next()) &#123;</span><br><span class="line">               <span class="operator">/</span><span class="operator">/</span> System.out.println(&quot;登录成功!&quot; );</span><br><span class="line">                <span class="type">int</span> id <span class="operator">=</span> rs.getInt(&quot;id&quot;);</span><br><span class="line">                String uname<span class="operator">=</span> rs.getString(&quot;username&quot;);</span><br><span class="line">                <span class="operator">/</span><span class="operator">/</span> ...</span><br><span class="line"></span><br><span class="line">                System.out.println(id<span class="operator">+</span>&quot;-&quot;<span class="operator">+</span>username);</span><br><span class="line">                isOk <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">               <span class="operator">/</span><span class="operator">/</span> System.out.println(&quot;用户名或密码错误!!&quot; );</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;catch (Exception e) &#123;</span><br><span class="line">            System.out.println(&quot;SQL操作出错!&quot; );</span><br><span class="line">            e.printStackTrace();<span class="operator">/</span><span class="operator">/</span> 打印异常</span><br><span class="line">        &#125; finally &#123;</span><br><span class="line">            try&#123;</span><br><span class="line">                statement.close();</span><br><span class="line">                conn.close();</span><br><span class="line">            &#125;catch (Exception e) &#123;</span><br><span class="line">                System.out.println(&quot;关流异常&quot; );</span><br><span class="line">                e.printStackTrace();<span class="operator">/</span><span class="operator">/</span> 打印异常</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> isOk;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="day12"><a href="#day12" class="headerlink" title="day12"></a>day12</h2><h3 id="今日内容-1"><a href="#今日内容-1" class="headerlink" title="今日内容"></a>今日内容</h3><blockquote>
<p>0 复习昨日<br>1 SQL注入问题<br>2 PreparedStatement<br>3 完成CRUD练习<br>4 ORM<br>5 DBUtil (properties)</p>
<p>6 事务操作</p>
</blockquote>
<h3 id="0-复习昨日-1"><a href="#0-复习昨日-1" class="headerlink" title="0 复习昨日"></a>0 复习昨日</h3><blockquote>
<p>已经找人提问…</p>
</blockquote>
<h3 id="1-SQL注入"><a href="#1-SQL注入" class="headerlink" title="1 SQL注入"></a>1 SQL注入</h3><h4 id="1-1-什么是SQL注入"><a href="#1-1-什么是SQL注入" class="headerlink" title="1.1 什么是SQL注入"></a>1.1 什么是SQL注入</h4><blockquote>
<p>用户输入的数据中有SQL关键词,导致在执行SQL语句时出现一些不正常的情况.这就是SQL注入!</p>
<hr>
<p>出现SQL注入是很危险</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091643968.png" alt="image-20221122094710845"></p>
<h4 id="1-2-避免SQL注入"><a href="#1-2-避免SQL注入" class="headerlink" title="1.2 避免SQL注入"></a>1.2 避免SQL注入</h4><blockquote>
<p>问题出现在用户输入数据时,里面有关键词,再配合字符串拼接导致出现SQL注入.所以为了避免SQL注入,可以在用户输入数据到SQL之前,先把SQL语句<code>预编译</code>,预处理后,JDBC就会知道此SQL需要几个参数,后续再将用户输入的数据给参数填充.</p>
<p>这就是PreparedStatement</p>
</blockquote>
<h3 id="2-PreparedStatement【重点】"><a href="#2-PreparedStatement【重点】" class="headerlink" title="2 PreparedStatement【重点】"></a>2 PreparedStatement【重点】</h3><blockquote>
<p>PreparedStatement是Statement的子接口,用来预处理SQL语句</p>
</blockquote>
<blockquote>
<p>PreparedStatement使用</p>
<ul>
<li>先写SQL语句,SQL语句中的参数不能直接拼接,而是使用<code>?占位</code></li>
<li>使用ps预处理SQL语句,处理的?号,ps内部就会知道此SQL语句需要几个参数</li>
<li>再动态给?处填充值</li>
</ul>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">package com.qf.jdbc;</span><br><span class="line"></span><br><span class="line">import java.sql.<span class="operator">*</span>;</span><br><span class="line">import java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * --- 天道酬勤 ---</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @author QiuShiju</span></span><br><span class="line"><span class="comment"> * @desc 登录-使用预处理语句完成</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">public class Demo2_LoginPlus &#123;</span><br><span class="line"></span><br><span class="line">    public <span class="keyword">static</span> void main(String[] args) throws Exception &#123;</span><br><span class="line"></span><br><span class="line">        Scanner scanner <span class="operator">=</span> <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        System.out.println(&quot;请输入用户名:&quot; );</span><br><span class="line">        String username <span class="operator">=</span> scanner.nextLine( );</span><br><span class="line"></span><br><span class="line">        System.out.println(&quot;请输入密码:&quot; );</span><br><span class="line">        String password <span class="operator">=</span> scanner.nextLine( );</span><br><span class="line"></span><br><span class="line">        Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</span><br><span class="line">        Connection conn <span class="operator">=</span> DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/java2217?useSSL=false&quot;, &quot;root&quot;, &quot;123456&quot;);</span><br><span class="line"></span><br><span class="line">        <span class="operator">/</span><span class="operator">/</span> 改造<span class="keyword">SQL</span>,将拼接变量,变成?占位</span><br><span class="line">        String <span class="keyword">sql</span> <span class="operator">=</span> &quot;select * from tb_user where username = ? and password = ?&quot;;</span><br><span class="line">        System.out.println(&quot;处理前:  &quot; <span class="operator">+</span> <span class="keyword">sql</span>);</span><br><span class="line"></span><br><span class="line">        <span class="operator">/</span><span class="operator">/</span> 由之前的Statement换成PreparedStatement</span><br><span class="line">        <span class="operator">/</span><span class="operator">/</span> 将改造好的<span class="keyword">SQL</span>,传入方法</span><br><span class="line">        PreparedStatement ps <span class="operator">=</span> conn.prepareStatement(<span class="keyword">sql</span>);</span><br><span class="line">        System.out.println(&quot;处理后: &quot; <span class="operator">+</span> ps );</span><br><span class="line"></span><br><span class="line">        <span class="operator">/</span><span class="operator">/</span> 给处理好的占位参数赋值</span><br><span class="line">        <span class="operator">/</span><span class="operator">/</span> ps.setXxx() 给指定Xxx类型赋值</span><br><span class="line">        <span class="operator">/</span><span class="operator">/</span> 第一个?,下标是<span class="number">1</span></span><br><span class="line">        ps.setString(<span class="number">1</span>,username);</span><br><span class="line">        ps.setString(<span class="number">2</span>,password);</span><br><span class="line"></span><br><span class="line">        System.out.println(&quot;填充后: &quot; <span class="operator">+</span> ps );</span><br><span class="line"></span><br><span class="line">        <span class="operator">/</span><span class="operator">/</span>【特别注意<span class="operator">!</span><span class="operator">!</span><span class="operator">!</span><span class="operator">!</span>】 此处executeQuery不需要再传入<span class="keyword">SQL</span>参数<span class="operator">!</span><span class="operator">!</span><span class="operator">!</span></span><br><span class="line">        ResultSet rs <span class="operator">=</span> ps.executeQuery();</span><br><span class="line"></span><br><span class="line">        if (rs.next()) &#123;</span><br><span class="line">            System.out.println(&quot;登录成功!!&quot; );</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(&quot;用户名或密码错误!&quot; );</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        rs.close();</span><br><span class="line">        ps.close();</span><br><span class="line">        conn.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">请输入用户名:</span><br><span class="line"><span class="number">111</span></span><br><span class="line">请输入密码:</span><br><span class="line"><span class="number">111</span><span class="string">&#x27; or &#x27;</span><span class="number">1</span><span class="operator">=</span><span class="number">1</span></span><br><span class="line">处理前:  <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> tb_user <span class="keyword">where</span> username <span class="operator">=</span> ? <span class="keyword">and</span> password <span class="operator">=</span> ?</span><br><span class="line">处理后: <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> tb_user <span class="keyword">where</span> username <span class="operator">=</span> <span class="operator">*</span><span class="operator">*</span> <span class="keyword">NOT</span> SPECIFIED <span class="operator">*</span><span class="operator">*</span> <span class="keyword">and</span> password <span class="operator">=</span> <span class="operator">*</span><span class="operator">*</span> <span class="keyword">NOT</span> SPECIFIED <span class="operator">*</span><span class="operator">*</span></span><br><span class="line">填充后: <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> tb_user <span class="keyword">where</span> username <span class="operator">=</span> <span class="string">&#x27;111&#x27;</span> <span class="keyword">and</span> password <span class="operator">=</span> <span class="string">&#x27;111\&#x27;</span> <span class="keyword">or</span> \<span class="string">&#x27;1=1&#x27;</span></span><br><span class="line">用户名或密码错误<span class="operator">!</span></span><br></pre></td></tr></table></figure>

<h3 id="3-完成CRUD练习"><a href="#3-完成CRUD练习" class="headerlink" title="3 完成CRUD练习"></a>3 完成CRUD练习</h3><h4 id="3-1-插入-1"><a href="#3-1-插入-1" class="headerlink" title="3.1 插入"></a>3.1 插入</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">package com.qf.jdbc;</span><br><span class="line"></span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.DriverManager;</span><br><span class="line">import java.sql.PreparedStatement;</span><br><span class="line">import java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * --- 天道酬勤 ---</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @author QiuShiju</span></span><br><span class="line"><span class="comment"> * @desc  使用预处理语句插入数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">public class Demo3_insert &#123;</span><br><span class="line"></span><br><span class="line">    public <span class="keyword">static</span> void main(String[] args) throws Exception &#123;</span><br><span class="line"></span><br><span class="line">        Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</span><br><span class="line">        Connection conn <span class="operator">=</span> DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/java2217?useSSL=false&quot;, &quot;root&quot;, &quot;123456&quot;);</span><br><span class="line"></span><br><span class="line">        <span class="operator">/</span><span class="operator">/</span> <span class="number">1</span> 先改造<span class="keyword">SQL</span>(由拼接变成?)</span><br><span class="line">        String <span class="keyword">sql</span> <span class="operator">=</span> &quot;insert into tb_user (id,username,password,phone,createTime,money,sex) values (?,?,?,?,?,?,?)&quot;;</span><br><span class="line"></span><br><span class="line">        <span class="operator">/</span><span class="operator">/</span> <span class="number">2</span> 预处理</span><br><span class="line">        PreparedStatement ps <span class="operator">=</span> conn.prepareStatement(<span class="keyword">sql</span>);</span><br><span class="line"></span><br><span class="line">        <span class="operator">/</span><span class="operator">/</span> <span class="number">3</span> 给?处赋值</span><br><span class="line">        ps.setInt(<span class="number">1</span>,<span class="number">5</span>);</span><br><span class="line">        ps.setString(<span class="number">2</span>,&quot;亚鹏&quot;);</span><br><span class="line">        ps.setString(<span class="number">3</span>,&quot;333000&quot;);</span><br><span class="line">        ps.setString(<span class="number">4</span>,&quot;333333&quot;);</span><br><span class="line">        <span class="operator">/</span><span class="operator">/</span> 【特别注意！！！】 setDate的参数,设置是java.sql.Date</span><br><span class="line">        <span class="operator">/</span><span class="operator">/</span> 我们常用的是java.util.Date</span><br><span class="line">        <span class="operator">/</span><span class="operator">/</span> java.sql.Date是java.util.Date的子类</span><br><span class="line">        <span class="operator">/</span><span class="operator">/</span> java.sql.Date有个构造方法,可以通过毫秒值创建日期</span><br><span class="line">        <span class="operator">/</span><span class="operator">/</span> 通过常用的java.util.Date获得毫秒值</span><br><span class="line">        ps.setDate(<span class="number">5</span>,<span class="keyword">new</span> java.sql.Date(<span class="keyword">new</span> java.util.Date().getTime()));</span><br><span class="line"></span><br><span class="line">        <span class="operator">/</span><span class="operator">/</span> 如果需要设置日期时间 yyyy<span class="operator">-</span>MM<span class="operator">-</span>dd HH:mm:ss</span><br><span class="line">        <span class="operator">/</span><span class="operator">/</span> 使用ps.setTimestamp();</span><br><span class="line"></span><br><span class="line">        ps.setDouble(<span class="number">6</span>,<span class="number">3000.1</span>);</span><br><span class="line">        ps.setInt(<span class="number">7</span>,<span class="number">1</span>);</span><br><span class="line">        <span class="operator">/</span><span class="operator">/</span> 【特别注意！！！】 此处不要再填参数</span><br><span class="line">        <span class="type">int</span> num <span class="operator">=</span> ps.executeUpdate( );</span><br><span class="line"></span><br><span class="line">        if (num <span class="operator">&gt;</span> <span class="number">0</span>) &#123;</span><br><span class="line">            System.out.println(&quot;插入成功&quot; );</span><br><span class="line">        &#125;</span><br><span class="line">        ps.close();</span><br><span class="line">        conn.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-2-更新-1"><a href="#3-2-更新-1" class="headerlink" title="3.2 更新"></a>3.2 更新</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">package com.qf.jdbc;</span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.DriverManager;</span><br><span class="line">import java.sql.PreparedStatement;</span><br><span class="line">import java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * --- 天道酬勤 ---</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @author QiuShiju</span></span><br><span class="line"><span class="comment"> * @desc</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">public class Demo4_update &#123;</span><br><span class="line"></span><br><span class="line">    public <span class="keyword">static</span> void main(String[] args) throws  Exception&#123;</span><br><span class="line"></span><br><span class="line">        Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</span><br><span class="line">        Connection conn <span class="operator">=</span> DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/java2217?useSSL=false&quot;, &quot;root&quot;, &quot;123456&quot;);</span><br><span class="line"></span><br><span class="line">        <span class="operator">/</span><span class="operator">/</span> <span class="number">1</span> 改造<span class="keyword">sql</span></span><br><span class="line">        String <span class="keyword">sql</span> <span class="operator">=</span> &quot;update tb_user set username = ? , createTime = ? , money = ? where id = ?&quot;;</span><br><span class="line">        <span class="operator">/</span><span class="operator">/</span> <span class="number">2</span> 预处理</span><br><span class="line">        PreparedStatement ps <span class="operator">=</span> conn.prepareStatement(<span class="keyword">sql</span>);</span><br><span class="line">        <span class="operator">/</span><span class="operator">/</span> <span class="number">3</span> 填充?</span><br><span class="line">        ps.setString(<span class="number">1</span>,&quot;小谢&quot;);</span><br><span class="line"></span><br><span class="line">        <span class="type">Date</span> utilDate <span class="operator">=</span> <span class="keyword">new</span> <span class="type">Date</span>( );</span><br><span class="line">        utilDate.setYear(<span class="number">100</span>);</span><br><span class="line">        utilDate.setMonth(<span class="number">0</span>);</span><br><span class="line">        utilDate.setDate(<span class="number">1</span>);</span><br><span class="line">        long <span class="type">time</span> <span class="operator">=</span> utilDate.getTime( );</span><br><span class="line">        ps.setDate(<span class="number">2</span>,<span class="keyword">new</span> java.sql.Date(<span class="type">time</span>));</span><br><span class="line"></span><br><span class="line">        ps.setDouble(<span class="number">3</span>,<span class="number">4000.1</span>);</span><br><span class="line">        ps.setInt(<span class="number">4</span>,<span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> num <span class="operator">=</span> ps.executeUpdate( );</span><br><span class="line"></span><br><span class="line">        if (num <span class="operator">&gt;</span> <span class="number">0</span>) &#123;</span><br><span class="line">            System.out.println(&quot;更新成功&quot; );</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        ps.close();</span><br><span class="line">        conn.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-3-删除-1"><a href="#3-3-删除-1" class="headerlink" title="3.3 删除"></a>3.3 删除</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">public <span class="keyword">static</span> void main(String[] args) throws  Exception&#123;</span><br><span class="line"></span><br><span class="line">    Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</span><br><span class="line">    Connection conn <span class="operator">=</span> DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/java2217?useSSL=false&quot;, &quot;root&quot;, &quot;123456&quot;);</span><br><span class="line"></span><br><span class="line">    <span class="operator">/</span><span class="operator">/</span> <span class="number">1</span> 改造<span class="keyword">sql</span></span><br><span class="line">    String <span class="keyword">sql</span> <span class="operator">=</span> &quot;delete from tb_user where id = ?&quot;;</span><br><span class="line">    <span class="operator">/</span><span class="operator">/</span> <span class="number">2</span> 预处理</span><br><span class="line">    PreparedStatement ps <span class="operator">=</span> conn.prepareStatement(<span class="keyword">sql</span>);</span><br><span class="line">    <span class="operator">/</span><span class="operator">/</span> <span class="number">3</span> 填充?</span><br><span class="line">    ps.setInt(<span class="number">1</span>,<span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> num <span class="operator">=</span> ps.executeUpdate( );</span><br><span class="line"></span><br><span class="line">    if (num <span class="operator">&gt;</span> <span class="number">0</span>) &#123;</span><br><span class="line">        System.out.println(&quot;删除成功&quot; );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ps.close();</span><br><span class="line">    conn.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-事务处理"><a href="#4-事务处理" class="headerlink" title="4 事务处理"></a>4 事务处理</h3><blockquote>
<p>事务是逻辑一组操作,要么全部成功,要么全部失败!</p>
<hr>
<p>使用mysql客户端操作事务</p>
<ul>
<li>因为mysql支持事务,且每句话都在事务内,且自动提交</li>
<li>所以关闭自动提交事务,手动开启事务 start transaction</li>
<li>正常写sql&#x2F;执行sql</li>
<li>一切正常,提交事务 commit</li>
<li>如果不正常,要回滚 rollback</li>
</ul>
</blockquote>
<blockquote>
<p>JDBC也可以完成事务操作</p>
<ul>
<li>conn.setAutoCommit(false) 关闭自动提交,就相当于是开启手动管理</li>
<li>正常的处理sql</li>
<li>一切正常,提交事务 conn.commit()</li>
<li>如果不正常,回滚  conn.rollback()</li>
</ul>
</blockquote>
<p>演示: 以转账案例演示</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qf.tx;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * --- 天道酬勤 ---</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> QiuShiju</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@desc</span> 以转账为案例演示</span></span><br><span class="line"><span class="comment"> * --------------------</span></span><br><span class="line"><span class="comment"> * Statement语句和PreparedStatement语句</span></span><br><span class="line"><span class="comment"> * 与事务操作没有影响</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo6_TX</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 张三转账给李四</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">ps1</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">ps2</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">            conn = DriverManager.getConnection(<span class="string">&quot;jdbc:mysql://localhost:3306/java2217?useSSL=false&quot;</span>, <span class="string">&quot;root&quot;</span>, <span class="string">&quot;123456&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 【1 开启事务】</span></span><br><span class="line">            conn.setAutoCommit(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 张三的钱减少100</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql1</span> <span class="operator">=</span> <span class="string">&quot;update account set money = money - 100 where id = 1&quot;</span>;</span><br><span class="line">            ps1 = conn.prepareStatement(sql1);</span><br><span class="line">            <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> ps1.executeUpdate( );</span><br><span class="line">            <span class="keyword">if</span> (num &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;张三转账(-100)完成!&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            System.out.println(<span class="number">1</span>/<span class="number">0</span> ); <span class="comment">// 模拟在转账中,出现异常,后续不执行</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// 李四的钱要增加100</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql2</span> <span class="operator">=</span> <span class="string">&quot;update account set money = money + 100 where id = 2&quot;</span>;</span><br><span class="line">            ps2 = conn.prepareStatement(sql2);</span><br><span class="line">            <span class="type">int</span> <span class="variable">num2</span> <span class="operator">=</span> ps2.executeUpdate( );</span><br><span class="line">            <span class="keyword">if</span> (num2 &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;李四转账(+100)完成!&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 【2 一切顺利,提交事务】</span></span><br><span class="line">            conn.commit();</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                <span class="comment">// 【3 不顺利,中间有异常,回滚事务】</span></span><br><span class="line">                conn.rollback();</span><br><span class="line">            &#125;<span class="keyword">catch</span> (Exception e2) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;回滚事务异常!!&quot;</span> );</span><br><span class="line">                e2.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;SQL异常!!!&quot;</span>);</span><br><span class="line">            e.printStackTrace( );</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                ps1.close( );</span><br><span class="line">                ps2.close( );</span><br><span class="line">                conn.close( );</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;关流时有异常!!&quot;</span>);</span><br><span class="line">                e.printStackTrace( );</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>另外发现: 建立与Mysql连接后,关流之前,可以执行很多次SQL语句</p>
</blockquote>
<h3 id="5-ORM【重点】"><a href="#5-ORM【重点】" class="headerlink" title="5 ORM【重点】"></a>5 ORM【重点】</h3><h4 id="5-1-什么是ORM"><a href="#5-1-什么是ORM" class="headerlink" title="5.1 什么是ORM"></a>5.1 什么是ORM</h4><blockquote>
<p>目前使用JDBC完成了CRUD,但是现在是进行CRUD,增删改方法要设计很多参数,查询的方法需要设计集合才能返回.</p>
<hr>
<p><strong>在实际开发中,我们需要将零散的数据封装到对象处理.</strong></p>
</blockquote>
<blockquote>
<p>ORM (Object Relational Mapping) 对象关系映射</p>
<p>是指<code>数据库表</code>与<code>Java的实体类</code>有关系,可以进行映射</p>
<ul>
<li>数据库表   –&gt; Java的类  <ul>
<li>tb_user   —&gt; User.java</li>
</ul>
</li>
<li>字段   –&gt; 类的属性<ul>
<li>id int    –&gt;  private int id;</li>
<li>username varchar   –&gt; private String username;</li>
<li>…</li>
</ul>
</li>
<li>一行数据    –&gt; 类的对象</li>
</ul>
</blockquote>
<h4 id="5-2-实体类"><a href="#5-2-实体类" class="headerlink" title="5.2 实体类"></a>5.2 实体类</h4><blockquote>
<p>实体类: 数据表中零散数据的载体,用来封装数据.</p>
<ul>
<li>表名 设计 类名</li>
<li>将列名设计成属性名<ul>
<li>id  –&gt; id</li>
<li>create_time   –&gt; createTime  (下划线转驼峰)</li>
</ul>
</li>
<li>将列的数据类型设计成属性的数据类型</li>
<li>给类提供对应set get</li>
</ul>
<hr>
<p>一般项目中一个表就会对应一个实体类,所有的实体类都会放在<strong>model&#x2F;entity</strong>&#x2F;pojo&#x2F;javabeen包结构中</p>
<hr>
<p>将来写项目,数据库设计完,搭建完项目,第一件事件就是根据表结构,创建实体类</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qf.model; <span class="comment">// 包</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;   <span class="comment">// 实体类,是表名</span></span><br><span class="line">	<span class="comment">// 属性是字段名</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> String phone;</span><br><span class="line">    <span class="keyword">private</span> Date createTime;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> money;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> sex;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// setter getter...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091643971.png" alt="image-20221122160619448"></p>
<h4 id="5-3-使用ORM完成CRUD"><a href="#5-3-使用ORM完成CRUD" class="headerlink" title="5.3 使用ORM完成CRUD"></a>5.3 使用ORM完成CRUD</h4><h5 id="5-3-1-查询使用ORM封装数据"><a href="#5-3-1-查询使用ORM封装数据" class="headerlink" title="5.3.1 查询使用ORM封装数据"></a>5.3.1 查询使用ORM封装数据</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qf.orm;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.qf.model.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * --- 天道酬勤 ---</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> QiuShiju</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@desc</span> 登录完成,查询到数据,将数据封装到User对象</span></span><br><span class="line"><span class="comment"> * ---------------------------------------------</span></span><br><span class="line"><span class="comment"> * 使用ORM封装数据,将查询得到结果集封装到User对象中</span></span><br><span class="line"><span class="comment"> * 即登录成功  User对象中有值</span></span><br><span class="line"><span class="comment"> *  登录不成功 User对象不存在</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo7_Login_ORM</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        System.out.println(<span class="string">&quot;请输入用户名:&quot;</span> );</span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> scanner.nextLine( );</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;请输入密码:&quot;</span> );</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> scanner.nextLine( );</span><br><span class="line"></span><br><span class="line">        Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> DriverManager.getConnection(<span class="string">&quot;jdbc:mysql://localhost:3306/java2217?useSSL=false&quot;</span>, <span class="string">&quot;root&quot;</span>, <span class="string">&quot;123456&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from tb_user where username = ? and password = ?&quot;</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">ps</span> <span class="operator">=</span> conn.prepareStatement(sql);</span><br><span class="line">        ps.setString(<span class="number">1</span>,username);</span><br><span class="line">        ps.setString(<span class="number">2</span>,password);</span><br><span class="line"></span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> ps.executeQuery( );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 声明用于封装数据表数据的实体类</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (rs.next()) &#123;</span><br><span class="line">            <span class="comment">// 从结果集取值</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">id</span> <span class="operator">=</span> rs.getInt(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">uname</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">pwd</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">phone</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;phone&quot;</span>);</span><br><span class="line">            <span class="type">Date</span> <span class="variable">createTime</span> <span class="operator">=</span> rs.getDate(<span class="string">&quot;createTime&quot;</span>);</span><br><span class="line">            <span class="type">double</span> <span class="variable">money</span> <span class="operator">=</span> rs.getDouble(<span class="string">&quot;money&quot;</span>);</span><br><span class="line">            <span class="type">int</span> <span class="variable">sex</span> <span class="operator">=</span> rs.getInt(<span class="string">&quot;sex&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 创建封装数据用的实体类对象</span></span><br><span class="line">            user = <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">            <span class="comment">// 开始封装</span></span><br><span class="line">            user.setId(id);</span><br><span class="line">            user.setUsername(uname);</span><br><span class="line">            user.setPassword(pwd);</span><br><span class="line">            user.setPhone(phone);</span><br><span class="line">            user.setCreateTime(createTime); <span class="comment">// java.sql.Date是java.util.Date的子类</span></span><br><span class="line">            user.setMoney(money);</span><br><span class="line">            user.setSex(sex);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (user != <span class="literal">null</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;登录成功!&quot;</span> );</span><br><span class="line">            System.out.println(<span class="string">&quot;个人信息为:&quot;</span> + user );</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;登录失败!&quot;</span> );</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="5-3-2-插入使用ORM封装数据"><a href="#5-3-2-插入使用ORM封装数据" class="headerlink" title="5.3.2 插入使用ORM封装数据"></a>5.3.2 插入使用ORM封装数据</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qf.orm;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.qf.model.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * --- 天道酬勤 ---</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> QiuShiju</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@desc</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo8_Insert_ORM</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>( );</span><br><span class="line">        user.setId(<span class="number">6</span>);</span><br><span class="line">        user.setUsername(<span class="string">&quot;李冰&quot;</span>);</span><br><span class="line">        user.setPassword(<span class="string">&quot;123456&quot;</span> );</span><br><span class="line">        user.setCreateTime(<span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line">        user.setMoney(<span class="number">4000.1</span>);</span><br><span class="line">        user.setSex(<span class="number">2</span>);</span><br><span class="line">        user.setPhone(<span class="string">&quot;222333&quot;</span>);</span><br><span class="line"></span><br><span class="line">        insert(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">ps</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">            conn = DriverManager.getConnection(<span class="string">&quot;jdbc:mysql://localhost:3306/java2217?useSSL=false&quot;</span>, <span class="string">&quot;root&quot;</span>, <span class="string">&quot;123456&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into tb_user (id,username,password,phone,createTime,money,sex) values (?,?,?,?,?,?,?)&quot;</span>;</span><br><span class="line">            ps = conn.prepareStatement(sql);</span><br><span class="line">            ps.setInt(<span class="number">1</span>,user.getId());</span><br><span class="line">            ps.setString(<span class="number">2</span>,user.getUsername());</span><br><span class="line">            ps.setString(<span class="number">3</span>,user.getPassword());</span><br><span class="line">            ps.setString(<span class="number">4</span>,user.getPhone());</span><br><span class="line">            ps.setDate(<span class="number">5</span>,<span class="keyword">new</span> <span class="title class_">java</span>.sql.Date(user.getCreateTime().getTime()));</span><br><span class="line">            ps.setDouble(<span class="number">6</span>,user.getMoney());</span><br><span class="line">            ps.setInt(<span class="number">7</span>,user.getSex());</span><br><span class="line"></span><br><span class="line">            <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> ps.executeUpdate( );</span><br><span class="line">            <span class="keyword">if</span> (num &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;注册成功!&quot;</span> );</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;SQL异常!!!&quot;</span> );</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                ps.close();</span><br><span class="line">                conn.close();</span><br><span class="line">            &#125;<span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;关流异常!!&quot;</span> );</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-DBUtil【理解，会用】"><a href="#6-DBUtil【理解，会用】" class="headerlink" title="6 DBUtil【理解，会用】"></a>6 DBUtil【理解，会用】</h3><blockquote>
<p>DBUtil操作数据库的工具类,因为发现每次操作数据库,JDBC的步骤第1,2,5步完全重复的,即加载驱动,获得连接对象,已经最后的关流是每次都要写但每次都是一样的!!!!</p>
<hr>
<p>现在设计工具类,简化第1,2,5步</p>
<ul>
<li>设计个方法,调用直接获得连接对象</li>
<li>设计个方法,调用直接关闭全部的流对象</li>
</ul>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line">package com.qf.util;</span><br><span class="line"></span><br><span class="line">import java.io.InputStream;</span><br><span class="line">import java.sql.<span class="operator">*</span>;</span><br><span class="line">import java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * --- 天道酬勤 ---</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @author QiuShiju</span></span><br><span class="line"><span class="comment"> * @desc</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">public class DBUtil &#123;</span><br><span class="line"></span><br><span class="line">    <span class="operator">/</span><span class="operator">/</span> 创建Properties类对象,专用于操作properties文件</span><br><span class="line">    private <span class="keyword">static</span> <span class="keyword">final</span> Properties properties <span class="operator">=</span> <span class="keyword">new</span> Properties();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 加载驱动的目的是为了在JVM中有sql运行的环境</span></span><br><span class="line"><span class="comment">     * 该环境有一份就行了,不用重复加载</span></span><br><span class="line"><span class="comment">     * ------------------------------------</span></span><br><span class="line"><span class="comment">     * static 静态代码块</span></span><br><span class="line"><span class="comment">     * 1) 保证内存中只有一份</span></span><br><span class="line"><span class="comment">     * 2) 保证随着类加载而加载,即该代码块会执行</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="operator">/</span><span class="operator">/</span> 通过反射的技术获得字节码文件</span><br><span class="line">        <span class="operator">/</span><span class="operator">/</span> 再通过字节码文件将配置文件读取成输入流</span><br><span class="line">        InputStream inputStream <span class="operator">=</span> DBUtil.class.getResourceAsStream(&quot;/jdbc.properties&quot;);</span><br><span class="line">        try &#123;</span><br><span class="line">            <span class="operator">/</span><span class="operator">/</span> 再通过流获得其中数据</span><br><span class="line">            properties.load(inputStream);</span><br><span class="line">            <span class="operator">/</span><span class="operator">/</span> 从properties对象取值</span><br><span class="line">            Class.forName(properties.getProperty(&quot;driverClass&quot;));</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            System.out.println(&quot;加载驱动异常!!&quot; );</span><br><span class="line">            e.printStackTrace( );</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 一般会将关于JDBC配置信息,抽取出来,形成一个配置文件,方便维护</span></span><br><span class="line"><span class="comment">     * 文件类型是properties文件,该文件类似map,键值对类型</span></span><br><span class="line"><span class="comment">     * 名字 jdbc.properties</span></span><br><span class="line"><span class="comment">     * 位置 src/jdbc.properties</span></span><br><span class="line"><span class="comment">     * 内容</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    public <span class="keyword">static</span> Connection getConnection() &#123;</span><br><span class="line">        Connection conn <span class="operator">=</span> <span class="keyword">null</span>;</span><br><span class="line">        try&#123;</span><br><span class="line">            conn <span class="operator">=</span> DriverManager.getConnection(properties.getProperty(&quot;url&quot;),properties.getProperty(&quot;username&quot;) ,properties.getProperty(&quot;password&quot;) );</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            System.out.println(&quot;获得连接出异常!!!&quot; );</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> conn;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 关闭所有流</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    public <span class="keyword">static</span> void closeAll(Connection conn, Statement s) &#123;</span><br><span class="line">        if (conn <span class="operator">!=</span> <span class="keyword">null</span>) &#123;</span><br><span class="line">            try &#123;</span><br><span class="line">                conn.close();</span><br><span class="line">            &#125; catch (<span class="keyword">SQLException</span> throwables) &#123;</span><br><span class="line">                throwables.printStackTrace( );</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        if (s <span class="operator">!=</span> <span class="keyword">null</span>) &#123;</span><br><span class="line">            try &#123;</span><br><span class="line">                s.close();</span><br><span class="line">            &#125; catch (<span class="keyword">SQLException</span> throwables) &#123;</span><br><span class="line">                throwables.printStackTrace( );</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public <span class="keyword">static</span> void closeAll(Connection conn, Statement s, ResultSet rs)&#123;</span><br><span class="line">        if (conn <span class="operator">!=</span> <span class="keyword">null</span>) &#123;</span><br><span class="line">            try &#123;</span><br><span class="line">                conn.close();</span><br><span class="line">            &#125; catch (<span class="keyword">SQLException</span> throwables) &#123;</span><br><span class="line">                throwables.printStackTrace( );</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        if (s <span class="operator">!=</span> <span class="keyword">null</span>) &#123;</span><br><span class="line">            try &#123;</span><br><span class="line">                s.close();</span><br><span class="line">            &#125; catch (<span class="keyword">SQLException</span> throwables) &#123;</span><br><span class="line">                throwables.printStackTrace( );</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        if (rs <span class="operator">!=</span> <span class="keyword">null</span>) &#123;</span><br><span class="line">            try &#123;</span><br><span class="line">                rs.close();</span><br><span class="line">            &#125; catch (<span class="keyword">SQLException</span> throwables) &#123;</span><br><span class="line">                throwables.printStackTrace( );</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在src下创建jdbc.properties文件</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">driverClass</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="attr">url</span>=<span class="string">jdbc:mysql://localhost:3306/java2217?useSSL=false</span></span><br><span class="line"><span class="attr">username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">password</span>=<span class="string">123456</span></span><br></pre></td></tr></table></figure>











<h2 id="day13"><a href="#day13" class="headerlink" title="day13"></a>day13</h2><h3 id="今日内容-2"><a href="#今日内容-2" class="headerlink" title="今日内容"></a>今日内容</h3><blockquote>
<p>0 复习昨日<br>1 讲作业<br>2 数据库连接池(druid)<br>3 反射<br>4 改造DBUtil<br>5 完成CRUD练习</p>
</blockquote>
<h3 id="0-复习昨日-2"><a href="#0-复习昨日-2" class="headerlink" title="0 复习昨日"></a>0 复习昨日</h3><blockquote>
<p>1 sql注入</p>
<p>2 预处理语句</p>
<p>3 事务操作</p>
<p>4 DBUtil</p>
</blockquote>
<h3 id="1-作业【重要】"><a href="#1-作业【重要】" class="headerlink" title="1 作业【重要】"></a>1 作业【重要】</h3><blockquote>
<p>利用ORM完成,以下的几个方法非常重要,将来写项目就是这些操作</p>
<hr>
<p>写项目步骤</p>
<ul>
<li>搭建环境	<ul>
<li>创建项目</li>
<li>导入依赖</li>
<li>工具类</li>
<li>数据库对应实体类</li>
</ul>
</li>
<li>开发数据库层的代码<ul>
<li>数据库层代码，一般称为dao （data access object）</li>
<li>操作的是User表，所以类UserDao</li>
</ul>
</li>
</ul>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `tb_user` (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;用户编号&#x27;</span>,</span><br><span class="line">  `username` <span class="type">varchar</span>(<span class="number">10</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;用户名&#x27;</span>,</span><br><span class="line">  `password` <span class="type">varchar</span>(<span class="number">10</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;密码&#x27;</span>,</span><br><span class="line">  `phone` <span class="type">varchar</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;手机号&#x27;</span>,</span><br><span class="line">  `createTime` <span class="type">date</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;注册时间&#x27;</span>,</span><br><span class="line">  `money` <span class="keyword">double</span>(<span class="number">10</span>,<span class="number">2</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;账户余额&#x27;</span>,</span><br><span class="line">  `sex` <span class="type">int</span>(<span class="number">1</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;性别 1男2女&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB AUTO_INCREMENT<span class="operator">=</span><span class="number">8</span> <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8;</span><br></pre></td></tr></table></figure>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">1 根据id从数据库查询出用户信息</span><br><span class="line">	public User findUserById(int id)</span><br><span class="line"></span><br><span class="line">2 向数据库插入一个用户,返回是否插入成功</span><br><span class="line">	public boolean addUser(User user)</span><br><span class="line"></span><br><span class="line">3 通过id删除用户数据,返回boolean</span><br><span class="line">	public boolean deleteById(int id)</span><br><span class="line">4 设计方法,查询全部数据,返回值是List集合,集合中是全部用户数据</span><br><span class="line">  publicList&lt;User&gt; findAll()</span><br><span class="line">5 通过id更改用户数据</span><br><span class="line">	public boolean updateById(User user)</span><br><span class="line">	注意:根据id更新,即参数User对象中一定有id属性值 </span><br><span class="line">	更新user表的数据,根据User对象的属性更新,如果属性值是null则不跟更新,不为null就更新对应的字段</span><br><span class="line">	返回值是受影响的行数</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qf.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.qf.model.User;</span><br><span class="line"><span class="keyword">import</span> com.qf.util.DBUtil;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * --- 天道酬勤 ---</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> QiuShiju</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@desc</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据id查用户</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">findUserById</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> DBUtil.getConnection( );</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">ps</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            ps = conn.prepareStatement(<span class="string">&quot;select * from tb_user where id = ?&quot;</span>);</span><br><span class="line">            ps.setInt(<span class="number">1</span>, id);</span><br><span class="line"></span><br><span class="line">            rs = ps.executeQuery( );</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (rs.next( )) &#123;</span><br><span class="line">                user = <span class="keyword">new</span> <span class="title class_">User</span>( );</span><br><span class="line">                user.setId(rs.getInt(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">                user.setPhone(rs.getString(<span class="string">&quot;phone&quot;</span>));</span><br><span class="line">                user.setUsername(rs.getString(<span class="string">&quot;username&quot;</span>));</span><br><span class="line">                user.setSex(rs.getInt(<span class="string">&quot;sex&quot;</span>));</span><br><span class="line">                user.setMoney(rs.getDouble(<span class="string">&quot;money&quot;</span>));</span><br><span class="line">                user.setPassword(rs.getString(<span class="string">&quot;password&quot;</span>));</span><br><span class="line">                user.setCreateTime(rs.getDate(<span class="string">&quot;createTime&quot;</span>));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace( );</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            DBUtil.closeAll(conn, ps, rs);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查询全部数据,返回值是List集合,集合中是全部用户数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">findAll</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> DBUtil.getConnection( );</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">ps</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        ArrayList&lt;User&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;( );</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            ps = conn.prepareStatement(<span class="string">&quot;select * from tb_user&quot;</span>);</span><br><span class="line"></span><br><span class="line">            rs = ps.executeQuery( );</span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span> (rs.next( )) &#123;</span><br><span class="line">                <span class="comment">// 每一行数据都需要创建新对象</span></span><br><span class="line">                user = <span class="keyword">new</span> <span class="title class_">User</span>( );</span><br><span class="line">                user.setId(rs.getInt(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">                user.setPhone(rs.getString(<span class="string">&quot;phone&quot;</span>));</span><br><span class="line">                user.setUsername(rs.getString(<span class="string">&quot;username&quot;</span>));</span><br><span class="line">                user.setSex(rs.getInt(<span class="string">&quot;sex&quot;</span>));</span><br><span class="line">                user.setMoney(rs.getDouble(<span class="string">&quot;money&quot;</span>));</span><br><span class="line">                user.setPassword(rs.getString(<span class="string">&quot;password&quot;</span>));</span><br><span class="line">                user.setCreateTime(rs.getDate(<span class="string">&quot;createTime&quot;</span>));</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 将每个对象装入集合</span></span><br><span class="line">                list.add(user);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace( );</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            DBUtil.closeAll(conn, ps, rs);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 插入数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">addUser</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> DBUtil.getConnection( );</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">ps</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into tb_user (id,username,password,phone,createTime,money,sex) values (?,?,?,?,?,?,?)&quot;</span>;</span><br><span class="line">            ps = conn.prepareStatement(sql);</span><br><span class="line">            ps.setInt(<span class="number">1</span>, user.getId( ));</span><br><span class="line">            ps.setString(<span class="number">2</span>, user.getUsername( ));</span><br><span class="line">            ps.setString(<span class="number">3</span>, user.getPassword( ));</span><br><span class="line">            ps.setString(<span class="number">4</span>, user.getPhone( ));</span><br><span class="line">            ps.setDate(<span class="number">5</span>, <span class="keyword">new</span> <span class="title class_">java</span>.sql.Date(user.getCreateTime( ).getTime( )));</span><br><span class="line">            ps.setDouble(<span class="number">6</span>, user.getMoney( ));</span><br><span class="line">            ps.setInt(<span class="number">7</span>, user.getSex( ));</span><br><span class="line"></span><br><span class="line">            num = ps.executeUpdate( );</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace( );</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            DBUtil.closeAll(conn, ps);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> num &gt; <span class="number">0</span> ? <span class="literal">true</span> : <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 删除数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">deleteById</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> DBUtil.getConnection( );</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">ps</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;delete from tb_user where id = ?&quot;</span>;</span><br><span class="line">            ps = conn.prepareStatement(sql);</span><br><span class="line">            ps.setInt(<span class="number">1</span>, id);</span><br><span class="line"></span><br><span class="line">            num = ps.executeUpdate( );</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace( );</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            DBUtil.closeAll(conn, ps);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> num &gt; <span class="number">0</span> ? <span class="literal">true</span> : <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据id更新用户</span></span><br><span class="line"><span class="comment">     * 更新user表的数据,根据User对象的属性更新,</span></span><br><span class="line"><span class="comment">     * 如果属性值是null则不更新,不为null就更新对应的字段</span></span><br><span class="line"><span class="comment">     * ---------------------------------------</span></span><br><span class="line"><span class="comment">     * update tb_user set username= ?,password = ?,phone = ? ,,,,</span></span><br><span class="line"><span class="comment">     * -------------------------------------------</span></span><br><span class="line"><span class="comment">     * 因为值为空不为空情况不一样,那么每次更新的sql语句也不太一样,</span></span><br><span class="line"><span class="comment">     * 解决方案</span></span><br><span class="line"><span class="comment">     * 1) 方案一: (更新全部字段)</span></span><br><span class="line"><span class="comment">     * 在传给updateById()的user对象中,属性全部赋值,没有null</span></span><br><span class="line"><span class="comment">     * 属性值跟原表一样的,更新了也跟原表没变化</span></span><br><span class="line"><span class="comment">     * 属性值跟原表不一样的,就会更新成新值</span></span><br><span class="line"><span class="comment">     * 2) 方案二: (更新部分字段)</span></span><br><span class="line"><span class="comment">     * 根据传给updateById()的user对象中的属性值判断</span></span><br><span class="line"><span class="comment">     * 属性有值,就更新,属性没有值就不更新</span></span><br><span class="line"><span class="comment">     * 即SQL语句要动态拼接</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="comment">// 方案一</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">updateById1</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> DBUtil.getConnection( );</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">ps</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;update tb_user set username = ?,password = ?,&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;phone = ?,createTime = ?,money = ? ,&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;sex = ? where id = ?&quot;</span>;</span><br><span class="line">            ps = conn.prepareStatement(sql);</span><br><span class="line"></span><br><span class="line">            ps.setString(<span class="number">1</span>, user.getUsername( ));</span><br><span class="line">            ps.setString(<span class="number">2</span>, user.getPassword( ));</span><br><span class="line">            ps.setString(<span class="number">3</span>, user.getPhone( ));</span><br><span class="line">            ps.setDate(<span class="number">4</span>, <span class="keyword">new</span> <span class="title class_">java</span>.sql.Date(user.getCreateTime( ).getTime( )));</span><br><span class="line">            ps.setDouble(<span class="number">5</span>, user.getMoney( ));</span><br><span class="line">            ps.setInt(<span class="number">6</span>, user.getSex( ));</span><br><span class="line">            ps.setInt(<span class="number">7</span>, user.getId( ));</span><br><span class="line"></span><br><span class="line">            num = ps.executeUpdate( );</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace( );</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            DBUtil.closeAll(conn, ps);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> num &gt; <span class="number">0</span> ? <span class="literal">true</span> : <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 方案二</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">updateById2</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> DBUtil.getConnection( );</span><br><span class="line">        <span class="type">Statement</span> <span class="variable">statement</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;update tb_user set &quot;</span>;</span><br><span class="line">            <span class="keyword">if</span> (user.getUsername( ) != <span class="literal">null</span>) &#123;</span><br><span class="line">                sql += <span class="string">&quot;username = &#x27;&quot;</span> + user.getUsername( ) + <span class="string">&quot;&#x27;,&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (user.getPassword( ) != <span class="literal">null</span>) &#123;</span><br><span class="line">                sql += <span class="string">&quot;password = &#x27;&quot;</span> + user.getPassword( ) + <span class="string">&quot;&#x27; ,&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (user.getPhone( ) != <span class="literal">null</span>) &#123;</span><br><span class="line">                sql += <span class="string">&quot;phone = &#x27;&quot;</span> + user.getPhone( ) + <span class="string">&quot;&#x27; ,&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// ...继续拼接其他字段,我在此省略</span></span><br><span class="line">            System.out.println(<span class="string">&quot;字段拼接完的sql &quot;</span> + sql);</span><br><span class="line">            <span class="comment">// update tb_user set username= &#x27;aaa&#x27;,password = &#x27;111&#x27;,</span></span><br><span class="line">            <span class="comment">// 截取最后一个,</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> sql.lastIndexOf(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">newSql</span> <span class="operator">=</span> sql.substring(<span class="number">0</span>, index);</span><br><span class="line">            System.out.println(<span class="string">&quot;截取,后的sql  &quot;</span> + newSql);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 最后拼接条件</span></span><br><span class="line">            newSql += <span class="string">&quot; where id = &quot;</span> + user.getId( );</span><br><span class="line">            System.out.println(<span class="string">&quot;最终的sql  &quot;</span> + newSql);</span><br><span class="line"></span><br><span class="line">            statement = conn.createStatement( );</span><br><span class="line">            num = statement.executeUpdate(newSql);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace( );</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            DBUtil.closeAll(conn,statement);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> num &gt; <span class="number">0</span> ? <span class="literal">true</span> : <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qf.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.qf.dao.UserDao;</span><br><span class="line"><span class="keyword">import</span> com.qf.model.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * --- 天道酬勤 ---</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> QiuShiju</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@desc</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestUserDao</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">UserDao</span> <span class="variable">userDao</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserDao</span>( );</span><br><span class="line">        <span class="comment">// User user = userDao.findUserById(2);</span></span><br><span class="line">        <span class="comment">// System.out.println(user );</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// List&lt;User&gt; list = userDao.findAll( );</span></span><br><span class="line">        <span class="comment">// list.forEach(e -&gt; System.out.println(e ));</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// User user = new User( );</span></span><br><span class="line">        <span class="comment">// user.setId(8);</span></span><br><span class="line">        <span class="comment">// user.setUsername(&quot;博文&quot;);</span></span><br><span class="line">        <span class="comment">// user.setPassword(&quot;123456&quot;);</span></span><br><span class="line">        <span class="comment">// user.setCreateTime(new Date());</span></span><br><span class="line">        <span class="comment">// boolean isOk = userDao.addUser(user);</span></span><br><span class="line">        <span class="comment">// System.out.println(&quot;插入是否成功?&quot; + isOk );</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// boolean isOk = userDao.deleteById(4);</span></span><br><span class="line">        <span class="comment">// System.out.println(&quot;删除是否成功 &quot; + isOk );</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// User user = new User( );</span></span><br><span class="line">        <span class="comment">// user.setId(1);</span></span><br><span class="line">        <span class="comment">// user.setUsername(&quot;aaaa&quot;);</span></span><br><span class="line">        <span class="comment">// user.setPassword(&quot;123456&quot;);</span></span><br><span class="line">        <span class="comment">// user.setPhone(&quot;11110000&quot;);</span></span><br><span class="line">        <span class="comment">// user.setMoney(1000);</span></span><br><span class="line">        <span class="comment">// user.setSex(1);</span></span><br><span class="line">        <span class="comment">// user.setCreateTime(new Date(122,10,21));</span></span><br><span class="line">        <span class="comment">// boolean isOk = userDao.updateById1(user);</span></span><br><span class="line">        <span class="comment">// System.out.println(isOk );</span></span><br><span class="line"></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>( );</span><br><span class="line">        user.setId(<span class="number">2</span>);</span><br><span class="line">        user.setUsername(<span class="string">&quot;ROOT&quot;</span>);</span><br><span class="line">        user.setPassword(<span class="string">&quot;654321&quot;</span>);</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">isOk</span> <span class="operator">=</span> userDao.updateById2(user);</span><br><span class="line">        System.out.println(isOk );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>小结</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1 DAO是什么</span><br><span class="line">2 关于数据库操作的类,应该放在什么包,什么类中</span><br><span class="line">3 要将数据封装成对象(ORM)</span><br><span class="line">4 学会在编码时通过输出语句确定结果是否符合预期</span><br><span class="line">5 学会DEBUG</span><br><span class="line">6 记住以上5个CRUD思路</span><br></pre></td></tr></table></figure>

<h3 id="2-数据库连接池"><a href="#2-数据库连接池" class="headerlink" title="2 数据库连接池"></a>2 数据库连接池</h3><blockquote>
<p>目前数据库连接是使用是建立连接,用完直接关闭连接.即需要不断创建和销毁连接.就会消耗系统资源.借鉴线程池的思想,设计出<code>数据库连接池</code>.</p>
<p>在程序初始时,预先创建好指定数量的数据库连接对象,存储连接池。需要用时就去取，用完就放回去即可。就会不会频繁创建和销毁，从而节省系统资源。</p>
</blockquote>
<blockquote>
<p>使用上的线程池有很多</p>
<ul>
<li>druid (德鲁伊)</li>
<li>c3p0</li>
<li>dbcp</li>
<li>…</li>
</ul>
</blockquote>
<h4 id="2-1-Druid数据库连接池"><a href="#2-1-Druid数据库连接池" class="headerlink" title="2.1 Druid数据库连接池"></a>2.1 Druid数据库连接池</h4><blockquote>
<p>Druid是阿里开源技术,性能很好</p>
</blockquote>
<blockquote>
<p>使用步骤</p>
<ul>
<li><p>导入依赖druid.jar包</p>
</li>
<li><p>创建一个jdbc.properties</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">driverClass</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="attr">url</span>=<span class="string">jdbc:mysql://localhost:3306/java2217?useSSL=false</span></span><br><span class="line"><span class="attr">username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">password</span>=<span class="string">123456</span></span><br><span class="line"><span class="comment"># ----- 加入druid的一些连接配置</span></span><br><span class="line"><span class="comment">#&lt;!-- 初始化连接 --&gt;</span></span><br><span class="line"><span class="attr">initialSize</span>=<span class="string">10</span></span><br><span class="line"><span class="comment">#最大连接数量</span></span><br><span class="line"><span class="attr">maxActive</span>=<span class="string">50</span></span><br><span class="line"><span class="comment">#&lt;!-- 最小空闲连接 --&gt;</span></span><br><span class="line"><span class="attr">minIdle</span>=<span class="string">5</span></span><br><span class="line"><span class="comment">#&lt;!-- 超时等待时间以毫秒为单位 60000毫秒/1000等于60秒 --&gt;</span></span><br><span class="line"><span class="attr">maxWait</span>=<span class="string">5000</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>修改之前的DBUtil</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DBUtil</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 创建Properties类对象,专用于操作properties文件</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Properties</span> <span class="variable">properties</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">    <span class="comment">// 声明Druid连接池的连接池对象</span></span><br><span class="line">    <span class="comment">// 数据连接,一般称作数据源 dataSource</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> DruidDataSource dataSource;</span><br></pre></td></tr></table></figure></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">static</span> &#123;</span><br><span class="line"></span><br><span class="line">     <span class="keyword">try</span> &#123;</span><br><span class="line">         <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> DBUtil.class.getResourceAsStream(<span class="string">&quot;/jdbc.properties&quot;</span>);</span><br><span class="line">         properties.load(inputStream);</span><br><span class="line">         <span class="comment">// 不需要由我们加载驱动</span></span><br><span class="line">         <span class="comment">// 需要给dataSource赋值</span></span><br><span class="line">         dataSource = (DruidDataSource) DruidDataSourceFactory.createDataSource(properties);</span><br><span class="line"></span><br><span class="line">     &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">         System.out.println(<span class="string">&quot;加载驱动异常!!&quot;</span> );</span><br><span class="line">         e.printStackTrace( );</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title function_">getConnection</span><span class="params">()</span> &#123;</span><br><span class="line">     <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">     <span class="keyword">try</span>&#123;</span><br><span class="line">         <span class="comment">// 不需要我们获得连接</span></span><br><span class="line">         <span class="comment">// 而是通过Druid获得</span></span><br><span class="line">         conn = dataSource.getConnection();</span><br><span class="line">     &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">         System.out.println(<span class="string">&quot;获得连接出异常!!!&quot;</span> );</span><br><span class="line">         e.printStackTrace();</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">return</span> conn;</span><br><span class="line"> &#125;</span><br><span class="line"><span class="comment">// 后续正常...跟之前一样</span></span><br></pre></td></tr></table></figure>

<p>  }</p>
<ul>
<li><p>开始使用</p>
<ul>
<li>跟之前一样使用</li>
</ul>
</li>
</ul>
</blockquote>
<h3 id="3-反射-reflect"><a href="#3-反射-reflect" class="headerlink" title="3 反射(reflect)"></a>3 反射(reflect)</h3><blockquote>
<p>JAVA反射机制是在<code>运行状态</code>中，对于任意一个类，都能够知道这个类的所有属性和方法,对于任意一个对 象，都能够调用它的任意一个方法和属性</p>
<p>这种<code>动态获取的信息</code>以及<code>动态调用对象的方法</code>的功能称为java 语言的反射机制。 </p>
<p><strong>反射是在程序运行过程中拿到类的字节码文件,进而获得类中的属性,方法等.</strong></p>
</blockquote>
<h4 id="3-1-获得类的字节码文件"><a href="#3-1-获得类的字节码文件" class="headerlink" title="3.1 获得类的字节码文件"></a>3.1 获得类的字节码文件</h4><blockquote>
<ul>
<li>Object类的方法 getClass()</li>
<li>类的静态属性   Xxx.class</li>
<li>Class类的静态方法Class.forName(“xxx”)</li>
</ul>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * 演示获取字节码文件</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">getClassFile</span><span class="params">()</span> <span class="keyword">throws</span> ClassNotFoundException &#123;</span><br><span class="line">     <span class="comment">// 方式1</span></span><br><span class="line">     Class&lt;?&gt; clazz = Class.forName(<span class="string">&quot;com.qf.model.User&quot;</span>);</span><br><span class="line"></span><br><span class="line">     <span class="comment">// 方式2</span></span><br><span class="line">     Class&lt;User&gt; clazz2 = User.class;</span><br><span class="line"></span><br><span class="line">     <span class="comment">// 方式3</span></span><br><span class="line">     <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>( );</span><br><span class="line">     Class&lt;? <span class="keyword">extends</span> <span class="title class_">User</span>&gt; clazz3 = user.getClass( );</span><br><span class="line"></span><br><span class="line">     <span class="keyword">if</span> (clazz.equals(clazz2) &amp;&amp; clazz2.equals(clazz3)) &#123;</span><br><span class="line">         System.out.println(<span class="string">&quot;是同一个字节码文件&quot;</span> );</span><br><span class="line">     &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">         System.out.println(<span class="string">&quot;不是&quot;</span> );</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-2-获得并设置属性-Field"><a href="#3-2-获得并设置属性-Field" class="headerlink" title="3.2 获得并设置属性(Field)"></a>3.2 获得并设置属性(Field)</h4><blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091644658.png" alt="image-20221123162238900"></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获得字节码中的属性并操作</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">getAndSetFields</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    Class&lt;User&gt; clazz = User.class;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Filed getField(String name)</span></span><br><span class="line"><span class="comment">     *       通过属性名获得属性对象(只能获得public修饰的属性的属性对象)</span></span><br><span class="line"><span class="comment">     * Filed getDeclaredField()</span></span><br><span class="line"><span class="comment">     *       通过属性名获得属性对象(获得任意修饰符修饰的属性对象)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="comment">// Field id = clazz.getField(&quot;id&quot;);</span></span><br><span class="line">    <span class="comment">// System.out.println(id );</span></span><br><span class="line"></span><br><span class="line">    <span class="type">Field</span> <span class="variable">id1</span> <span class="operator">=</span> clazz.getDeclaredField(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">    System.out.println(id1 );</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Filed[]  getFields( ) 获得public修饰所有属性对象,返回数组</span></span><br><span class="line"><span class="comment">     * Filed[] getDeclaredFields( )  获得所有属性对象,返回数组</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    Field[] fields = clazz.getFields( );</span><br><span class="line">    System.out.println(fields.length );</span><br><span class="line">    Field[] declaredFields = clazz.getDeclaredFields( );</span><br><span class="line">    System.out.println(declaredFields.length );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// =============================================</span></span><br><span class="line">    <span class="comment">// 获得属性名</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> id1.getName( );</span><br><span class="line">    System.out.println(<span class="string">&quot;name = &quot;</span>+ name );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获得属性访问修饰符</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">modifiers</span> <span class="operator">=</span> id1.getModifiers( );</span><br><span class="line">    System.out.println(<span class="string">&quot;访问修饰符: &quot;</span> + modifiers );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获得属性值</span></span><br><span class="line">    <span class="comment">// 获得哪个对象的该属性值</span></span><br><span class="line">    <span class="comment">// 但是不能获得私有属性的值</span></span><br><span class="line">    <span class="comment">// 可以通过设置,就可以访问,</span></span><br><span class="line">    id1.setAccessible(<span class="literal">true</span>);</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>( );</span><br><span class="line">    <span class="type">int</span> <span class="variable">value</span> <span class="operator">=</span> id1.getInt(user);</span><br><span class="line">    System.out.println(<span class="string">&quot;id = &quot;</span> + value );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 设置属性值</span></span><br><span class="line">    <span class="comment">// 设置哪个对象的该属性值</span></span><br><span class="line">    id1.setInt( user,<span class="number">11</span>);</span><br><span class="line"></span><br><span class="line">    System.out.println(user );</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-3-获得并设置方法-Method"><a href="#3-3-获得并设置方法-Method" class="headerlink" title="3.3 获得并设置方法(Method)"></a>3.3 获得并设置方法(Method)</h4><blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091644660.png" alt="image-20221123164801100"></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  获得字节码中的方法</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">getAndSeMethod</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">   Class&lt;User&gt; clazz = User.class;</span><br><span class="line">   <span class="comment">// 方法有重载,需要通过参数来确定获得哪个方法</span></span><br><span class="line">   <span class="type">Method</span> <span class="variable">m1</span> <span class="operator">=</span> clazz.getMethod(<span class="string">&quot;m1&quot;</span>); <span class="comment">// 获得无参的m1方法</span></span><br><span class="line">   <span class="type">Method</span> <span class="variable">m1_</span> <span class="operator">=</span> clazz.getMethod(<span class="string">&quot;m1&quot;</span>,<span class="type">int</span>.class); <span class="comment">// 获得有参的m1(int)方法</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获得关于方法的所有信息</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> m1.getParameterCount( );<span class="comment">// 参数个数</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">count_</span> <span class="operator">=</span> m1_.getParameterCount( );<span class="comment">// 参数个数</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 操作方法,让方法执行</span></span><br><span class="line">    <span class="comment">// 参数1: 哪个对象的该方法执行</span></span><br><span class="line">    <span class="comment">// 参数2: 该方法执行时的参数</span></span><br><span class="line">    <span class="type">Object</span> <span class="variable">ret</span> <span class="operator">=</span> m1.invoke(<span class="keyword">new</span> <span class="title class_">User</span>( ));</span><br><span class="line">    System.out.println(<span class="string">&quot;m1()执行后的返回值:&quot;</span> + ret );</span><br><span class="line">    m1_.invoke(<span class="keyword">new</span> <span class="title class_">User</span>(),<span class="number">222</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-4-获得并设置构造方法-Constructor"><a href="#3-4-获得并设置构造方法-Constructor" class="headerlink" title="3.4 获得并设置构造方法(Constructor)"></a>3.4 获得并设置构造方法(Constructor)</h4><blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091644665.png" alt="image-20221123170511545"></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  获得字节码中的构造方法</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">getAndSeConstructor</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    Class&lt;User&gt; clazz = User.class;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 通过参数来获得有参还是无参构造</span></span><br><span class="line">    Constructor&lt;User&gt; constructor = clazz.getConstructor( );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 构造方法执行,创建对象</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> constructor.newInstance( );</span><br><span class="line"></span><br><span class="line">    System.out.println(user );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 创建字节码的对象,还有另外方法</span></span><br><span class="line">    <span class="comment">// 可以通过字节码,直接创建</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">user1</span> <span class="operator">=</span> clazz.newInstance( );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-使用反射封装DBUtil"><a href="#4-使用反射封装DBUtil" class="headerlink" title="4 使用反射封装DBUtil"></a>4 使用反射封装DBUtil</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qf.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.druid.pool.DruidDataSource;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.druid.pool.DruidDataSourceFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Field;</span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * --- 天道酬勤 ---</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> QiuShiju</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@desc</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DBUtil</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 创建Properties类对象,专用于操作properties文件</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Properties</span> <span class="variable">properties</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>( );</span><br><span class="line">    <span class="comment">// 声明Druid连接池的连接池对象</span></span><br><span class="line">    <span class="comment">// 数据连接,一般称作数据源 dataSource</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> DruidDataSource dataSource;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> DBUtil.class.getResourceAsStream(<span class="string">&quot;/jdbc.properties&quot;</span>);</span><br><span class="line">            properties.load(inputStream);</span><br><span class="line">            <span class="comment">// 不需要由我们加载驱动</span></span><br><span class="line">            <span class="comment">// 需要给dataSource赋值</span></span><br><span class="line">            dataSource = (DruidDataSource) DruidDataSourceFactory.createDataSource(properties);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;加载驱动异常!!&quot;</span>);</span><br><span class="line">            e.printStackTrace( );</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title function_">getConnection</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 不需要我们获得连接</span></span><br><span class="line">            <span class="comment">// 而是通过Druid获得</span></span><br><span class="line">            conn = dataSource.getConnection( );</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;获得连接出异常!!!&quot;</span>);</span><br><span class="line">            e.printStackTrace( );</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> conn;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 关闭所有流</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">closeAll</span><span class="params">(Connection conn, Statement s)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (conn != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                conn.close( );</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException throwables) &#123;</span><br><span class="line">                throwables.printStackTrace( );</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (s != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                s.close( );</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException throwables) &#123;</span><br><span class="line">                throwables.printStackTrace( );</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">closeAll</span><span class="params">(Connection conn, Statement s, ResultSet rs)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (conn != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                conn.close( );</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException throwables) &#123;</span><br><span class="line">                throwables.printStackTrace( );</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (s != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                s.close( );</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException throwables) &#123;</span><br><span class="line">                throwables.printStackTrace( );</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (rs != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                rs.close( );</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException throwables) &#123;</span><br><span class="line">                throwables.printStackTrace( );</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 封装查询方法,返回一个对象</span></span><br><span class="line"><span class="comment">     * 参数1 执行查询的SQL,预处理的,条件用?占位</span></span><br><span class="line"><span class="comment">     * select * from tb_user where id = ? and username = ? and password = ?</span></span><br><span class="line"><span class="comment">     * 参数2 结果要封装的类</span></span><br><span class="line"><span class="comment">     * 参数3 给?赋值,不定长参数,是数组</span></span><br><span class="line"><span class="comment">     * 1,admin,123456</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; T <span class="title function_">selectOne</span><span class="params">(String sql, Class&lt;T&gt; t, Object... args)</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> getConnection( );</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">ps</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">T</span> <span class="variable">target</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            ps = conn.prepareStatement(sql);</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; args != <span class="literal">null</span> &amp;&amp; i &lt; args.length; i++) &#123;</span><br><span class="line">                ps.setObject(i + <span class="number">1</span>, args[i]);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            rs = ps.executeQuery( );</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             * 创建对象</span></span><br><span class="line"><span class="comment">             * 从数据库取出数据,并设置对象属性</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            <span class="keyword">while</span> (rs.next( )) &#123;</span><br><span class="line">                target = t.newInstance( );</span><br><span class="line">                Field[] declaredFields = t.getDeclaredFields( );</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; declaredFields.length; i++) &#123;</span><br><span class="line">                    <span class="type">Field</span> <span class="variable">field</span> <span class="operator">=</span> declaredFields[i];</span><br><span class="line">                    <span class="type">Object</span> <span class="variable">value</span> <span class="operator">=</span> rs.getObject(field.getName( ));</span><br><span class="line"></span><br><span class="line">                    <span class="comment">// 破解私有</span></span><br><span class="line">                    field.setAccessible(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">                    <span class="comment">// 给对象的该字段赋值</span></span><br><span class="line">                    field.set(target, value);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace( );</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            closeAll(conn, ps, rs);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> target;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; List&lt;T&gt; <span class="title function_">selectAll</span><span class="params">(String sql, Class&lt;T&gt; t, Object... args)</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> getConnection( );</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">ps</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">T</span> <span class="variable">target</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        ArrayList&lt;T&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;( );</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            ps = conn.prepareStatement(sql);</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; args != <span class="literal">null</span> &amp;&amp; i &lt; args.length; i++) &#123;</span><br><span class="line">                ps.setObject(i + <span class="number">1</span>, args[i]);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            rs = ps.executeQuery( );</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             * 创建对象</span></span><br><span class="line"><span class="comment">             * 从数据库取出数据,并设置对象属性</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            <span class="keyword">while</span> (rs.next( )) &#123;</span><br><span class="line">                target = t.newInstance( );</span><br><span class="line">                Field[] declaredFields = t.getDeclaredFields( );</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; declaredFields.length; i++) &#123;</span><br><span class="line">                    <span class="type">Field</span> <span class="variable">field</span> <span class="operator">=</span> declaredFields[i];</span><br><span class="line">                    <span class="type">Object</span> <span class="variable">value</span> <span class="operator">=</span> rs.getObject(field.getName( ));</span><br><span class="line"></span><br><span class="line">                    <span class="comment">// 破解私有</span></span><br><span class="line">                    field.setAccessible(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">                    <span class="comment">// 给对象的该字段赋值</span></span><br><span class="line">                    field.set(target, value);</span><br><span class="line">                &#125;</span><br><span class="line">                list.add(target);</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace( );</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            closeAll(conn, ps, rs);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 增删改方法一样</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">update</span><span class="params">(String sql, Object... args)</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> getConnection( );</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">ps</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            ps = conn.prepareStatement(sql);</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; args != <span class="literal">null</span> &amp;&amp; i &lt; args.length; i++) &#123;</span><br><span class="line">                ps.setObject(i + <span class="number">1</span>, args[i]);</span><br><span class="line">            &#125;</span><br><span class="line">            num = ps.executeUpdate( );</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace( );</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            closeAll(conn, ps);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> num &gt; <span class="number">0</span> ? <span class="literal">true</span> : <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="day14"><a href="#day14" class="headerlink" title="day14"></a>day14</h2><h3 id="今日内容-3"><a href="#今日内容-3" class="headerlink" title="今日内容"></a>今日内容</h3><blockquote>
<p>0 复习昨日</p>
<p>1 maven</p>
<p>2 tomcat</p>
<p>3 创建项目</p>
</blockquote>
<h3 id="0-复习昨日-3"><a href="#0-复习昨日-3" class="headerlink" title="0 复习昨日"></a>0 复习昨日</h3><blockquote>
<p>1 单词写5遍<br>argument 参数 parameter 参数 access 访问 field  字段  invoke 调用 illegal 非法 </p>
<p>invalid  无效  column   列  property  属性 DataSource  数据源</p>
<p>2 数据库连接池有啥好处</p>
<p>3 获得字节码文件的方式<br>Class.forName(“”)<br>Xxx.class<br>对象.getClass()</p>
<p>4 封装<br>隐藏实现的细节,对外提供访问的方法<br>方法的封装<br>类的封装<br>工具类的封装</p>
<p>继承</p>
<p>多态<br>    方法的参数列表是父类<br>抽象<br>接口</p>
</blockquote>
<h3 id="1-Maven"><a href="#1-Maven" class="headerlink" title="1 Maven"></a>1 Maven</h3><h4 id="1-0-引言"><a href="#1-0-引言" class="headerlink" title="1.0 引言"></a>1.0 引言</h4><blockquote>
<p>之前写项目时,会有不同的问题</p>
<ul>
<li>jar包 管理(项目中有很多jar包)<ul>
<li>需要自己找jar包,下载</li>
<li>手动导入项目中</li>
<li>jar包版本更新….</li>
<li>占磁盘空间</li>
<li>重复量大</li>
</ul>
</li>
<li>项目结构不规范<ul>
<li>java代码和配置文件位置不规范</li>
</ul>
</li>
<li>….</li>
</ul>
</blockquote>
<h4 id="1-1-介绍"><a href="#1-1-介绍" class="headerlink" title="1.1 介绍"></a>1.1 介绍</h4><blockquote>
<p>项目管理工具,统一项目结构,配置文件,依赖,部署,测试等等</p>
<hr>
<p>Maven这个单词来自于意第绪语（犹太语），意为知识的积累，最初在Jakata Turbine项目中用来简化构建过程。当时有一些项目（有各自Ant build文件），仅有细微的差别，而JAR文件都由<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/CVS?fromModule=lemma_inlink">CVS</a>来维护。于是希望有一种标准化的方式构建项目，一个清晰的方式定义项目的组成，一个容易的方式发布项目的信息，以及一种简单的方式在多个项目中共享JARs。</p>
</blockquote>
<h4 id="1-2-下载"><a href="#1-2-下载" class="headerlink" title="1.2 下载"></a>1.2 下载</h4><blockquote>
<p>网址 <a target="_blank" rel="noopener" href="https://maven.apache.org/download.cgi">Maven – Download Apache Maven</a></p>
<p>下载地址  <a target="_blank" rel="noopener" href="https://archive.apache.org/dist/maven/maven-3/">Index of &#x2F;dist&#x2F;maven&#x2F;maven-3 (apache.org)</a></p>
</blockquote>
<h4 id="1-3-安装"><a href="#1-3-安装" class="headerlink" title="1.3 安装"></a>1.3 安装</h4><h5 id="1-3-1-解压"><a href="#1-3-1-解压" class="headerlink" title="1.3.1 解压"></a>1.3.1 解压</h5><blockquote>
<p>特别注意: 尽量不要有中文路径</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">解压后有几个文件夹</span><br><span class="line">- bin  运行maven命令的脚本</span><br><span class="line">- boot 运行是需要类库</span><br><span class="line">- conf 配置,有关于maven的配置文件</span><br><span class="line">- lib  运行是需要的jar包</span><br></pre></td></tr></table></figure>

<h5 id="1-3-2-配置环境变量"><a href="#1-3-2-配置环境变量" class="headerlink" title="1.3.2 配置环境变量"></a>1.3.2 配置环境变量</h5><blockquote>
<p>系统变量创建: MAVEN_HOME  值是maven安装路径</p>
<p>系统变量path添加 %MAVEN_HOME%\bin</p>
</blockquote>
<h5 id="1-3-3-测试"><a href="#1-3-3-测试" class="headerlink" title="1.3.3 测试"></a>1.3.3 测试</h5><p>打开cmd,输入<code>mvn -v</code></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091647639.png" alt="image-20221124095549254"></p>
<h4 id="1-4-仓库"><a href="#1-4-仓库" class="headerlink" title="1.4 仓库"></a>1.4 仓库</h4><blockquote>
<p>maven项目管理工具,管理依赖(jar包),实现依赖的复用.</p>
<hr>
<p>maven有仓库,将依赖放入仓库,每个项目都去复用</p>
<ul>
<li>本地仓库<ul>
<li>自己电脑上</li>
<li>需要依赖的时候,会先从本地仓库中,如果找不到就会去中央仓库找,下载到本地仓库</li>
</ul>
</li>
<li>中央仓库<ul>
<li>位于国外服务器,包含绝大部分依赖</li>
<li>可能有时候访问比较慢</li>
</ul>
</li>
<li>公共仓库<ul>
<li>私服(个人)</li>
<li>阿里云,网易,等等</li>
</ul>
</li>
</ul>
</blockquote>
<h4 id="1-5-Maven配置"><a href="#1-5-Maven配置" class="headerlink" title="1.5 Maven配置"></a>1.5 Maven配置</h4><h6 id="1-5-1-修改仓库位置"><a href="#1-5-1-修改仓库位置" class="headerlink" title="1.5.1 修改仓库位置"></a>1.5.1 修改仓库位置</h6><blockquote>
<p>maven安装好后,默认本地仓库在c盘,要修改为其他地方</p>
<hr>
<p>修改maven的配置文件(conf\settings.xml)</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 将53行注释内代码,复制出来,粘贴到55行,修改路径为自己本地仓库位置 --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">localRepository</span>&gt;</span>D:\repository<span class="tag">&lt;/<span class="name">localRepository</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ps: 记得保存,ctrl+s</p>
<h5 id="1-5-2-设置镜像"><a href="#1-5-2-设置镜像" class="headerlink" title="1.5.2 设置镜像"></a>1.5.2 设置镜像</h5><blockquote>
<p>依赖会先从本地仓库找,本地没有会从中央仓库下载到本地仓库,中央仓库访问很慢,所以需要设置国内镜像,访问就很快!</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--setting.xml中添加如下配置 146行附近</span></span><br><span class="line"><span class="comment"> 一定是在开闭标签 &lt;mirrors&gt; &lt;/mirrors&gt;中间设置</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>aliyun<span class="tag">&lt;/<span class="name">id</span>&gt;</span>  </span><br><span class="line">        <span class="comment">&lt;!-- 中心仓库的 mirror(镜像) --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>central<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span>    </span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>Nexus aliyun<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- aliyun仓库地址 以后所有要指向中心仓库的请求，都会指向aliyun仓库--&gt;</span>   </span><br><span class="line">        <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.aliyun.com/nexus/content/groups/public<span class="tag">&lt;/<span class="name">url</span>&gt;</span>  </span><br><span class="line"> <span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-IDEA-MAVEN"><a href="#2-IDEA-MAVEN" class="headerlink" title="2 IDEA - MAVEN"></a>2 IDEA - MAVEN</h3><h4 id="2-1-idea关联maven"><a href="#2-1-idea关联maven" class="headerlink" title="2.1 idea关联maven"></a>2.1 idea关联maven</h4><blockquote>
<ul>
<li><p>打开任何一个idea项目</p>
</li>
<li><p>file - setting fornew project</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091647641.png" alt="image-20221124105909608"></p>
</li>
</ul>
</blockquote>
<p>找到build</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091647643.png" alt="image-20221124110058057"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091647650.png" alt="image-20221124110417317"></p>
<h4 id="2-2-创建java项目"><a href="#2-2-创建java项目" class="headerlink" title="2.2 创建java项目"></a>2.2 创建java项目</h4><ol>
<li>找到maven选项</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091647647.png" alt="image-20221124110734298"></p>
<ol start="2">
<li>设置信息</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091647655.png" alt="image-20221124111014498"></p>
<h4 id="2-3-java项目结构"><a href="#2-3-java项目结构" class="headerlink" title="2.3 java项目结构"></a>2.3 java项目结构</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091647145.png" alt="image-20221124111329959"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">|-项目名</span><br><span class="line">|---src</span><br><span class="line">|------main</span><br><span class="line">|---------java</span><br><span class="line">|---------resources</span><br><span class="line">|------test</span><br><span class="line">|----------java</span><br><span class="line">|---pom.xml</span><br></pre></td></tr></table></figure>

<h4 id="2-4-pom"><a href="#2-4-pom" class="headerlink" title="2.4 pom"></a>2.4 pom</h4><blockquote>
<p>pom 项目对象模型,这是一个xml文件(ps: xml文件一种文件格式,类似HTML是标签形式的)</p>
<p>pom文件内定义</p>
<ul>
<li>项目信息<ul>
<li>项目名</li>
<li>组织名</li>
<li>版本</li>
<li>打包方式<ul>
<li>默认是jar , 普通java项目</li>
<li>可以指定为war, 即web项目</li>
</ul>
</li>
</ul>
</li>
<li>项目依赖<ul>
<li>依赖就是jar包</li>
<li>是以坐标的形式展现</li>
</ul>
</li>
<li>构建工具</li>
</ul>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--  项目信息--&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.qf<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>day45_java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 打包方式 ,默认是jar,如果是javaweb项目,打包方式是war--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 依赖 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 具体的jar包依赖坐标 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;dependency&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;groupId&gt;&lt;/groupId&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;artifactId&gt;&lt;/artifactId&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;version&gt;&lt;/version&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;/dependency&gt;--&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 构建信息 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    &lt;build&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;plugins&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;plugin&gt;...&lt;/plugin&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;/plugins&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    &lt;/build&gt;--&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="2-5-导入依赖"><a href="#2-5-导入依赖" class="headerlink" title="2.5 导入依赖"></a>2.5 导入依赖</h4><h5 id="2-5-1-查找依赖"><a href="#2-5-1-查找依赖" class="headerlink" title="2.5.1 查找依赖"></a>2.5.1 查找依赖</h5><blockquote>
<p>官方提供一中央仓库网站,网站中有所有jar包的依赖信息,就可以搜索依赖</p>
<p><a target="_blank" rel="noopener" href="https://mvnrepository.com/">Maven Repository: Search&#x2F;Browse&#x2F;Explore (mvnrepository.com)</a></p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091647192.png" alt="image-20221124113200709"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091647246.png" alt="image-20221124113256197"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091647320.png" alt="image-20221124113336192"></p>
<h5 id="2-5-2-使用依赖"><a href="#2-5-2-使用依赖" class="headerlink" title="2.5.2 使用依赖"></a>2.5.2 使用依赖</h5><blockquote>
<p>将复制的依赖坐标,粘贴到pom文件</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 依赖,就是jar包 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.47<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091647680.png" alt="image-20221124113618648"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091647752.png" alt="image-20221124113709676"></p>
<p>还可以进入仓库中去查看,是否下载成功</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091647807.png" alt="image-20221124113901244"></p>
<h5 id="2-6-测试"><a href="#2-6-测试" class="headerlink" title="2.6 测试"></a>2.6 测试</h5><p>使用之前jdbc测试</p>
<blockquote>
<ul>
<li>使用maven创建java项目</li>
<li>导入依赖<ul>
<li>mysql驱动</li>
<li>druid.jar包</li>
</ul>
</li>
<li>编码<ul>
<li>java文件夹写java代码</li>
<li>resources 文件夹写配置文件</li>
</ul>
</li>
<li>测试</li>
</ul>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091647861.png" alt="image-20221124151111639"></p>
<h3 id="3-JavaWeb"><a href="#3-JavaWeb" class="headerlink" title="3 JavaWeb"></a>3 JavaWeb</h3><blockquote>
<p>JavaWeb开发就是</p>
<ul>
<li>前端页面发请求</li>
<li>后台服务器接收请求,将请求中数据发送到数据库</li>
<li>数据库处理CRUD</li>
<li>数据库处理完再响应给服务器</li>
<li>服务器根据结果再响应数据到浏览器</li>
</ul>
</blockquote>
<hr>
<blockquote>
<p> 项目开发的架构</p>
<ul>
<li>C&#x2F;S  (Client &#x2F; Server)</li>
<li>必须要开发客户端软件(QQ,微信,钉钉,LOL…)</li>
<li>优点: 性能好(画质,交互,流程度),安全度高</li>
<li>一般用于游戏&#x2F;音视频软件</li>
<li>缺点: 软件更新维护升级很麻烦</li>
<li><strong>B&#x2F;S  (Browser &#x2F; Server)</strong></li>
<li>只需要一个浏览器</li>
<li>一般用于功能不复杂,比如微博&#x2F;淘宝&#x2F;京东</li>
<li>优点: 更新维护只需重启服务器</li>
<li>缺点: 图形显示,流畅度,安全性相对比较低</li>
<li><strong>目前我们学习Java是为了开发B&#x2F;S架构的项目</strong></li>
</ul>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091647911.png" alt="image-20221124155854858"></p>
<h3 id="4-服务器"><a href="#4-服务器" class="headerlink" title="4 服务器"></a>4 服务器</h3><blockquote>
<p>服务器也称为web服务器,是运行及发布<code>web应用</code>的容器.</p>
<p>只有将开发的项目放到服务器中,才可以通过http请求访问到数据.</p>
</blockquote>
<blockquote>
<p>常见的web服务器</p>
<ul>
<li>Tomcat 主流,免费,并发量500左右</li>
<li>Jetty  效率会比Tomcat高,淘宝用的就这个</li>
<li>Resin  新浪在用</li>
<li>WebLogic</li>
<li>Apache </li>
<li>…</li>
</ul>
</blockquote>
<h3 id="5-Tomcat"><a href="#5-Tomcat" class="headerlink" title="5 Tomcat"></a>5 Tomcat</h3><blockquote>
<p>Tomcat 服务器是一个<code>免费的开放源代码</code>的Web 应用服务器，属于<code>轻量级</code>应用<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E6%9C%8D%E5%8A%A1%E5%99%A8/100571?fromModule=lemma_inlink">服务器</a>，在<code>中小型系统</code>和<code>并发访问用户不是很多</code>的场合下被普遍使用，是开发和调试JSP 程序的首选。</p>
</blockquote>
<h4 id="5-1-下载"><a href="#5-1-下载" class="headerlink" title="5.1 下载"></a>5.1 下载</h4><blockquote>
<p>官网 <a target="_blank" rel="noopener" href="https://tomcat.apache.org/">Apache Tomcat® - Welcome!</a></p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091647951.png" alt="image-20221124161014616"></p>
<h4 id="5-2-安装"><a href="#5-2-安装" class="headerlink" title="5.2 安装"></a>5.2 安装</h4><blockquote>
<p>解压即可使用,特别注意,解压路径中不要有中文路径!</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091647301.png" alt="image-20221124161312697"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">bin      放tomcat运行命令</span><br><span class="line">conf     配置文件</span><br><span class="line">lib      运行所需库,jar包等</span><br><span class="line">logs     运行日志</span><br><span class="line">temp     临时文件</span><br><span class="line">webapps 【重要】存放web项目的路径</span><br><span class="line">work     运行时产生文件此处</span><br></pre></td></tr></table></figure>

<h4 id="5-3-启动服务器"><a href="#5-3-启动服务器" class="headerlink" title="5.3 启动服务器"></a>5.3 启动服务器</h4><p>进入安装路径的bin目录下,执行(双击)startup.bat命令</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091647362.png" alt="image-20221124162030294"></p>
<h4 id="5-4-访问服务器"><a href="#5-4-访问服务器" class="headerlink" title="5.4 访问服务器"></a>5.4 访问服务器</h4><blockquote>
<p>服务器是在本地,所以访问ip是localhost,tomcat端口默认是8080,即完整服务器路径</p>
<p><a target="_blank" rel="noopener" href="http://localhost:8080/index.jsp">http://localhost:8080/index.jsp</a></p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091647436.png" alt="image-20221124162304974"></p>
<h4 id="5-5-关闭服务器"><a href="#5-5-关闭服务器" class="headerlink" title="5.5 关闭服务器"></a>5.5 关闭服务器</h4><blockquote>
<p>只需要关闭服务器黑窗口</p>
</blockquote>
<h4 id="5-6-特别说明"><a href="#5-6-特别说明" class="headerlink" title="5.6 特别说明"></a>5.6 特别说明</h4><blockquote>
<p>现在进行的操作,只是证明tomcat装好可以使用,</p>
<p>等后续需要idea配置tomcat进行启动,访问,停止</p>
</blockquote>
<h3 id="6-IDEA-Tomcat"><a href="#6-IDEA-Tomcat" class="headerlink" title="6 IDEA - Tomcat"></a>6 IDEA - Tomcat</h3><blockquote>
<p>IDEA关联Tomcat是要为<code>每个web项目</code>关联服务器</p>
</blockquote>
<h4 id="6-1-maven创建javaweb项目"><a href="#6-1-maven创建javaweb项目" class="headerlink" title="6.1 maven创建javaweb项目"></a>6.1 maven创建javaweb项目</h4><h4 id="6-1-1-使用模板创建【推荐】"><a href="#6-1-1-使用模板创建【推荐】" class="headerlink" title="6.1.1 使用模板创建【推荐】"></a>6.1.1 使用模板创建【推荐】</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091647472.png" alt="image-20221124163159728"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091647627.png" alt="image-20221124163256132"></p>
<h4 id="模板创建并不完整"><a href="#模板创建并不完整" class="headerlink" title="模板创建并不完整"></a>模板创建并不完整</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091647005.png" alt="image-20221124164022334"></p>
<h4 id="手动补全目录"><a href="#手动补全目录" class="headerlink" title="手动补全目录"></a>手动补全目录</h4><p><strong>补上src&#x2F;test目录</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091647089.png" alt="image-20221124164149737"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091647284.png" alt="image-20221124164200066"></p>
<p><strong>补上src&#x2F;main&#x2F;java目录</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091647371.png" alt="image-20221124164304380"></p>
<p><strong>补上src&#x2F;main&#x2F;resources目录</strong></p>
<p>图略</p>
<p>完整结构如下</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091647435.png" alt="image-20221124164424614"></p>
<h4 id="6-1-2-不使用模板创建javaweb项目"><a href="#6-1-2-不使用模板创建javaweb项目" class="headerlink" title="6.1.2 不使用模板创建javaweb项目"></a>6.1.2 不使用模板创建javaweb项目</h4><p>像创建java项目一样,创建javaweb项目</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091647586.png" alt="image-20221124164851765"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091647655.png" alt="image-20221124164938024"></p>
<p><strong>这样创建出的是java项目,改造成javaweb项目</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091647751.png" alt="image-20221124165117145"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091647859.png" alt="image-20221124165203477"></p>
<p>但是这样创建的web文件夹位置跟maven规范的不一致</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091647001.png" alt="image-20221124165543862"></p>
<p>这样不推荐</p>
<h4 id="6-1-3-不使用模板-也不使用框架支持"><a href="#6-1-3-不使用模板-也不使用框架支持" class="headerlink" title="6.1.3 不使用模板,也不使用框架支持"></a>6.1.3 不使用模板,也不使用框架支持</h4><p>这种方式是纯手动改造java项目为javaweb项目</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091647120.png" alt="image-20221124165808463"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091647158.png" alt="image-20221124165845936"></p>
<hr>
<hr>
<hr>
<hr>
<p>手动创建webapp目录,并在在webapp目录下创建WEB-INF目录,并在其下创建web.xml文件,内容如下</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">version</span>=<span class="string">&quot;3.1&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>最后,在webapp目录下,创建一个index.jsp文件(jsp文件,理解为html)</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091647242.png" alt="image-20221124170408237"></p>
<hr>
<hr>
<hr>
<hr>
<p>在项目结构(project structure)中配置该webapp路径</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091647321.png" alt="image-20221124170638574"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091647526.png" alt="image-20221124171006193"></p>
<h4 id="6-2-web项目设置Tomcat-部署项目"><a href="#6-2-web项目设置Tomcat-部署项目" class="headerlink" title="6.2 web项目设置Tomcat(部署项目)"></a>6.2 web项目设置Tomcat(部署项目)</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091647627.png" alt="image-20221124171433551"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091647681.png" alt="image-20221124171633043"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091647720.png" alt="image-20221124171901517"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091647775.png" alt="image-20221124171913608"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091647091.png" alt="image-20221124171958130"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091647138.png" alt="image-20221124172057168"></p>
<h2 id="day15"><a href="#day15" class="headerlink" title="day15"></a>day15</h2><h3 id="今日内容-4"><a href="#今日内容-4" class="headerlink" title="今日内容"></a>今日内容</h3><blockquote>
<p>0 复习昨日<br>1 Servlet基础<br>1.1 Servlet介绍<br>1.2 第一个Servlet<br>1.3 流程分析<br>1.4 使用细节<br>1.5 映射细节<br>1.6 生命周期<br>2 HttpServlet<br>2.1 HTTP请求、响应、状态码<br>2.2 GET和POST的区别<br>2.3 HttpServlet</p>
</blockquote>
<h3 id="0-复习昨日-4"><a href="#0-复习昨日-4" class="headerlink" title="0 复习昨日"></a>0 复习昨日</h3><blockquote>
<p>1 maven创建-java项目结构<br>2 maven创建-javaweb项目结构<br>3 tomcat的端口 8080<br>ip: 地址,通过地址找到这台电脑&#x2F;服务器<br>端口: 应用程序的编号,通过端口找到app</p>
<p>4 tomcat服务器部署项目启动后,<code>访问路径</code>是?<br>协议:&#x2F;&#x2F;ip:端口&#x2F;项目名&#x2F;页面<br><a target="_blank" rel="noopener" href="http://localhost:8080/day45_web/index.html">http://localhost:8080/day45_web/index.html</a><br><a target="_blank" rel="noopener" href="http://localhost:8080/index.html">http://localhost:8080/index.html</a></p>
<p>5 addres localhost:8080 is already in use 什么意思<br>端口占用,解决方案:<br>    1) <code>端口查杀</code><br>      netstat -ano | findstr 8080<br>        taskkill &#x2F;f &#x2F;pid  进程号<br>    2) <code>改端口号</code><br>     (我们自己设计端口,最好是8000以上<br>    3) artifact 工件&#x2F;项目<br>      dependencies 依赖,复数<br>      dependency   依赖,单数</p>
</blockquote>
<h3 id="1-Servlet"><a href="#1-Servlet" class="headerlink" title="1 Servlet"></a>1 Servlet</h3><h4 id="1-1-介绍-1"><a href="#1-1-介绍-1" class="headerlink" title="1.1 介绍"></a>1.1 介绍</h4><blockquote>
<p>javaweb开发,就是需要服务器<code>接收前端发送的请求</code>,以及请求中的数据,经过处理(jdbc操作),然后向浏览器<code>做出响应</code>.</p>
<hr>
<p>我们要想在服务器中写java代码来接收请求,做出响应,我们的java代码就得遵循tomcat开发规范</p>
<hr>
<p>因此Tomcat提供了开发的规范,就是servlet.</p>
<p>Servlet就是运行在服务器上的程序,可交互式的接收服务器的请求,并可以做出响应</p>
<hr>
<p>总结Servlet的作用:</p>
<ul>
<li>运行在服务器,是一个服务器端的程序</li>
<li>接收客户端请求,向客户端做出响应</li>
<li>动态网页(jsp)</li>
</ul>
</blockquote>
<h3 id="1-2-第一个Servlet程序"><a href="#1-2-第一个Servlet程序" class="headerlink" title="1.2 第一个Servlet程序"></a>1.2 第一个Servlet程序</h3><h4 id="1-2-1-创建web项目"><a href="#1-2-1-创建web项目" class="headerlink" title="1.2.1 创建web项目"></a>1.2.1 创建web项目</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091648619.png" alt="image-20221125095804303"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091648622.png" alt="image-20221125095900779"></p>
<p>补全目录结构</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091648617.png" alt="image-20221125100044388"></p>
<h4 id="1-2-2-pom依赖"><a href="#1-2-2-pom依赖" class="headerlink" title="1.2.2 pom依赖"></a>1.2.2 pom依赖</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.qf<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>day46_servlet<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- java项目打包方式是jar包 --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- web项目打包方式是war包 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>war<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 引入servlet依赖 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 引入jsp依赖 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet.jsp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet.jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="1-2-3-编写Servlet"><a href="#1-2-3-编写Servlet" class="headerlink" title="1.2.3 编写Servlet"></a>1.2.3 编写Servlet</h4><blockquote>
<ul>
<li>实现javax.servlet.Servlet接口</li>
<li>重写方法</li>
<li>在核心方法service()里面完成接收请求,做出响应</li>
</ul>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qf.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * --- 天道酬勤 ---</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> QiuShiju</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@desc</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyServlet1</span> <span class="keyword">implements</span> <span class="title class_">Servlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(ServletConfig config)</span> <span class="keyword">throws</span> ServletException &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> ServletConfig <span class="title function_">getServletConfig</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 核心方法,服务,在这个方法中可以完成接收请求,做出响应</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> req 用来处理请求的对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> res 用来处理响应的对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> ServletException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(ServletRequest req, ServletResponse res)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">// 通过请求对象,可以获得请求的ip</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">ip</span> <span class="operator">=</span> req.getRemoteAddr( );</span><br><span class="line">        System.out.println(<span class="string">&quot;ip = &quot;</span>+ip );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 响应,</span></span><br><span class="line">        <span class="comment">// res.getWriter()获得字符输出流</span></span><br><span class="line">        <span class="comment">// .writer() 写出到浏览器字符(中文可能乱码)</span></span><br><span class="line">        res.getWriter().write(<span class="string">&quot;i&#x27;m Response,Hello&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getServletInfo</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="1-2-4-配置Servlet"><a href="#1-2-4-配置Servlet" class="headerlink" title="1.2.4 配置Servlet"></a>1.2.4 配置Servlet</h4><blockquote>
<p>因为服务器中会有很多servlet,浏览器发请求如何确定访问哪一个servlet?</p>
<p>此时就需要做一个映射: 请求路径和servlet类的映射,即发出的请求由哪个servlet类来处理</p>
<hr>
<p>配置需要写在webapp&#x2F;WEB-INF&#x2F;web.xml中</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">version</span>=<span class="string">&quot;3.1&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 在这里写路径和servlet映射 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- servlet的名字,任意 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>servlet1<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- servlet的路径 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.qf.servlet.MyServlet1<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 请求路径映射 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 该路径映射的servlet名 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>servlet1<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 请求路径的模板,一定要/开头 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/s1<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>浏览器发出请求,经过web.xml中配置的信息,</p>
<ul>
<li>匹配url-pattern&gt;&#x2F;s1&lt;&#x2F;url-pattern,有该路径则正常访问,无该路径报404</li>
<li>通过servlet-name找到servlet类</li>
<li>再通过servlet-class,找到servlet类路径</li>
<li>该servlet就可以执行service()</li>
</ul>
</blockquote>
<h4 id="1-2-5-部署项目"><a href="#1-2-5-部署项目" class="headerlink" title="1.2.5 部署项目"></a>1.2.5 部署项目</h4><blockquote>
<p>web项目已经开发完毕,将项目部署到服务器Tomcat</p>
</blockquote>
<p><strong>配置Tomcat</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091648626.png" alt="image-20221125103951611"></p>
<p><strong>部署项目</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091648624.png" alt="image-20221125104134483"></p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091648632.png" alt="image-20221125104144365" style="zoom:50%;" />

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091648067.png" alt="image-20221125104255911"></p>
<p><strong>启动</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091648157.png" alt="image-20221125104500192"></p>
<p><strong>发出请求</strong></p>
<p><a target="_blank" rel="noopener" href="http://localhost:8080/day46/s1">http://localhost:8080/day46/s1</a></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091649504.png" alt="image-20221125104906466"></p>
<h2 id="day16"><a href="#day16" class="headerlink" title="day16"></a>day16</h2><h3 id="今日内容-5"><a href="#今日内容-5" class="headerlink" title="今日内容"></a>今日内容</h3><blockquote>
<p>0 复习昨日</p>
<p>1 接收请求</p>
<p>2 处理响应</p>
</blockquote>
<h3 id="0-复习昨日-5"><a href="#0-复习昨日-5" class="headerlink" title="0 复习昨日"></a>0 复习昨日</h3><blockquote>
<p>HTTP请求中</p>
<ul>
<li>请求行<ul>
<li>请求方法,请求路径</li>
</ul>
</li>
<li>请求头<ul>
<li>页面信息</li>
</ul>
</li>
<li>请求正文<ul>
<li>请求的数据</li>
</ul>
</li>
</ul>
<p>HTTP响应中</p>
<ul>
<li>响应行<ul>
<li>状态码 信息</li>
</ul>
</li>
<li>响应头<ul>
<li>页面信息</li>
</ul>
</li>
<li>响应正文<ul>
<li>要给浏览器的内容</li>
</ul>
</li>
</ul>
</blockquote>
<h3 id="1-接收请求"><a href="#1-接收请求" class="headerlink" title="1 接收请求"></a>1 接收请求</h3><blockquote>
<p>浏览器发出请求,经过web.xml映射匹配,找到Servlet对应的方法(doGet&#x2F;doPost),接收请求数据,可以接收请求中的请求行,请求头,请求正文</p>
<ul>
<li>浏览器发出请求<ul>
<li>a&#x2F;form&#x2F;ajax</li>
</ul>
</li>
<li>经过web.xml映射匹配<ul>
<li>web.xml(8行代码)</li>
</ul>
</li>
<li>doGet&#x2F;doPost<ul>
<li>前端是get请求,就重写doGet</li>
<li>前端是post请求,就重写doPost</li>
</ul>
</li>
<li>如何接收数据<ul>
<li>通过HttpServletRequest对象处理</li>
</ul>
</li>
</ul>
</blockquote>
<p>需求: html页面中写一个表单,发送请求,后台服务器接收所有请求数据</p>
<h4 id="1-1-编写页面"><a href="#1-1-编写页面" class="headerlink" title="1.1 编写页面"></a>1.1 编写页面</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    表单提交数据,一定要有name属性,</span></span><br><span class="line"><span class="comment">    后台服务器,就是name获得值</span></span><br><span class="line"><span class="comment">    ------------------------</span></span><br><span class="line"><span class="comment">    点击提交,会以method指定的请求方式,将数据发送到action指定后台服务器</span></span><br><span class="line"><span class="comment">    action路径,建议是 /项目名/路径</span></span><br><span class="line"><span class="comment"> --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/day47/req&quot;</span> <span class="attr">method</span>=<span class="string">&quot;get&quot;</span>&gt;</span></span><br><span class="line">    用户名 <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    密码 <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    性别 <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>&gt;</span>男</span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">value</span>=<span class="string">&quot;2&quot;</span>&gt;</span>女<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    技能<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;skill&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Java&quot;</span>&gt;</span>Java</span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;skill&quot;</span> <span class="attr">value</span>=<span class="string">&quot;JavaScript&quot;</span>&gt;</span>JavaScript</span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;skill&quot;</span> <span class="attr">value</span>=<span class="string">&quot;SSM&quot;</span>&gt;</span>SSM<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    学历<span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span>=<span class="string">&quot;xueli&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;gaozhong&quot;</span>&gt;</span>高中<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;dazhuan&quot;</span>&gt;</span>大专<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;benke&quot;</span>&gt;</span>本科<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="1-2-编写Servlet"><a href="#1-2-编写Servlet" class="headerlink" title="1.2 编写Servlet"></a>1.2 编写Servlet</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qf.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.Enumeration;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * --- 天道酬勤 ---</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> QiuShiju</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@desc</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> req 处理请求的对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> resp 处理响应的对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> ServletException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">// 请求方法</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">method</span> <span class="operator">=</span> req.getMethod( );</span><br><span class="line">        System.out.println(<span class="string">&quot;method = &quot;</span>+method);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获得请求路径</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">requestURI</span> <span class="operator">=</span> req.getRequestURI( );<span class="comment">// 资源标识符</span></span><br><span class="line">        <span class="type">StringBuffer</span> <span class="variable">requestURL</span> <span class="operator">=</span> req.getRequestURL( ); <span class="comment">// 资源定位符</span></span><br><span class="line">        System.out.println(<span class="string">&quot;requestURI = &quot;</span> + requestURI);</span><br><span class="line">        System.out.println(<span class="string">&quot;requestURL = &quot;</span> + requestURL);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;--------------------------------------&quot;</span> );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 接收请求头【了解】</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">host</span> <span class="operator">=</span> req.getHeader(<span class="string">&quot;Host&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;host = &quot;</span> + host);</span><br><span class="line"></span><br><span class="line">        Enumeration&lt;String&gt; keys = req.getHeaderNames( );</span><br><span class="line">        <span class="keyword">while</span> (keys.hasMoreElements()) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> keys.nextElement( );</span><br><span class="line">            <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> req.getHeader(key);</span><br><span class="line">            System.out.println(key + <span class="string">&quot; : &quot;</span> + value);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;--------------------------------------&quot;</span> );</span><br><span class="line">        <span class="comment">// 接收请求数据【重点】</span></span><br><span class="line">        <span class="comment">// 接收请求数据,无论单选,还是下拉框等都是getParameter(name);</span></span><br><span class="line">        <span class="comment">// name是前端标签name属性的值</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">sex</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;sex&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">xueli</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;xueli&quot;</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;username = &quot;</span> + username);</span><br><span class="line">        System.out.println(<span class="string">&quot;password = &quot;</span> + password);</span><br><span class="line">        System.out.println(<span class="string">&quot;sex = &quot;</span> + sex);</span><br><span class="line">        System.out.println(<span class="string">&quot;xueli = &quot;</span> + xueli);</span><br><span class="line">        <span class="comment">// 复选框</span></span><br><span class="line">        <span class="comment">// 如果一个没选,数组没有创建,是null,不是长度为0</span></span><br><span class="line">        String[] skills = req.getParameterValues(<span class="string">&quot;skill&quot;</span>);</span><br><span class="line">        <span class="comment">// 空指针异常,就是使用空对象调用属性和方法</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; skills != <span class="literal">null</span> &amp;&amp; i &lt; skills.length; i++) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;skill[&quot;</span>+(i+<span class="number">1</span>)+<span class="string">&quot;] = &quot;</span> + skills[i]);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="1-3-配置web-xml"><a href="#1-3-配置web-xml" class="headerlink" title="1.3 配置web.xml"></a>1.3 配置web.xml</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">version</span>=<span class="string">&quot;3.1&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>index.html<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>servlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.qf.servlet.MyServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>servlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--此处不需要写项目名,只需要写请求路径--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/req<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="1-4-部署项目"><a href="#1-4-部署项目" class="headerlink" title="1.4 部署项目"></a>1.4 部署项目</h4><h4 id="1-5-启动测试"><a href="#1-5-启动测试" class="headerlink" title="1.5 启动测试"></a>1.5 启动测试</h4><h3 id="2-做出响应"><a href="#2-做出响应" class="headerlink" title="2 做出响应"></a>2 做出响应</h3><blockquote>
<p>做出响应是通过HttpServletResponse对象</p>
<ul>
<li>响应行<ul>
<li>状态码</li>
</ul>
</li>
<li>响应头<ul>
<li>响应信息,其中有一个cookie后续会用到,以及编码格式</li>
</ul>
</li>
<li>响应正文<ul>
<li>向浏览器展现的内容</li>
</ul>
</li>
</ul>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 响应状态码</span></span><br><span class="line"><span class="comment">// 200 是成功, 302 重定向 404 资源未找到 500 服务器错误</span></span><br><span class="line"><span class="comment">// 一般不用设置,为自动响应</span></span><br><span class="line"><span class="comment">// resp.setStatus(200);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置响应头</span></span><br><span class="line"><span class="comment">// resp.setHeader(&quot;key&quot;,&quot;value&quot;);</span></span><br><span class="line"><span class="comment">// 指定浏览器如何解析响应的内容,解决响应乱码</span></span><br><span class="line">resp.setContentType(<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 向浏览器响应内容(响应正文)</span></span><br><span class="line"><span class="type">PrintWriter</span> <span class="variable">out</span> <span class="operator">=</span> resp.getWriter( );</span><br><span class="line">out.write(<span class="string">&quot;&lt;html&gt;&quot;</span>);</span><br><span class="line">out.write(<span class="string">&quot;     &lt;head&gt;&quot;</span>);</span><br><span class="line">out.write(<span class="string">&quot;         &lt;title&gt;这是响应&lt;/title&gt;&quot;</span>);</span><br><span class="line">out.write(<span class="string">&quot;     &lt;/head&gt;&quot;</span>);</span><br><span class="line">out.write(<span class="string">&quot;     &lt;body&gt;&quot;</span>);</span><br><span class="line">out.write(<span class="string">&quot;         &lt;div style=&#x27;background-color:red;width:500px;height:500px;font-size:50px&#x27;&gt;&quot;</span>);</span><br><span class="line">out.write(<span class="string">&quot;         这是响应,欢迎&quot;</span>+username);</span><br><span class="line">out.write(<span class="string">&quot;         &lt;/div&gt;&quot;</span>);</span><br><span class="line">out.write(<span class="string">&quot;     &lt;/body&gt;&quot;</span>);</span><br><span class="line">out.write(<span class="string">&quot;&lt;/html&gt;&quot;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="3-乱码解决"><a href="#3-乱码解决" class="headerlink" title="3 乱码解决"></a>3 乱码解决</h3><blockquote>
<p>请求乱码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">req.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>响应乱码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">resp.setContentType(<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="day17"><a href="#day17" class="headerlink" title="day17"></a>day17</h2><h3 id="今日内容-6"><a href="#今日内容-6" class="headerlink" title="今日内容"></a>今日内容</h3><blockquote>
<p>周一<br>0 复习上周<br>1 本周计划<br>2 MVC和三层架构<br>3 Login案例<br>4 请求转发<br>5 重定向</p>
</blockquote>
<h3 id="0-复习昨日-6"><a href="#0-复习昨日-6" class="headerlink" title="0 复习昨日"></a>0 复习昨日</h3><blockquote>
<p>1 jdbc五大步骤<br>    1) 注册驱动(反射)<br>    2) 获得连接<br>    3) 获得执行sql对象<br>    4) 执行SQL<br>    5) 关流<br>    2 什么是SQL注入<br>    通过SQL关键词,在执行SQL时出现不正常的情况<br>    3 PreparedStatement怎么使用,有什么特点<br>    怎么使用? 之前拼接sql参数的地方,现在使用?占位,经过预处理后,再给?处赋值<br>    有什么特点? 1) 执行时不需要再给executeQuery()传参数<br>                2) 可以避免SQL注入的问题<br>                3) 向?赋值的时候,自动给字符串拼接单引号<br>                   mybatis #  PreparedStatement ,字符串’’<br>                                   $  Statement<br>    4 什么是servlet<br>    servlet是运行在服务上的程序<br>    servlet主要功能是: 接收请求,做出响应</p>
<p>5 Http请求方式有哪些<br>    get<br>    post<br>6 Http请求报文都有哪些内容<br>    请求头,请求行,请求正文(数据)</p>
<p>针对不同的请求方式,后台有哪些请求方法?<br>    doGet()<br>    doPost()<br>7 后台接收请求内容的方法有哪些<br>    req.getMethod()<br>    req.getRequestURL()<br>    req.getRequestURI()<br>    req.getParameter(name属性的值);&#x2F;&#x2F;获得请求数据<br>    req.getParameterValues();</p>
<p>8 前端如何发送数据<br>    form表单,标签得设置name属性</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/day48/login&quot;</span> <span class="attr">method</span>=<span class="string">&quot;get&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>​	ajax<br>​	a标签	</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/day48/login?username=root&amp;pwd=555&quot;</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>9 前端后后台之间如何映射?<br>    通过web.xml配置8行代码</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>servlet1<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>c.f.s.MyServlet1<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>servlet1<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">url-parttern</span>&gt;</span>*.do<span class="tag">&lt;/<span class="name">url-parttern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="1-MVC和三层架构"><a href="#1-MVC和三层架构" class="headerlink" title="1 MVC和三层架构"></a>1 MVC和三层架构</h3><blockquote>
<p>通过Login案例,一个LoginServlet中</p>
<ul>
<li><p>接收请求</p>
</li>
<li><p>完成JDBC操作</p>
</li>
<li><p>根据结果做出响应</p>
<p>以上这种开发模式,不好,不便于后期迭代维护</p>
</li>
</ul>
<hr>
<p>在开发中有一个思想:”分而治之”</p>
</blockquote>
<blockquote>
<p>MVC思想</p>
<ul>
<li>M model&#x2F;模型<ul>
<li>模型主要是指javabean,有一些java类</li>
<li>比如封装数据的类,User类</li>
<li>比如其他功能类,UserService,UserDao</li>
</ul>
</li>
<li>V view&#x2F;视图<ul>
<li>视图就是页面,</li>
<li>比如JSP&#x2F;HTML</li>
<li>为了展现数据</li>
</ul>
</li>
<li>C controller&#x2F;控制器<ul>
<li>控制器控制整个流程的走向</li>
<li>控制页面跳转</li>
</ul>
</li>
</ul>
</blockquote>
<blockquote>
<p>三层架构: 是指开发中编码时项目结构,主要是指将不同的功能代码再细分</p>
<ul>
<li>控制层<ul>
<li>servlet主要做控制</li>
<li>控制页面跳转</li>
</ul>
</li>
<li>业务层<ul>
<li>service层</li>
<li>主要处理业务逻辑</li>
</ul>
</li>
<li>数据访问层<ul>
<li>Dao层</li>
<li>主要与数据库交互</li>
</ul>
</li>
</ul>
</blockquote>
<h3 id="2-Login案例"><a href="#2-Login案例" class="headerlink" title="2 Login案例"></a>2 Login案例</h3><blockquote>
<p>需求: HTML页面中输入框用户名和密码,登录</p>
<ul>
<li>登录成功给出提供,欢迎</li>
<li>登录不成功,给出提示,用户名或密码错误</li>
</ul>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091652340.png"></p>
<h4 id="2-1-搭建环境"><a href="#2-1-搭建环境" class="headerlink" title="2.1 搭建环境"></a>2.1 搭建环境</h4><p>数据库环境</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `tb_user` (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;用户编号&#x27;</span>,</span><br><span class="line">  `username` <span class="type">varchar</span>(<span class="number">10</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;用户名&#x27;</span>,</span><br><span class="line">  `password` <span class="type">varchar</span>(<span class="number">10</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;密码&#x27;</span>,</span><br><span class="line">  `phone` <span class="type">varchar</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;手机号&#x27;</span>,</span><br><span class="line">  `createTime` <span class="type">date</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;注册时间&#x27;</span>,</span><br><span class="line">  `money` <span class="keyword">double</span>(<span class="number">10</span>,<span class="number">2</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;账户余额&#x27;</span>,</span><br><span class="line">  `sex` <span class="type">int</span>(<span class="number">1</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;性别 1男2女&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB AUTO_INCREMENT<span class="operator">=</span><span class="number">24</span> <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8;</span><br></pre></td></tr></table></figure>

<p>项目环境</p>
<ul>
<li><p>创建maven-web项目</p>
</li>
<li><p>补全项目结构</p>
</li>
<li><p>导入依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- servlet --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">&lt;!-- servlet-jsp --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet.jsp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet.jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">&lt;!-- mysql驱动 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.47<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">&lt;!-- druid连接池 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>项目必备的java包和类</p>
<ul>
<li>工具包和工具类</li>
<li>实体类</li>
<li>包结构</li>
</ul>
</li>
</ul>
<h4 id="2-2-页面"><a href="#2-2-页面" class="headerlink" title="2.2 页面"></a>2.2 页面</h4><p>登录页面</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/day48/login&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">        用户名<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        密码<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;登录&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="2-3-UserServlet"><a href="#2-3-UserServlet" class="headerlink" title="2.3 UserServlet"></a>2.3 UserServlet</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qf.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.qf.model.User;</span><br><span class="line"><span class="keyword">import</span> com.qf.service.UserService;</span><br><span class="line"><span class="keyword">import</span> com.qf.service.impl.UserServiceImpl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * --- 天道酬勤 ---</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> QiuShiju</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@desc</span> 控制层</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserLoginServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">// 防止乱码</span></span><br><span class="line">        req.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        resp.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1 接收请求</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2 调用业务层处理业务</span></span><br><span class="line">        <span class="type">UserService</span> <span class="variable">userService</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserServiceImpl</span>( );</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userService.login(username, password);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3 根据结果做出响应</span></span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">out</span> <span class="operator">=</span> resp.getWriter( );</span><br><span class="line">        <span class="keyword">if</span> (user != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="comment">// 响应登录成功</span></span><br><span class="line">            <span class="comment">// 应该是跳转一个页面来展现数据,而不是直接作出响应</span></span><br><span class="line">            <span class="comment">// 但是现在还没学,暂时还是使用手动响应</span></span><br><span class="line">            out.write(<span class="string">&quot;&lt;html&gt;&quot;</span>);</span><br><span class="line">            out.write(<span class="string">&quot;&lt;body&gt;&quot;</span>);</span><br><span class="line">            out.write(<span class="string">&quot;&lt;h1&gt;&quot;</span>);</span><br><span class="line">            out.write(<span class="string">&quot;欢迎&quot;</span>+user.getUsername()+<span class="string">&quot;登录&quot;</span>);</span><br><span class="line">            out.write(<span class="string">&quot;&lt;/h1&gt;&quot;</span>);</span><br><span class="line">            out.write(<span class="string">&quot;&lt;/body&gt;&quot;</span>);</span><br><span class="line">            out.write(<span class="string">&quot;&lt;/html&gt;&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 响应登录不成功</span></span><br><span class="line">            out.write(<span class="string">&quot;&lt;html&gt;&quot;</span>);</span><br><span class="line">            out.write(<span class="string">&quot;&lt;body&gt;&quot;</span>);</span><br><span class="line">            out.write(<span class="string">&quot;&lt;h1&gt;&quot;</span>);</span><br><span class="line">            out.write(<span class="string">&quot;用户名或密码错误!&quot;</span>);</span><br><span class="line">            out.write(<span class="string">&quot;&lt;/h1&gt;&quot;</span>);</span><br><span class="line">            out.write(<span class="string">&quot;&lt;/body&gt;&quot;</span>);</span><br><span class="line">            out.write(<span class="string">&quot;&lt;/html&gt;&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-4-UserService"><a href="#2-4-UserService" class="headerlink" title="2.4 UserService"></a>2.4 UserService</h4><blockquote>
<p>一般开发时,会将UserService以及UserDao设计成<code>接口+实现类</code>的形式</p>
<ul>
<li>可以先设计接口,规定项目的功能</li>
<li>接口还可以松耦合,实现多态,易于代码扩展</li>
</ul>
</blockquote>
<p>UserService接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qf.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.qf.model.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * --- 天道酬勤 ---</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> QiuShiju</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@desc</span> 用户的业务层处理</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line"></span><br><span class="line">    User <span class="title function_">login</span><span class="params">(String username, String password)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// List&lt;User&gt; findAll();</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// boolean deleteUserById(int id);</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>UseServiceImpl</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qf.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.qf.dao.UserDao;</span><br><span class="line"><span class="keyword">import</span> com.qf.dao.impl.UserDaoImpl;</span><br><span class="line"><span class="keyword">import</span> com.qf.model.User;</span><br><span class="line"><span class="keyword">import</span> com.qf.service.UserService;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * --- 天道酬勤 ---</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> QiuShiju</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@desc</span> impl包,只用于存放实现类</span></span><br><span class="line"><span class="comment"> * 所有的实现类都应该是接口名+Impl来命名</span></span><br><span class="line"><span class="comment"> * 例如: UserServiceImpl</span></span><br><span class="line"><span class="comment"> * 通过这个名字,要得到两个信息</span></span><br><span class="line"><span class="comment"> * 1) 有一个接口UserService</span></span><br><span class="line"><span class="comment"> * 2) 有一个类UserServiceImpl</span></span><br><span class="line"><span class="comment"> * -----------------------------</span></span><br><span class="line"><span class="comment"> * Service层,是业务层,处理业务逻辑</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">login</span><span class="params">(String username, String password)</span> &#123;</span><br><span class="line">        <span class="comment">// 1 业务逻辑处理</span></span><br><span class="line">        <span class="comment">// 但是今天这个需求没有什么业务,就可以不做</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2 调用数据访问层操作数据库</span></span><br><span class="line">        <span class="type">UserDao</span> <span class="variable">userDao</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserDaoImpl</span>();</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userDao.login(username, password);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 业务层还可以对数据库返回的结果再处理</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-5-UserDao"><a href="#2-5-UserDao" class="headerlink" title="2.5 UserDao"></a>2.5 UserDao</h4><p>UserDao接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qf.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.qf.model.User;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * --- 天道酬勤 ---</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> QiuShiju</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@desc</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line"></span><br><span class="line">    User <span class="title function_">login</span><span class="params">(String username, String password)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>UserDaoImpl实现类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qf.dao.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.qf.dao.UserDao;</span><br><span class="line"><span class="keyword">import</span> com.qf.model.User;</span><br><span class="line"><span class="keyword">import</span> com.qf.util.DBUtil;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * --- 天道酬勤 ---</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> QiuShiju</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@desc</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">login</span><span class="params">(String username, String password)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from tb_user where username = ? and password = ?&quot;</span>;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> DBUtil.selectOne(sql, User.class, username, password);</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>这里使用了DBUtil,不习惯使用的话,也可以使用原始的JDBC自己操作</p>
</blockquote>
<h3 id="3-请求转发"><a href="#3-请求转发" class="headerlink" title="3 请求转发"></a>3 请求转发</h3><blockquote>
<p>请求对象HttpServletRequest</p>
<ul>
<li>请求的转发(将请求转发到其他的servlet)</li>
<li>跳转页面</li>
<li>请求域(存取数据)</li>
</ul>
<hr>
<p>请求转发的总结</p>
<ul>
<li>请求转发地址栏不动</li>
<li>请求转发是服务器行为,是<code>服务器内部</code>动作</li>
<li>浏览器只有一次请求</li>
<li>可以当做请求域,数据可以在Servlet之间共享</li>
</ul>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091652342.png"></p>
<h4 id="3-1-请求转发"><a href="#3-1-请求转发" class="headerlink" title="3.1 请求转发"></a>3.1 请求转发</h4><p>需求: 发出请求&#x2F;a 映射AServlet,利用请求转发,将请求转发到BServlet</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qf.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.RequestDispatcher;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * --- 天道酬勤 ---</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> QiuShiju</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@desc</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;AServlet.doGet...&quot;</span> );</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 请求转发</span></span><br><span class="line">        <span class="comment">// path: 就是要转发的Servlet对应的映射路径</span></span><br><span class="line">        <span class="comment">// RequestDispatcher dispatcher = req.getRequestDispatcher(&quot;/b&quot;);</span></span><br><span class="line">        <span class="comment">// 执行转发</span></span><br><span class="line">        <span class="comment">// dispatcher.forward(req,resp);</span></span><br><span class="line">        <span class="comment">// 路径不需要写成 /项目名/b</span></span><br><span class="line">        req.getRequestDispatcher(<span class="string">&quot;/b&quot;</span>).forward(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qf.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * --- 天道酬勤 ---</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> QiuShiju</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@desc</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;BServlet.doGet...&quot;</span> );</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">version</span>=<span class="string">&quot;3.1&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 映射AServlet --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>aServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.qf.servlet.AServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>aServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/a<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 映射BServlet --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>bServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.qf.servlet.BServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>bServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/b<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="3-2-请求域"><a href="#3-2-请求域" class="headerlink" title="3.2 请求域"></a>3.2 请求域</h4><blockquote>
<p>请求域是指: HttpServletRequest对象相当于是容器,存取数据,可以在请求转发的几个类中共享数据.</p>
<ul>
<li>存储数据 req.setAttribute(key,value)</li>
<li>取出数据 req.getAttribute(key)</li>
</ul>
<hr>
<p>请求域作用以及场景: 在多个Servlet请求转发的时候,用来传递数据</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qf.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.RequestDispatcher;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * --- 天道酬勤 ---</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> QiuShiju</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@desc</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;AServlet.doGet...&quot;</span> );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 请求域</span></span><br><span class="line">        <span class="comment">// 存储数据到请求域</span></span><br><span class="line">        req.setAttribute(<span class="string">&quot;username&quot;</span>,<span class="string">&quot;jack&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 请求转发</span></span><br><span class="line">        <span class="comment">// path: 就是要转发的Servlet对应的映射路径</span></span><br><span class="line">        <span class="comment">// RequestDispatcher dispatcher = req.getRequestDispatcher(&quot;/b&quot;);</span></span><br><span class="line">        <span class="comment">// 执行转发</span></span><br><span class="line">        <span class="comment">// dispatcher.forward(req,resp);</span></span><br><span class="line">        <span class="comment">// 路径不需要写成 /项目名/b</span></span><br><span class="line">        req.getRequestDispatcher(<span class="string">&quot;/b&quot;</span>).forward(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qf.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * --- 天道酬勤 ---</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> QiuShiju</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@desc</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;BServlet.doGet...&quot;</span> );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 请求域中取出数据</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> (String) req.getAttribute(<span class="string">&quot;username&quot;</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;username = &quot;</span> + username);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-3-跳转页面"><a href="#3-3-跳转页面" class="headerlink" title="3.3 跳转页面"></a>3.3 跳转页面</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091652344.png" alt="image-20221128162553136"></p>
<h3 id="4-重定向"><a href="#4-重定向" class="headerlink" title="4 重定向"></a>4 重定向</h3><blockquote>
<p>重定向是HttpServletResponse对象完成一个动作</p>
<ul>
<li>可以将请求重新跳转至其他Servlet</li>
<li>可以跳转页面</li>
</ul>
<hr>
<p>重定向总结:</p>
<ul>
<li>重定向是<code>浏览器动作</code></li>
<li>重定向地址栏会有变化</li>
<li>是发出两次请求</li>
<li>请求域中的数据在重定向后不能共享(因为是两次请求)</li>
</ul>
</blockquote>
<p>需求: </p>
<p>需求: 发出请求&#x2F;a 映射AServlet,利用重定向,将请求<code>重新发送请求</code>到BServlet</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;AServlet.doGet...&quot;</span> );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 请求域</span></span><br><span class="line">        <span class="comment">// 存储数据到请求域</span></span><br><span class="line">        req.setAttribute(<span class="string">&quot;username&quot;</span>,<span class="string">&quot;jack&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 请求转发</span></span><br><span class="line">        <span class="comment">// path: 就是要转发的Servlet对应的映射路径</span></span><br><span class="line">        <span class="comment">// RequestDispatcher dispatcher = req.getRequestDispatcher(&quot;/b&quot;);</span></span><br><span class="line">        <span class="comment">// 执行转发</span></span><br><span class="line">        <span class="comment">// dispatcher.forward(req,resp);</span></span><br><span class="line">        <span class="comment">// 路径不需要写成 /项目名/b,是因为请求转发是服务器动作</span></span><br><span class="line">        <span class="comment">// /b,即从服务器根路径开始访问,服务器的根路径自带项目名</span></span><br><span class="line">        <span class="comment">// http://localhost:8080/day48/b</span></span><br><span class="line">        <span class="comment">//req.getRequestDispatcher(&quot;/b&quot;).forward(req,resp);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 请求转发可以跳转页面</span></span><br><span class="line">        <span class="comment">// req.getRequestDispatcher(&quot;/404.html&quot;).forward(req,resp);</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 重定向</span></span><br><span class="line">        <span class="comment">// 重定向是浏览器行为,发出/b请求,那就是从浏览器的根路径发出请求</span></span><br><span class="line">        <span class="comment">// 浏览器的根路径是端口: http://localhost:8080/b</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">contextPath</span> <span class="operator">=</span> req.getContextPath( ); <span class="comment">// 获得项目名 /day48</span></span><br><span class="line">        System.out.println(<span class="string">&quot;contextPath = &quot;</span> + contextPath);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// resp.sendRedirect(contextPath+&quot;/b&quot;);</span></span><br><span class="line">        resp.sendRedirect(contextPath+<span class="string">&quot;/404.html&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-注解"><a href="#5-注解" class="headerlink" title="5 注解"></a>5 注解</h3><blockquote>
<p>JDK1.5后出现的技术,注解(Annotation),是一种注释,给程序注释然后程序运行给JVM中的java代码看的</p>
<ul>
<li>@Override</li>
</ul>
<hr>
<p>注解文件既不是类也不是接口</p>
</blockquote>
<h4 id="5-1-创建注解文件"><a href="#5-1-创建注解文件" class="headerlink" title="5.1 创建注解文件"></a>5.1 创建注解文件</h4><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091652349.png" alt="image-20221128172739864" style="zoom:67%;" />

<h4 id="5-2-元注解"><a href="#5-2-元注解" class="headerlink" title="5.2 元注解"></a>5.2 元注解</h4><blockquote>
<p>注解的注解就是元注解</p>
</blockquote>
<h4 id="5-2-1-Target"><a href="#5-2-1-Target" class="headerlink" title="5.2.1 @Target"></a>5.2.1 @Target</h4><blockquote>
<p>@Target 目标,用来规定注解能用在什么位置</p>
</blockquote>
<table>
<thead>
<tr>
<th>位置</th>
<th>ElementType</th>
</tr>
</thead>
<tbody><tr>
<td>包上</td>
<td>PACKAGE</td>
</tr>
<tr>
<td>类&#x2F;接口&#x2F;数组&#x2F;枚举上</td>
<td><code>TYPE</code></td>
</tr>
<tr>
<td>成员变量&#x2F;局部变量</td>
<td><code>FIELD</code>&#x2F;LOCAL_VARIABLE</td>
</tr>
<tr>
<td>方法&#x2F;构造方法</td>
<td><code>METHOD</code>&#x2F;CONSTRUCTOR</td>
</tr>
</tbody></table>
<h4 id="5-2-2-Retention"><a href="#5-2-2-Retention" class="headerlink" title="5.2.2 @Retention"></a>5.2.2 @Retention</h4><blockquote>
<p>保留,指注解保留到什么时候,或者说叫保留至什么时候生效</p>
<p>–</p>
<p>ps: 如果是自定义注解,一般是为了通过反射技术读取注解,所以要定义保留策略为RUNTIME</p>
</blockquote>
<table>
<thead>
<tr>
<th>保留策略</th>
<th>解释</th>
</tr>
</thead>
<tbody><tr>
<td>SOURCE</td>
<td>源码阶段有效</td>
</tr>
<tr>
<td>CLASS</td>
<td>编译后class中有效</td>
</tr>
<tr>
<td>RUNTIME</td>
<td>运行时生效</td>
</tr>
</tbody></table>
<h4 id="5-3-注解参数"><a href="#5-3-注解参数" class="headerlink" title="5.3 注解参数"></a>5.3 注解参数</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target(&#123;ElementType.METHOD,ElementType.TYPE&#125;)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> MyAnno &#123;</span><br><span class="line">    <span class="comment">// 注解的参数</span></span><br><span class="line">    <span class="comment">// 数据类型 参数名();</span></span><br><span class="line">    <span class="comment">// 一旦设置了参数,那么在使用注解时就必需给注解参数赋值</span></span><br><span class="line">    <span class="comment">// 除非给参数设置了默认值</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">a</span><span class="params">()</span> <span class="keyword">default</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 当注解的参数名value,使用时可以省略</span></span><br><span class="line">    String <span class="title function_">value</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">    String[] values() <span class="keyword">default</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注解的参数都是为了通过反射技术去读取到注解参数中的值</p>
</blockquote>
<h4 id="5-4-实际应用"><a href="#5-4-实际应用" class="headerlink" title="5.4 实际应用"></a>5.4 实际应用</h4><blockquote>
<p>Servlet开发中也支持使用注解,大大提高开发效率</p>
<ul>
<li>@WebServlet 注解,可以取代web.xml中[经典8行]代码</li>
</ul>
</blockquote>
<h2 id="day18"><a href="#day18" class="headerlink" title="day18"></a>day18</h2><h3 id="今日内容-7"><a href="#今日内容-7" class="headerlink" title="今日内容"></a>今日内容</h3><blockquote>
<p>0 复习昨日<br>1 Cookie<br>2 Session<br>3 Filter</p>
</blockquote>
<h3 id="0-复习昨日-7"><a href="#0-复习昨日-7" class="headerlink" title="0 复习昨日"></a>0 复习昨日</h3><blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">1 MVC和三层架构是什么?</span><br><span class="line">MVC </span><br><span class="line">三层架构: controller,service,dao</span><br><span class="line"></span><br><span class="line">2 请求转发有什么特点</span><br><span class="line">req.getRequestDispatcher(path).forward(req,resp);</span><br><span class="line">功能: 1) 将请求转发到其他servlet</span><br><span class="line">        2) 当做域对象存取数据 </span><br><span class="line">		  req.setAttribute(key,value)</span><br><span class="line">		  req.getAttribute(key)</span><br><span class="line">        3) 跳转页面</span><br><span class="line">  特点:</span><br><span class="line">		1) 地址栏不变</span><br><span class="line">		2) 请求转发是服务器动作</span><br><span class="line">		3) 一次请求</span><br><span class="line">		4) 在一次请求中,请求域是可以共享</span><br><span class="line">3 重定向有什么特点</span><br><span class="line">  resp.sendRedirect(location);</span><br><span class="line">  功能: 1) 跳转Servlet</span><br><span class="line">		2) 跳转页面</span><br><span class="line">  特点: </span><br><span class="line">		1) 地址栏会改变</span><br><span class="line">		2) 重定向是浏览器动作</span><br><span class="line">		3) 两次请求</span><br><span class="line">		4) 在重定向中,请求域是不可以共享</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="1-关于路径"><a href="#1-关于路径" class="headerlink" title="1 关于路径"></a>1 关于路径</h3><blockquote>
<p>​	关于请求时出的路径</p>
<ul>
<li><p>路径中<code>加/,就是从根路径</code>请求</p>
</li>
<li><p>路径中<code>不加/,就是从当前路径</code>请求</p>
</li>
<li><p>请求转发是服务器动作,<code>服务器的根路径是项目名</code>,&#x2F;b请求,其实是</p>
<p><a target="_blank" rel="noopener" href="http://localhost:8080/%E9%A1%B9%E7%9B%AE%E5%90%8D/b">http://localhost:8080/项目名/b</a></p>
</li>
<li><p>重定向是浏览器动作,<code>浏览器的根路径是端口</code>,&#x2F;b请求,其实是</p>
<p><a target="_blank" rel="noopener" href="http://localhost:8080/b">http://localhost:8080/b</a></p>
</li>
</ul>
</blockquote>
<h3 id="2-IDEA热部署"><a href="#2-IDEA热部署" class="headerlink" title="2 IDEA热部署"></a>2 IDEA热部署</h3><blockquote>
<p>换句话就是,可以实现修改代码不重启服务器.</p>
</blockquote>
<p>设置idea的Tomcat为这样</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091653398.png" alt="image-20221129095612050"></p>
<p>设置完之后,修改前端页面,只需要鼠标离开代码,idea就会自动更新前端代码</p>
<hr>
<p>设置完之后,修改后端代码,只需要点击下面地方,就可以服务器中的代码</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091653401.png" alt="image-20221129100901138"></p>
<h3 id="3-会话技术"><a href="#3-会话技术" class="headerlink" title="3 会话技术"></a>3 会话技术</h3><blockquote>
<p>javaweb开发中会话就是指客户端与服务器的一次会话交互. 比如使用浏览器访问淘宝,那就是开启会话,关闭浏览器会话结束.</p>
<hr>
<p>在访问淘宝网站时,经常提醒你登录,登录完成后,访问所有的淘宝的网页,以及功能(下单,查订单,付款,聊天等等…)都不需要登录.</p>
<p>那么,淘宝怎么知道是[你]在操作,或者说淘宝怎么知道是登录了还是没登录呢?</p>
<p>淘宝网站会<code>记录</code>登录<code>信息</code>.</p>
<hr>
<p><code>记录会话中数据的技术就是会话技术</code></p>
</blockquote>
<blockquote>
<p>HTTP协议是无状态,不能保存信息</p>
<p>会话技术是指:</p>
<ul>
<li>cookie<ul>
<li>浏览器技术</li>
</ul>
</li>
<li>session<ul>
<li>服务端技术</li>
</ul>
</li>
</ul>
</blockquote>
<h3 id="4-Cookie"><a href="#4-Cookie" class="headerlink" title="4 Cookie"></a>4 Cookie</h3><blockquote>
<p>Cookie是<code>浏览器</code>技术,用来存储一小段数据.(存储4kb或者8kb)</p>
<hr>
<p>通过浏览器访问某个网站时,<code>后台服务器创建了Cookie</code>,通过<code>响应头</code>返回给浏览器,浏览器就<code>存储了Cookie</code>,<code>后续每次访问中请求头中都会自动带上cookie访问服务器.</code></p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091653399.png" alt="image-20221129144809097"></p>
<h4 id="4-1-创建cookie"><a href="#4-1-创建cookie" class="headerlink" title="4.1 创建cookie"></a>4.1 创建cookie</h4><blockquote>
<p>创建Cookie</p>
<ul>
<li>Cookie cookie &#x3D; new Cookie(String key,String value);</li>
<li>创建cookie的构造方法只有一个有参构造</li>
<li>参数都是String类型</li>
</ul>
<hr>
<ul>
<li>默认创建的Cookie,<ul>
<li>到期时间是保存至浏览器关闭</li>
<li>保存的路径是当前项目下</li>
</ul>
</li>
</ul>
<hr>
<p>通过方法设置</p>
<ul>
<li>保存时间 setMaxAge(时间值)<ul>
<li>-1 保存至浏览器关闭</li>
<li>0 销毁</li>
<li>秒数</li>
</ul>
</li>
<li>保存路径 setPath(String path)</li>
</ul>
<hr>
<p>【特别说明：cookie的名字，值，路径一致才是同一个cookie】</p>
</blockquote>
<h4 id="4-2-响应给浏览器"><a href="#4-2-响应给浏览器" class="headerlink" title="4.2 响应给浏览器"></a>4.2 响应给浏览器</h4><blockquote>
<p>resp.addCookie(cookie)</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qf.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.Cookie;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * --- 天道酬勤 ---</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> QiuShiju</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@desc</span>  创建,响应cookie</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/ck1&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestCookieServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 创建Cookie</span></span><br><span class="line">        <span class="type">Cookie</span> <span class="variable">cookie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;username&quot;</span>,<span class="string">&quot;admin&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 设置时间</span></span><br><span class="line">        <span class="comment">// 0 销毁</span></span><br><span class="line">        <span class="comment">// -1 保存至浏览器关闭(默认的)</span></span><br><span class="line">        <span class="comment">// 指定保存的秒数</span></span><br><span class="line">        cookie.setMaxAge(<span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span> * <span class="number">365</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 默认存储到当前项目下</span></span><br><span class="line">        <span class="comment">// cookie.setPath(&quot;/&quot;);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 响应给浏览器</span></span><br><span class="line">        resp.addCookie(cookie);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="4-3-获得Cookie"><a href="#4-3-获得Cookie" class="headerlink" title="4.3 获得Cookie"></a>4.3 获得Cookie</h4><blockquote>
<p>一旦创建cookie,后续每次请求服务器,请求头中都会自动带上cookie,那么就可以使用req对象获得cookie</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qf.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.Cookie;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * --- 天道酬勤 ---</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> QiuShiju</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@desc</span> 获得Cookie</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/ck2&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestCookie2Servlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">// 没有获得单个cookie的方法,直接获得所有cookie</span></span><br><span class="line">        Cookie[] cookies = req.getCookies( );</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; cookies != <span class="literal">null</span> &amp;&amp; i &lt; cookies.length; i++) &#123;</span><br><span class="line">            <span class="type">Cookie</span> <span class="variable">cookie</span> <span class="operator">=</span> cookies[i];</span><br><span class="line">            <span class="comment">// 获得</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> cookie.getName( );</span><br><span class="line">            System.out.println(<span class="string">&quot;name = &quot;</span> + name);</span><br><span class="line"></span><br><span class="line">            <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> cookie.getValue( );</span><br><span class="line">            System.out.println(<span class="string">&quot;value = &quot;</span> + value);</span><br><span class="line"></span><br><span class="line">            <span class="type">int</span> <span class="variable">maxAge</span> <span class="operator">=</span> cookie.getMaxAge( );</span><br><span class="line">            System.out.println(<span class="string">&quot;maxAge = &quot;</span> + maxAge);</span><br><span class="line"></span><br><span class="line">            <span class="type">String</span> <span class="variable">path</span> <span class="operator">=</span> cookie.getPath( );</span><br><span class="line">            System.out.println(<span class="string">&quot;path = &quot;</span> + path);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="4-4-cookie的路径问题"><a href="#4-4-cookie的路径问题" class="headerlink" title="4.4 cookie的路径问题"></a>4.4 cookie的路径问题</h4><blockquote>
<p>cookie的路径在创建时默认是当前路径下</p>
<p>其实<code>路径,就是cookie的使用范围</code>,<strong>只有在指定的范围路径内才可以读取的cookie</strong></p>
</blockquote>
<hr>
<p>演示1</p>
<ul>
<li>第一个Cookie1Servlet,设置2个cookie,不设置路径(默认当前项目名)</li>
<li>创建另外两个Servlet分别取得这个两个cookie<ul>
<li>UserServlet,请求路径&#x2F;user&#x2F;ck</li>
<li>AdminServlet,请求路径&#x2F;admin&#x2F;ck</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/create2CK&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Cookie1Servlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 默认路径是项目名,即/day49</span></span><br><span class="line"><span class="comment">         * 也就是说,只有请求是在/day49/xxx/xx都可以获得这些cookie</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">Cookie</span> <span class="variable">userCookie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;user&quot;</span>, <span class="string">&quot;user_ck&quot;</span>);</span><br><span class="line">        <span class="type">Cookie</span> <span class="variable">adminCookie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;admin&quot;</span>, <span class="string">&quot;admin_ck&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        resp.addCookie(userCookie);</span><br><span class="line">        resp.addCookie(adminCookie);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>结果: UserServlet和AdminServlet能获得所有的cookie</p>
<hr>
<p>演示2</p>
<ul>
<li>第一个Cookie1Servlet,设置2个cookie,设置了不同的路径</li>
<li>另外两个Servlet分别取得这个两个cookie<ul>
<li>UserServlet,请求路径&#x2F;user&#x2F;ck</li>
<li>AdminServlet,请求路径&#x2F;admin&#x2F;ck</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/create2CK&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Cookie1Servlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 默认路径是项目名,即/day49</span></span><br><span class="line"><span class="comment">         * 也就是说,只有请求是在/day49/xxx/xx都可以获得这些cookie</span></span><br><span class="line"><span class="comment">         * -------------------------------------------------</span></span><br><span class="line"><span class="comment">         * 设置了路径,/day49/user</span></span><br><span class="line"><span class="comment">         * 也就是说,只有请求是在/day49/user/xx 才可以获得这些cookie</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">Cookie</span> <span class="variable">userCookie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;user&quot;</span>, <span class="string">&quot;user_ck&quot;</span>);</span><br><span class="line">        userCookie.setPath(req.getContextPath()+<span class="string">&quot;/user&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="type">Cookie</span> <span class="variable">adminCookie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;admin&quot;</span>, <span class="string">&quot;admin_ck&quot;</span>);</span><br><span class="line">        adminCookie.setPath(req.getContextPath()+<span class="string">&quot;/admin&quot;</span>);</span><br><span class="line"></span><br><span class="line">        resp.addCookie(userCookie);</span><br><span class="line">        resp.addCookie(adminCookie);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>结果: UserServlet的请求路径是&#x2F;day49&#x2F;user&#x2F;ck,只获得了&#x2F;day49&#x2F;user&#x2F;下面的cookie</p>
<p>AdminServlet的请求路径是&#x2F;day49&#x2F;admin&#x2F;ck,只获得了&#x2F;day49&#x2F;admin&#x2F;下面的cookie</p>
<hr>
<p>总结: 因为路径不同,cookie的范围不同,导致cookie取值范围不同.所以为了保证大部分时候都能取出cookie,好多cookie都将路径设置成了&#x2F;,即所有请求都可以获得到该cookie</p>
<h4 id="4-5-cookie保存中文问题"><a href="#4-5-cookie保存中文问题" class="headerlink" title="4.5 cookie保存中文问题"></a>4.5 cookie保存中文问题</h4><blockquote>
<p>1 cookie的key就直接不能使用中文</p>
<p>2 value中文会乱码</p>
<hr>
<p>cookie存储中文时如果乱码可以使用URLEncoder编码,URLDecoder解码</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 如果存储要中文,可以对中文编码</span></span><br><span class="line"><span class="type">Cookie</span> <span class="variable">cookie2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(</span><br><span class="line">    URLEncoder.encode(<span class="string">&quot;用户名&quot;</span>,<span class="string">&quot;UTF-8&quot;</span>),URLEncoder.encode(<span class="string">&quot;老王&quot;</span>,<span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> <span class="comment">// 取出时需要解码</span></span><br><span class="line"><span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> URLDecoder.decode(name1, <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> URLDecoder.decode(value1, <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">System.out.println(name+<span class="string">&quot;=&quot;</span>+value );</span><br></pre></td></tr></table></figure>



<p>知识点小问</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1 cookie是用来干什么的?</span><br><span class="line">2 谁创建,谁存储?</span><br><span class="line">3 如何获取?是谁携带cookie?在哪里携带?</span><br></pre></td></tr></table></figure>

<h3 id="5-Session【重点】"><a href="#5-Session【重点】" class="headerlink" title="5 Session【重点】"></a>5 Session【重点】</h3><blockquote>
<p>Session也是用于保存会话数据的技术之一。Session是服务器端技术,用于记录用户的状态。</p>
</blockquote>
<blockquote>
<ul>
<li><p>Session是基于Cookie</p>
</li>
<li><p>服务器会为每一个会话创建一个session对象</p>
</li>
<li><p>第一次访问服务器时,会自动创建session,还会创建cookie,并且将sessionid存储到cookie响应到浏览器, key&#x3D;JSESSIONID , value&#x3D;22jkhj3451jk345</p>
</li>
<li><p>后续再向服务器发送请求,就会携带cookie,后台服务器就会根据JSESSIONID 找到session,就可以获得其中的数据</p>
</li>
</ul>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091653407.png" alt="image-20221129161530328"></p>
<h4 id="5-1-创建session"><a href="#5-1-创建session" class="headerlink" title="5.1 创建session"></a>5.1 创建session</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建session</span></span><br><span class="line"><span class="comment">// 如果这次请求没有session,其实就是请求cookie中没有JSESSIONID</span></span><br><span class="line"><span class="comment">// 就会创建session对象</span></span><br><span class="line"><span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession( );</span><br><span class="line">System.out.println(<span class="string">&quot;sessionid = &quot;</span> + session.getId() );</span><br></pre></td></tr></table></figure>

<h4 id="5-2-Session存取数据"><a href="#5-2-Session存取数据" class="headerlink" title="5.2 Session存取数据"></a>5.2 Session存取数据</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession( );</span><br><span class="line">System.out.println(<span class="string">&quot;sessionid = &quot;</span> + session.getId() );</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * session可以当做域对象存取数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">session.setAttribute(<span class="string">&quot;account&quot;</span>,<span class="string">&quot;qwer&quot;</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession( );</span><br><span class="line">    <span class="type">String</span> <span class="variable">account</span> <span class="operator">=</span> (String) session.getAttribute(<span class="string">&quot;account&quot;</span>);</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">&quot;Session2Servlet.account = &quot;</span> + account);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="5-3-Session域和Request域"><a href="#5-3-Session域和Request域" class="headerlink" title="5.3 Session域和Request域"></a>5.3 Session域和Request域</h4><blockquote>
<p>Request域中的数据,只在一次请求中有效</p>
<p>Session域中的数据,一次中会话中有效,无论是请求转发还是重定向</p>
</blockquote>
<h4 id="5-4-Session域数据清除"><a href="#5-4-Session域数据清除" class="headerlink" title="5.4 Session域数据清除"></a>5.4 Session域数据清除</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 清除session数据</span></span><br><span class="line"><span class="comment">// session.removeAttribute();// 删除一个数据</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 销毁session</span></span><br><span class="line">session.invalidate();</span><br></pre></td></tr></table></figure>



<h3 id="6-记录登录状态案例"><a href="#6-记录登录状态案例" class="headerlink" title="6 记录登录状态案例"></a>6 记录登录状态案例</h3><p>需求: 项目中有登录页面(index.html),个人中心页面(info.html),添加用户页面(add.html)</p>
<p>实现目标: 只有登录才可以访问info.html,add.html</p>
<p>实现步骤:</p>
<pre><code>1. **登录成功后将登录信息存入session**
1. **设置拦截器,拦截请求判断有没有登录信息**
1. **有登录信息就放行**
1. **没有登录登录信息就跳转至首页重新登录**
1. **在个人中心有退出登录,会销毁session**
</code></pre>
<hr>
<p>登录成功后将登录信息存入session</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/login&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 假设用户名是admin,密码是123456</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="string">&quot;admin&quot;</span>.equals(username) &amp;&amp; <span class="string">&quot;123456&quot;</span>.equals(password)) &#123;</span><br><span class="line">            <span class="comment">// 登录成功,将信息放入session</span></span><br><span class="line">            <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession( );</span><br><span class="line">            session.setAttribute(<span class="string">&quot;user&quot;</span>,username);</span><br><span class="line">            <span class="comment">// 登录成功,跳转个人中心</span></span><br><span class="line">            resp.sendRedirect(req.getContextPath()+<span class="string">&quot;/info.html&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 登录失败,跳转登录页面</span></span><br><span class="line">            resp.sendRedirect(req.getContextPath()+<span class="string">&quot;/index.html&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>设置拦截器,拦截请求判断有没有登录信息</p>
<p>有登录信息就放行</p>
<p>没有登录登录信息就跳转至首页重新登录</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 该拦截器,拦截的路径</span></span><br><span class="line"><span class="meta">@WebFilter(&quot;/*&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginFilter</span> <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest request, ServletResponse response, FilterChain chain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">        <span class="type">HttpServletRequest</span> <span class="variable">req</span> <span class="operator">=</span> (HttpServletRequest) request;</span><br><span class="line">        <span class="type">HttpServletResponse</span> <span class="variable">resp</span> <span class="operator">=</span> (HttpServletResponse) response;</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">requestURI</span> <span class="operator">=</span> req.getRequestURI( );</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;requestURI = &quot;</span> + requestURI);</span><br><span class="line">        <span class="keyword">if</span> (requestURI.contains(<span class="string">&quot;info&quot;</span>) || requestURI.contains(<span class="string">&quot;add&quot;</span>)) &#123;</span><br><span class="line">            <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession( );</span><br><span class="line">            <span class="type">Object</span> <span class="variable">user</span> <span class="operator">=</span> session.getAttribute(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span> (user == <span class="literal">null</span>) &#123;</span><br><span class="line">                resp.sendRedirect(req.getContextPath()+<span class="string">&quot;/index.html&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 放行</span></span><br><span class="line">        chain.doFilter(req,response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>退出登录,销毁session</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/logout&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LogoutServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">// 退出登录,销毁session</span></span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession( );</span><br><span class="line">        session.removeAttribute(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">        session.invalidate();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 回到首页</span></span><br><span class="line">        resp.sendRedirect(req.getContextPath()+<span class="string">&quot;/index.html&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-拦截器-过滤器-Filter"><a href="#7-拦截器-过滤器-Filter" class="headerlink" title="7 拦截器&#x2F;过滤器(Filter)"></a>7 拦截器&#x2F;过滤器(Filter)</h3><blockquote>
<p>拦截请求,可以使用@WebFilter指定拦截的路径</p>
<hr>
<p>开发步骤</p>
<ul>
<li>创建类</li>
<li>实现Filter接口</li>
<li>重写方法(init(),doFilter(),destroy())</li>
</ul>
<hr>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 执行拦截请求的方法</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> request 处理请求</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> response 处理响应的</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> chain 拦截器链</span></span><br><span class="line"><span class="comment"> *               chain 放行请求到下一个拦截器,如果没有下一个拦截器,就放行到对应的资源</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> ServletException</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest request, ServletResponse response, FilterChain chain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line"></span><br><span class="line">  chain.doFilter(request,response);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<hr>
<p>在使用注解开发中,如果有多个拦截器,顺序是按照拦截器的名字的首字母顺序</p>
</blockquote>
<p>应用场景:</p>
<ol>
<li>拦截请求,判断用户登录</li>
<li>拦截请求,设置编码格式</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebFilter(&quot;/*&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EncodingFilter</span> <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest request, ServletResponse response, FilterChain chain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">        request.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        response.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="day19"><a href="#day19" class="headerlink" title="day19"></a>day19</h2><h3 id="今日内容-8"><a href="#今日内容-8" class="headerlink" title="今日内容"></a>今日内容</h3><blockquote>
<p>0 复习昨日<br>1 session存储登录状态<br>2 使用拦截器改造<br>3 Ajax<br>4 FastJson</p>
</blockquote>
<h3 id="0-复习昨日-8"><a href="#0-复习昨日-8" class="headerlink" title="0 复习昨日"></a>0 复习昨日</h3><blockquote>
<p>1 服务器的根路径: 项目名<br>                  项目名&#x2F;login<br>谁能从服务器发出请求? 请求转发</p>
<p>浏览器的根路径:端口<br>谁能从浏览器发出请求?如果通过浏览器发请求?<br>    a,form,ajax,重定向,手动在地址栏输入请求</p>
<p>2 cookie是谁创建? 后台服务器创建,通过响应返回浏览器,储存在浏览器<br>由谁携带? 后续每次向该服务器发请求时会在请求头中携带cookie<br>cookie保存时间:<br> -1 是关闭浏览器时销毁<br> 0  直接销毁<br> 具体秒数  指定时间销毁	<br>cookie的路径是一种cookie作用范围,在该路径范围内可以取出cookie</p>
<p>3 session什么时候创建?<br>    当需要使用session当域对象存储数据时,就getSession();获得session</p>
<p>4 session域有什么特点<br>    session域在一次会话中有效,无论请求转发还是重定向都可以取出该数据</p>
<p>5 拦截器如何使用<br>创建类,实现Filter接口<br>重写方法init(),doFilter(),destroy()<br>doFilter()执行拦截</p>
<p>&#x2F;&#x2F; 放行到下一个拦截器<br>chain.doFilter(req,resp);<br>&#x2F;&#x2F; 没有拦截器,放行到对应的资源</p>
<p>&#x2F;login  —&gt; LoginServlet,完成登录<br>&#x2F;ck1    —&gt; CookieServlet,<br>&#x2F;index.html  —&gt; 页面</p>
</blockquote>
<h3 id="1-session存储登录状态"><a href="#1-session存储登录状态" class="headerlink" title="1 session存储登录状态"></a>1 session存储登录状态</h3><blockquote>
<p>需求:  做到登录认证.</p>
<p>目前,服务器中有关于用户操作的几个Servlet, </p>
<ul>
<li>UserLoginServlet   –&gt; &#x2F;user&#x2F;login</li>
<li>UserAddServlet     —&gt; &#x2F;user&#x2F;add</li>
<li>UserDeleteServlet   –&gt; &#x2F;user&#x2F;delete</li>
</ul>
<p>这些Servlet有对应的映射路径,<code>要保证只有登录后才可以</code>进行注册&#x2F;删除</p>
</blockquote>
<blockquote>
<p>实现思路</p>
<ul>
<li>执行登录时,如果登录成功,将登录信息放入session</li>
<li>在真正执行注册&#x2F;删除等功能前,先判断有没有登录</li>
<li>其实就是判断session中有没有登录的信息</li>
<li>执行退出时,销毁session</li>
</ul>
</blockquote>
<p>登录,登录成功放入session</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/user/login&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserLoginServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">&quot;admin&quot;</span>.equals(username)) &#123;</span><br><span class="line">            <span class="comment">// 登录成功,信息放入session</span></span><br><span class="line">            <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession( );</span><br><span class="line">            session.setAttribute(<span class="string">&quot;username&quot;</span>,username);</span><br><span class="line">            System.out.println(<span class="string">&quot;UserLoginServlet...登录成功&quot;</span> );</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;UserLoginServlet...登录不成功,用户名或密码错误&quot;</span> );</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>添加用户,执行前判断登录状态</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/user/add&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserAddServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">// 在执行功能前,先判断有没有登录</span></span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession( );</span><br><span class="line">        <span class="type">Object</span> <span class="variable">username</span> <span class="operator">=</span> session.getAttribute(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (username != <span class="literal">null</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;已经登录过,可以执行UserAddServlet...添加用户&quot;</span> );</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;没有登录,没有权限操作!!&quot;</span> );</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>删除用户,执行前判断登录状态</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/user/delete&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDeleteServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession( );</span><br><span class="line">        <span class="type">Object</span> <span class="variable">username</span> <span class="operator">=</span> session.getAttribute(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (username != <span class="literal">null</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;已经登录过,可以执行UserDeleteServlet...删除用户&quot;</span> );</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;没有登录,没有权限操作!!&quot;</span> );</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>退出登录,销毁登录状态</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/user/logout&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserLogoutServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession( );</span><br><span class="line">        session.invalidate();</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;退出登录!销毁登录状态!&quot;</span> );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-使用拦截器改造"><a href="#2-使用拦截器改造" class="headerlink" title="2 使用拦截器改造"></a>2 使用拦截器改造</h3><blockquote>
<p>场景: 服务器中有很多处理请求的servlet,项目要求有登录认证.所以我们每个Servlet执行功能前都要对登录信息判断,那就会有很多次登录判断的代码编写,重复性很高!</p>
<hr>
<p>因为以上操作不高效,代码重复率太高! 解决方案: 拦截器</p>
<ul>
<li>使用拦截器,拦截请求,对请求进行判断,如果有登录信息就放行</li>
<li>没有登录信息就响应到首页,提示</li>
</ul>
</blockquote>
<p>改造后面的Servlet,不再进行判断session</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/user/add&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserAddServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;已经登录过,可以执行UserAddServlet...添加用户&quot;</span> );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>添加拦截器,执行拦截</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qf.session;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebFilter;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * --- 天道酬勤 ---</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> QiuShiju</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@desc</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebFilter(&quot;/user/*&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginFilter</span> <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest request, ServletResponse response, FilterChain chain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">HttpServletRequest</span> <span class="variable">req</span> <span class="operator">=</span> (HttpServletRequest) request;</span><br><span class="line">        <span class="type">String</span> <span class="variable">uri</span> <span class="operator">=</span> req.getRequestURI( );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 将登录请求放行</span></span><br><span class="line">        <span class="keyword">if</span> (uri.contains(<span class="string">&quot;/login&quot;</span>)) &#123;</span><br><span class="line">            chain.doFilter(request,response);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 其他请求判断登录信息</span></span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession( );</span><br><span class="line">        <span class="type">Object</span> <span class="variable">username</span> <span class="operator">=</span> session.getAttribute(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (username != <span class="literal">null</span> ) &#123;</span><br><span class="line">            <span class="comment">// 不为空,就说明登录,就放行</span></span><br><span class="line">            chain.doFilter(request,response);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;没有登录,不能操作,没有权限!!&quot;</span> );</span><br><span class="line">            <span class="comment">// 跳转登录页面,让其重写登录!</span></span><br><span class="line">            <span class="comment">// 也可以跳转404,提示没有权限</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>LoginServlet,LogoutServlet和之前一样,不用改动</p>
<h3 id="3-Ajax"><a href="#3-Ajax" class="headerlink" title="3 Ajax"></a>3 Ajax</h3><h4 id="3-1-介绍"><a href="#3-1-介绍" class="headerlink" title="3.1 介绍"></a>3.1 介绍</h4><blockquote>
<p>Ajax即<strong>A</strong>synchronous <strong>J</strong>avascript <strong>A</strong>nd <strong>X</strong>ML（异步JavaScript和<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/XML/86251?fromModule=lemma_inlink">XML</a>）</p>
<p>使用Ajax技术网页应用能够快速地将增量更新呈现在<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E7%94%A8%E6%88%B7%E7%95%8C%E9%9D%A2/6582461?fromModule=lemma_inlink">用户界面</a>上，<code>而不需要重载（刷新）整个页面</code>，这使得程序能够更快地回应用户的操作。</p>
</blockquote>
<h4 id="3-2-语法"><a href="#3-2-语法" class="headerlink" title="3.2 语法"></a>3.2 语法</h4><blockquote>
<p>使用JavaScript原生操作ajax很麻烦,我们一般使用JQuery封装好的ajax操作,很简单</p>
<p>(jquery对象等价于$)</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$.<span class="title function_">get</span>(url,[data],[<span class="keyword">function</span>],[type]);</span><br><span class="line"><span class="comment">/* 就可以向服务器发送一个get请求</span></span><br><span class="line"><span class="comment">url: 服务器地址</span></span><br><span class="line"><span class="comment">data: 向服务器发送的数据,json形式 &#123;k:v&#125;</span></span><br><span class="line"><span class="comment">function: 请求成功的回调函数,是后台服务器返回的数据</span></span><br><span class="line"><span class="comment">type: 返回的内容的格式</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>



<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$.<span class="title function_">post</span>(url,[data],[<span class="keyword">function</span>],[type]);</span><br><span class="line"><span class="comment">/* 就可以向服务器发送一个post请求</span></span><br><span class="line"><span class="comment">url: 服务器地址</span></span><br><span class="line"><span class="comment">data: 向服务器发送的数据,json形式 &#123;k:v&#125;</span></span><br><span class="line"><span class="comment">function: 请求成功的回调函数,是后台服务器返回的数据</span></span><br><span class="line"><span class="comment">type: 返回的内容的格式</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>



<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>:<span class="string">&quot;路径&quot;</span>,</span><br><span class="line">    <span class="attr">type</span>:<span class="string">&quot;GET&quot;</span>, <span class="comment">// 获得POST,默认是get</span></span><br><span class="line">    <span class="attr">data</span>:<span class="string">&quot;&quot;</span>|&#123;&#125;, <span class="comment">// data是发送到服务器的数据,可以是字符串,也可以对象</span></span><br><span class="line">         <span class="comment">// &quot;username=admin&amp;password=123456&quot;</span></span><br><span class="line">         <span class="comment">// &#123;username:&quot;admin&quot;,password:&quot;123456&quot;&#125;</span></span><br><span class="line">    <span class="attr">contentType</span>: <span class="string">&quot;application/x-www-form-urlencoded&quot;</span>,  <span class="comment">// 默认,适合大多数情况</span></span><br><span class="line">                 <span class="comment">// 发送到服务器的内容的格式,也可以改成application/json</span></span><br><span class="line">    <span class="attr">dataType</span>: <span class="string">&quot;json&quot;</span>,<span class="comment">// 服务器返回的数据类型格式,不设置会自动识别</span></span><br><span class="line">    <span class="attr">success</span>:<span class="keyword">function</span>(<span class="params">ret</span>)&#123;</span><br><span class="line">        <span class="comment">// 向服务器请求成功,就会此处,成功回调函数</span></span><br><span class="line">        <span class="comment">// ret就是服务器返回的数据</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">error</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">       <span class="comment">// 向服务器请求失败,就会此处,失败回调函数 </span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="3-3-测试"><a href="#3-3-测试" class="headerlink" title="3.3 测试"></a>3.3 测试</h4><h5 id="3-3-1-get"><a href="#3-3-1-get" class="headerlink" title="3.3.1 $.get"></a>3.3.1 $.get</h5><p>需求: 分别使用<code>$.get , $.post , $.ajax</code>发送请求,后台servlet接收请求,并做出响应</p>
<hr>
<p>第一步: 项目得引用jquery.js</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091655669.png" alt="image-20221130113404727"></p>
<p>第二步: 写页面,页面中使用ajax发请求</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;getRequest()&quot;</span>&gt;</span>发送$.get请求<span class="tag">&lt;/<span class="name">button</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;/jquery-2.1.0.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">getRequest</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">    $.<span class="title function_">get</span>(<span class="string">&quot;http://localhost:8080/ajax/req&quot;</span>,&#123;<span class="attr">username</span>:<span class="string">&quot;gegege&quot;</span>&#125;,<span class="keyword">function</span> (<span class="params">ret</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ret&quot;</span>,ret)</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br></pre></td></tr></table></figure>

<p>第三步: 后台接收请求,并响应</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/ajax/req&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AjaxGetServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 接收参数</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;$.get发送的数据: username = &quot;</span> + username );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 可以处理业务逻辑</span></span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 响应</span></span><br><span class="line">        resp.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">out</span> <span class="operator">=</span> resp.getWriter( );</span><br><span class="line">        out.write(<span class="string">&quot;这是后台的响应~~~&quot;</span>); </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<hr>
<p>第四步: 将数据响应给回调函数</p>
<h5 id="3-3-2-post"><a href="#3-3-2-post" class="headerlink" title="3.3.2 $.post"></a>3.3.2 $.post</h5><p>前端发请求</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">postRequest</span>(<span class="params"></span>)&#123;</span><br><span class="line">  $.<span class="title function_">post</span>(<span class="string">&quot;/ajax/req&quot;</span>,&#123;<span class="attr">password</span>:<span class="string">&quot;12345&quot;</span>&#125;,<span class="keyword">function</span> (<span class="params">ret</span>)&#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(ret.<span class="property">code</span>)</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(ret.<span class="property">msg</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>后台接收请求并响应</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/ajax/req&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AjaxReqServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;$.post发送的数据: password = &quot;</span> + password  );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 直接响应给浏览器的就是json</span></span><br><span class="line">        resp.setContentType(<span class="string">&quot;application/json;charset=utf-8&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">out</span> <span class="operator">=</span> resp.getWriter( );</span><br><span class="line">        <span class="comment">// out.write(&quot;这是后台的响应~~~&quot;);</span></span><br><span class="line">        <span class="comment">// 一般响应一个JSON数据</span></span><br><span class="line">        out.write(<span class="string">&quot;&#123;\&quot;code\&quot;:200,\&quot;msg\&quot;:\&quot;POST请求成功\&quot;&#125;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="3-3-3-ajax"><a href="#3-3-3-ajax" class="headerlink" title="3.3.3 $.ajax"></a>3.3.3 $.ajax</h5><p>前端发请求</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">ajaxRequest</span>(<span class="params"></span>)&#123;</span><br><span class="line">  $.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">      <span class="attr">url</span>:<span class="string">&quot;/ajax/req2&quot;</span>,</span><br><span class="line">      <span class="comment">// data:&quot;username=aaaaa&amp;password=AAAA&quot;,  // 数据格式是字符串形式</span></span><br><span class="line">      <span class="attr">data</span>:&#123;<span class="attr">username</span>:<span class="string">&quot;root&quot;</span>,<span class="attr">password</span>: <span class="string">&quot;ROOT&quot;</span>&#125;, <span class="comment">// 数据格式是对象形式</span></span><br><span class="line">      <span class="attr">type</span>:<span class="string">&quot;POST&quot;</span>, <span class="comment">// 方式是get或者post,不写默认是get</span></span><br><span class="line">      <span class="attr">success</span>:<span class="keyword">function</span> (<span class="params">ret</span>)&#123;</span><br><span class="line">          <span class="keyword">if</span> (ret.<span class="property">code</span> == <span class="number">200</span>) &#123;</span><br><span class="line">              <span class="title function_">alert</span>(ret.<span class="property">msg</span>);</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">error</span>:<span class="keyword">function</span> (<span class="params"></span>)&#123;</span><br><span class="line">          <span class="title function_">alert</span>(<span class="string">&quot;服务器正忙,请稍后再试~&quot;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>后端接收请求,并作出响应</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/ajax/req2&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AjaxReq2Servlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 接收参数</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;$.ajax-GET发送的数据: username = &quot;</span> + username+<span class="string">&quot;,password = &quot;</span> + password );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 可以处理业务逻辑</span></span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 直接响应给浏览器的就是json</span></span><br><span class="line">        resp.setContentType(<span class="string">&quot;application/json;charset=utf-8&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">out</span> <span class="operator">=</span> resp.getWriter( );</span><br><span class="line">        <span class="comment">// out.write(&quot;这是后台的响应~~~&quot;);</span></span><br><span class="line">        <span class="comment">// 一般响应一个JSON数据</span></span><br><span class="line">        out.write(<span class="string">&quot;&#123;\&quot;code\&quot;:200,\&quot;msg\&quot;:\&quot;请求成功\&quot;&#125;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 接收参数</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;$.ajax-POST发送的数据: username = &quot;</span> + username+<span class="string">&quot;,password = &quot;</span> + password );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 可以处理业务逻辑</span></span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="number">1</span>/<span class="number">0</span> );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 直接响应给浏览器的就是json</span></span><br><span class="line">        resp.setContentType(<span class="string">&quot;application/json;charset=utf-8&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">out</span> <span class="operator">=</span> resp.getWriter( );</span><br><span class="line">        <span class="comment">// out.write(&quot;这是后台的响应~~~&quot;);</span></span><br><span class="line">        <span class="comment">// 一般响应一个JSON数据</span></span><br><span class="line">        out.write(<span class="string">&quot;&#123;\&quot;code\&quot;:200,\&quot;msg\&quot;:\&quot;请求成功\&quot;&#125;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ps: 以上doGet和doPost代码是一模一样,其实可以省略这么写</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/ajax/req2&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AjaxReq2Servlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doPost(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 接收参数</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;$.ajax-POST发送的数据: username = &quot;</span> + username+<span class="string">&quot;,password = &quot;</span> + password );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 可以处理业务逻辑</span></span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="number">1</span>/<span class="number">0</span> );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 直接响应给浏览器的就是json</span></span><br><span class="line">        resp.setContentType(<span class="string">&quot;application/json;charset=utf-8&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">out</span> <span class="operator">=</span> resp.getWriter( );</span><br><span class="line">        <span class="comment">// out.write(&quot;这是后台的响应~~~&quot;);</span></span><br><span class="line">        <span class="comment">// 一般响应一个JSON数据</span></span><br><span class="line">        out.write(<span class="string">&quot;&#123;\&quot;code\&quot;:200,\&quot;msg\&quot;:\&quot;请求成功\&quot;&#125;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="3-4-响应json问题"><a href="#3-4-响应json问题" class="headerlink" title="3.4 响应json问题"></a>3.4 响应json问题</h4><p>使用方式1: 后台<code>响应json字符串</code>,前端需要<code>解析</code>为json对象再使用</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/ajax/get&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AjaxGetServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 接收参数</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;$.get发送的数据: username = &quot;</span> + username );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 可以处理业务逻辑</span></span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 响应</span></span><br><span class="line">        resp.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">out</span> <span class="operator">=</span> resp.getWriter( );</span><br><span class="line">        <span class="comment">// 响应JSON字符串</span></span><br><span class="line">        out.write(<span class="string">&quot;&#123;\&quot;code\&quot;:200,\&quot;msg\&quot;:\&quot;请求成功\&quot;&#125;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">  $.<span class="title function_">get</span>(<span class="string">&quot;http://localhost:8080/ajax/get&quot;</span>,&#123;<span class="attr">username</span>:<span class="string">&quot;gegege&quot;</span>&#125;,<span class="keyword">function</span> (<span class="params">ret</span>)&#123;</span><br><span class="line">      <span class="comment">// 如果后台返回的是JSON字符串,可以使用解析方法,解析为JSON对象</span></span><br><span class="line">      <span class="keyword">var</span> json = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(ret);</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(json)</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(json.<span class="property">code</span>)</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(json.<span class="property">msg</span>)</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用方式2: 后台<code>设置响应内容为json</code>,前端直接<code>使用json对象</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/ajax/get&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AjaxGetServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 接收参数</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;$.get发送的数据: username = &quot;</span> + username );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 可以处理业务逻辑</span></span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 直接响应给浏览器的就是json</span></span><br><span class="line">        resp.setContentType(<span class="string">&quot;application/json;charset=utf-8&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">out</span> <span class="operator">=</span> resp.getWriter( );</span><br><span class="line">        <span class="comment">// 响应一个JSON数据</span></span><br><span class="line">        out.write(<span class="string">&quot;&#123;\&quot;code\&quot;:200,\&quot;msg\&quot;:\&quot;请求成功\&quot;&#125;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">  $.<span class="title function_">get</span>(<span class="string">&quot;http://localhost:8080/ajax/get&quot;</span>,&#123;<span class="attr">username</span>:<span class="string">&quot;gegege&quot;</span>&#125;,<span class="keyword">function</span> (<span class="params">ret</span>)&#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ret&quot;</span>,ret)</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> ret) <span class="comment">// 获得数据类型,object</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(ret.<span class="property">code</span>); <span class="comment">// 后台返回的json,可以直接使用</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(ret.<span class="property">msg</span>);</span><br><span class="line"></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="3-5-BUG-JS引入失败"><a href="#3-5-BUG-JS引入失败" class="headerlink" title="3.5 BUG: JS引入失败"></a>3.5 BUG: JS引入失败</h4><p>因为服务器部署时没有将js文件加载,</p>
<ul>
<li>删除target文件夹</li>
<li>修改tomcat配置为</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091655670.png" alt="image-20221130114848855"></p>
<h3 id="4-案例"><a href="#4-案例" class="headerlink" title="4 案例"></a>4 案例</h3><h4 id="4-1-注册"><a href="#4-1-注册" class="headerlink" title="4.1 注册"></a>4.1 注册</h4><p>需求: 注册时,写完用户名,提示该用户名是否存在可否注册</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">思路:</span><br><span class="line">1 前端页面,输入框</span><br><span class="line">2 当失去焦点时触发函数</span><br><span class="line">3 函数内发出ajax请求,要携带输入框的数据到服务</span><br><span class="line">7 回调函数接收到服务器的数据</span><br><span class="line">  根据状态码做出对应的dom操作</span><br><span class="line">后端</span><br><span class="line">4 接收请求,接收请求中的数据</span><br><span class="line">5 service --&gt; dao ---&gt; jdbc</span><br><span class="line">6 返回数据,如果数据库查到数据,说明已经注册过,响应500</span><br><span class="line">          如果数据库没有查到,说明没有注册过,响应200</span><br><span class="line">数据库</span><br><span class="line"> 别忘了加入mysql驱动,数据库连接池</span><br><span class="line"> model+servlet+service(impl)+dao(impl)</span><br></pre></td></tr></table></figure>

<h4 id="4-2-回显数据"><a href="#4-2-回显数据" class="headerlink" title="4.2 回显数据"></a>4.2 回显数据</h4><p>需求: 展现数据时,在输入完用户id后,下方的个人信息内容直接自动补全</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">整个思路: 通过id查用户，返回一个用户对象,在前端展现</span><br><span class="line">前端</span><br><span class="line">1 页面表格,很多个输入框</span><br><span class="line">2 输入完id,触发失去焦点函数</span><br><span class="line">3 发送ajax请求,将id发送服务器</span><br><span class="line">6 回调函数接收服务器返回的数据,操作dom补全表格数据</span><br><span class="line"></span><br><span class="line">后端</span><br><span class="line">4 接收请求,接收数据</span><br><span class="line">servlet --&gt; service  --&gt; dao</span><br><span class="line">5 将查询的结果响应回ajax</span><br></pre></td></tr></table></figure>

<h3 id="5-FastJson"><a href="#5-FastJson" class="headerlink" title="5 FastJson"></a>5 FastJson</h3><blockquote>
<p>以后工作中<code>前后端数据的交互都是以JSON形式</code>.</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">	code<span class="punctuation">:</span><span class="number">200</span><span class="punctuation">,</span></span><br><span class="line">	msg<span class="punctuation">:</span><span class="string">&quot;OK&quot;</span><span class="punctuation">,</span></span><br><span class="line">	data<span class="punctuation">:</span><span class="punctuation">&#123;</span><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<hr>
<p>再封装一个java对象,对应与json格式</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ResultData</span> &#123;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">private</span> <span class="type">int</span> code;</span><br><span class="line"> <span class="keyword">private</span> String msg;</span><br><span class="line"> <span class="keyword">private</span> Object data;</span><br><span class="line"></span><br><span class="line"> <span class="comment">// set get..</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>目前使用手动拼接json字符串,很麻烦,不好用!!</p>
<hr>
<p>FastJson专业也用于转换JSON(阿里巴巴开源)</p>
<ul>
<li>字符串转json</li>
<li>对象转json</li>
<li>集合转json</li>
<li>json转字符串,对象,集合,数组等</li>
</ul>
</blockquote>
<p>项目中引入依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.46<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在需要转json的地方使用</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qf.ajax;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSON;</span><br><span class="line"><span class="keyword">import</span> com.qf.model.User;</span><br><span class="line"><span class="keyword">import</span> com.qf.service.UserService;</span><br><span class="line"><span class="keyword">import</span> com.qf.service.impl.UserSericeImpl;</span><br><span class="line"><span class="keyword">import</span> com.qf.util.ResultData;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * --- 天道酬勤 ---</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> QiuShiju</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@desc</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserFindServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">       <span class="comment">// 获得请求数据</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">idStr</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">id</span> <span class="operator">=</span> Integer.parseInt(idStr);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 调用业务层查询数据</span></span><br><span class="line">        <span class="type">UserService</span> <span class="variable">userService</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserSericeImpl</span>();</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userService.findUserById(id);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 封装返回给前端的数据</span></span><br><span class="line">        <span class="type">ResultData</span> <span class="variable">resultData</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ResultData</span>( );</span><br><span class="line">        resultData.setCode(<span class="number">200</span>);</span><br><span class="line">        resultData.setMsg(<span class="string">&quot;OK&quot;</span>);</span><br><span class="line">        resultData.setData(user);</span><br><span class="line">        <span class="comment">// 使用工具类转json字符串</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">jsonStr</span> <span class="operator">=</span> JSON.toJSONString(resultData);</span><br><span class="line">        <span class="comment">// 响应</span></span><br><span class="line">        resp.setContentType(<span class="string">&quot;application/json;charset=utf-8&quot;</span>);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">out</span> <span class="operator">=</span> resp.getWriter( );</span><br><span class="line">        out.write(jsonStr);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="day20"><a href="#day20" class="headerlink" title="day20"></a>day20</h2><h3 id="今日内容-9"><a href="#今日内容-9" class="headerlink" title="今日内容"></a>今日内容</h3><blockquote>
<p>0复习</p>
</blockquote>
<h3 id="复习"><a href="#复习" class="headerlink" title="复习"></a>复习</h3><blockquote>
<p>这一阶段: javaweb,学习写项目</p>
<ul>
<li>前端</li>
<li>后端</li>
<li>数据库</li>
</ul>
</blockquote>
<blockquote>
<p>数据库</p>
<ul>
<li>SQL语句</li>
<li>动态SQL</li>
<li>DBUtil<ul>
<li>JDBC五大步骤</li>
</ul>
</li>
</ul>
</blockquote>
<blockquote>
<p>前端: 展现数据和收集数据</p>
<ul>
<li>展现数据<ul>
<li>数据何时加载<ul>
<li>情况1: 页面加载时去查数据</li>
<li>情况2: 点击某些按钮(a标签,form表单)</li>
<li>其他情况</li>
</ul>
</li>
<li>通过什么手段查数据<ul>
<li>核心思想就是通过http请求</li>
<li>a标签,href&#x3D;”路径”</li>
<li>form,action&#x3D;”路径”</li>
<li><code>$.get,$.post,$.ajax</code>其中的url&#x3D;”路径”</li>
<li>ifram src&#x3D;”路径”</li>
</ul>
</li>
<li>数据又如何展现<ul>
<li>前后端交互使用json.后端返回json</li>
<li>从json中把数据取出,通过操作dom,展现数据</li>
</ul>
</li>
</ul>
</li>
<li>收集数据<ul>
<li>主要是form</li>
<li>发请求到后台</li>
</ul>
</li>
</ul>
</blockquote>
<blockquote>
<p>后端</p>
<ul>
<li><p>maven : 项目管理工具</p>
<ul>
<li><p>管理项目结构</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">|-项目名</span><br><span class="line">|---src</span><br><span class="line">|------main</span><br><span class="line">|---------java</span><br><span class="line">|---------resources</span><br><span class="line">|---------webapp</span><br><span class="line">|------test</span><br><span class="line">|---pom.xml</span><br><span class="line">|---target</span><br></pre></td></tr></table></figure>
</li>
<li><p>管理项目依赖</p>
<ul>
<li>导包</li>
</ul>
</li>
</ul>
</li>
<li><p>tomcat</p>
<ul>
<li>服务器,运行web项目的容器</li>
<li>idea关联tomcat</li>
<li>部署项目到tomcat</li>
<li>运行</li>
<li>访问(按照tomcat关联和部署时候的路径)</li>
<li>访问出现404<ul>
<li>检查tomcat路径是否正确</li>
<li>检查访问页面是不是不存在</li>
<li>检查访问请求是不是没有对应的url-partten映射路径</li>
<li>检查部署target中是不是没生效</li>
<li>清空idea缓存重启idea</li>
<li>重新打包部署</li>
</ul>
</li>
</ul>
</li>
<li><p>servlet</p>
<ul>
<li>servlet是可以运行在服务器上的一个程序</li>
<li>servlet主要作用: <code>接收请求,做出响应</code></li>
<li>前端发送get请求,重写doGet(),前端发送post请求,重写doPost()</li>
<li>使用request对象接收请求</li>
<li>使用response对象做出响应</li>
</ul>
</li>
<li><p>关于request</p>
<ul>
<li>可以接收请求数据  req.getParameter(“name”)</li>
<li>可以当做域对象,存取数据(在一次请求转发的时候,请求域中的数据可以共享)</li>
<li>请求转发(服务器的内部动作,可以将一个请求转发到另外 一个servlet),还可以转发到页面<ul>
<li>路径不变,服务器动作,是一次请求</li>
</ul>
</li>
</ul>
</li>
<li><p>关于response</p>
<ul>
<li>可以向浏览器响应一些内容<ul>
<li>PrinterWriter out &#x3D; resp.getWriter()</li>
<li>out.writer(“xxx”);</li>
<li>一般用于响应json</li>
</ul>
</li>
<li>重定向可以将一个请求重新到另外 一个servlet),还可以重新跳转到页面<ul>
<li>resp.sendRedirect()</li>
<li>路径会变,浏览器动作,是两次请求</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr>
<p>写项目的架子: mvc思想和三层架构</p>
<ul>
<li>servlet : 控制层,跟前端交互,控制接收请求,调用业务层处理业务,做出响应</li>
<li>service: 处理业务逻辑<ul>
<li>impl</li>
</ul>
</li>
<li>dao : 处理数据库<ul>
<li>impl</li>
</ul>
</li>
</ul>
</blockquote>
<h3 id="要复习"><a href="#要复习" class="headerlink" title="要复习"></a>要复习</h3><blockquote>
<p>框架标签</p>
<p>dom操作(获得dom,dom取值赋值)</p>
<p>js&#x2F;jq函数+事件</p>
<p>前端F12调试工具</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">text(&quot;&lt;span style=&#x27;color:red&#x27;&gt;sss&lt;/span&gt;&quot;) 添加的内容全部是字符串</span><br><span class="line">html(&quot;&lt;span style=&#x27;color:red&#x27;&gt;sss&lt;/span&gt;&quot;) 如果添加的有标签时,会解析成对应的标签效果</span><br><span class="line">text(),html()它是给开闭标签之间设置内容,如果之前有内容会覆盖</span><br><span class="line">------</span><br><span class="line">append(&quot;&lt;span style=&#x27;color:red&#x27;&gt;sss&lt;/span&gt;&quot;),在开闭标签之间内容的后面追加,且会解析为标签效果</span><br></pre></td></tr></table></figure>

<h2 id="day21"><a href="#day21" class="headerlink" title="day21"></a>day21</h2><h3 id="今日内容-10"><a href="#今日内容-10" class="headerlink" title="今日内容"></a>今日内容</h3><blockquote>
<p>0 复习昨日</p>
<p>1 layui</p>
</blockquote>
<h3 id="0-引言"><a href="#0-引言" class="headerlink" title="0 引言"></a>0 引言</h3><blockquote>
<p>我们已经学完</p>
<ul>
<li><p>Java基础</p>
</li>
<li><p>web服务器(tomcat+servlet)</p>
</li>
<li><p>数据库,jdbc</p>
</li>
<li><p>html,css,js,jq</p>
</li>
<li><p>项目管理工具maven</p>
</li>
</ul>
<hr>
<p>以上这些技术,已经可以写项目,写B&#x2F;S项目</p>
<p>写页面太慢了,有点丑</p>
<p>所以要使用现成的,提供好的,前端组件或模块 —&gt; 拿来即用</p>
</blockquote>
<h3 id="Layui"><a href="#Layui" class="headerlink" title="Layui"></a>Layui</h3><h3 id="1-介绍"><a href="#1-介绍" class="headerlink" title="1 介绍"></a>1 介绍</h3><blockquote>
<p>layui（谐音：类 UI) 是一套开源的Web UI解决方案，采用自身经典的<code>模块化</code>规范，并遵循原生HTML&#x2F;CSS&#x2F;JS的开发方式，<code>常适合网页界面的快速开发</code>。layui 区别于那些基于<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/MVVM/96310?fromModule=lemma_inlink">MVVM</a> 底层的前端框架，它更多是<code>面向后端开发者</code>，无需涉足前端各种工具，只需面对浏览器本身，让一切所需要的元素与交互。</p>
<p>2021年9月，layui 官网发布公告称，layui 官网 2021 年 10 月 13 日 进行下线，届时，包括新版下载、文档和示例在内的所有框架日常维护工作，将全部迁移到 Github 和 Gitee。</p>
<hr>
<p>虽然没有官网,但是”网友”都自己又重新部署了一些网站,内容是layui一模一样</p>
<p><a target="_blank" rel="noopener" href="http://layui.winxapp.cn/">Layui - 经典开源模块化前端 UI 框架 (winxapp.cn)</a></p>
<p><a target="_blank" rel="noopener" href="https://layuion.com/">Layui - 经典开源模块化前端 UI 组件库 (layuion.com)</a></p>
</blockquote>
<blockquote>
<p>通过官网得知,layui框架的主要内容是[页面元素],[内置模块]两部分</p>
<ul>
<li>页面元素: 理解为一些静态html+css样式组件,(拿走即用)</li>
<li>内置模块<ul>
<li>layui 定义了一套更轻量的模块规范</li>
<li>将一些特殊功能,比如一些动态效果,封装成了一个一个的函数,一个功能就是一个模块,每个模块有对应的名字</li>
<li>用的时候需要加载这些函数或者说模块,然后再使用对应的功能</li>
</ul>
</li>
</ul>
</blockquote>
<h3 id="2-环境搭建"><a href="#2-环境搭建" class="headerlink" title="2 环境搭建"></a>2 环境搭建</h3><h4 id="2-1-下载"><a href="#2-1-下载" class="headerlink" title="2.1 下载"></a>2.1 下载</h4><blockquote>
<p><a target="_blank" rel="noopener" href="https://layuion.com/">Layui - 经典开源模块化前端 UI 组件库 (layuion.com)</a></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091707225.png" alt="image-20221202094709019"></p>
</blockquote>
<h4 id="2-2-解压"><a href="#2-2-解压" class="headerlink" title="2.2 解压"></a>2.2 解压</h4><blockquote>
<p>将上一步下载的压缩包,解压得到如下结构文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">|-layui</span><br><span class="line">|---css        </span><br><span class="line">|------modules</span><br><span class="line">|------layui.css // 核心样式文件</span><br><span class="line">|---font       </span><br><span class="line">|---layui.js      // 核心js库</span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="2-3-项目搭建"><a href="#2-3-项目搭建" class="headerlink" title="2.3 项目搭建"></a>2.3 项目搭建</h4><p>开发前端页面,工具可以使用HBuilder,VSCode,IDEA.</p>
<p>为了配合后面写项目,今天就使用IDEA来开发</p>
<h5 id="2-3-1-创建javaweb项目"><a href="#2-3-1-创建javaweb项目" class="headerlink" title="2.3.1 创建javaweb项目"></a>2.3.1 创建javaweb项目</h5><ul>
<li>创建maven-web项目</li>
<li>暂时不用导入依赖(因为不写java代码)</li>
<li>配置tomcat,部署项目</li>
</ul>
<h5 id="2-3-2-导入layui资源"><a href="#2-3-2-导入layui资源" class="headerlink" title="2.3.2 导入layui资源"></a>2.3.2 导入layui资源</h5><p>静态资源(html&#x2F;css&#x2F;js&#x2F;各种图片)放在项目webapp下</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091707229.png" alt="image-20221202100026861" style="zoom:67%;" />

<h5 id="2-3-3-页面中引入layui"><a href="#2-3-3-页面中引入layui" class="headerlink" title="2.3.3 页面中引入layui"></a>2.3.3 页面中引入layui</h5><blockquote>
<p>只需要在页面中引入</p>
<ul>
<li>layui.css</li>
<li>layui.js</li>
</ul>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 引入layui.css核心样式 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;/layui/css/layui.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 在此处写主要内容 --&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 引入layui.js核心 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;/layui/layui.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-入门使用"><a href="#3-入门使用" class="headerlink" title="3 入门使用"></a>3 入门使用</h3><blockquote>
<p>演示: 使用模块弹出层,使用页面样式button</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 引入layui.css核心样式 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;/layui/css/layui.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 在此处写主要内容 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;layui-btn&quot;</span>&gt;</span>一个标准的按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;layui-btn&quot;</span>&gt;</span>一个可跳转的按钮<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 引入layui.js核心 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;/layui/layui.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- layui模块 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    layui.<span class="title function_">use</span>([<span class="string">&#x27;layer&#x27;</span>], <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> layer = layui.<span class="property">layer</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        layer.<span class="title function_">msg</span>(<span class="string">&#x27;Hello World - layui&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="4-页面元素"><a href="#4-页面元素" class="headerlink" title="4 页面元素"></a>4 页面元素</h3><blockquote>
<p>页面元素: 理解为一些静态html+css样式组件,(拿走即用)</p>
</blockquote>
<h4 id="4-1-布局"><a href="#4-1-布局" class="headerlink" title="4.1 布局"></a>4.1 布局</h4><blockquote>
<p>layui有栅格系统,采用业界比较常见的 12 等分规则</p>
</blockquote>
<blockquote>
<p>布局容器</p>
<ul>
<li><em>class&#x3D;”layui-container”</em>  水平居中,两边有留白</li>
<li><em>class&#x3D;”layui-fluid”</em>       铺满全屏</li>
</ul>
<hr>
<p>栅格系统要配合容器使用,先定义容器,容器中定义行,行内定义列</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>布局<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 引入layui.css核心样式 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;/layui/css/layui.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 在此处写主要内容 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 1先写容器(layui-container : 水平居中) --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-container&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background-color: red;height: 300px&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--2 容器内写行</span></span><br><span class="line"><span class="comment">        行 layui-row</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-row&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background-color: #00f7de;height: 200px;&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--3 行内写列</span></span><br><span class="line"><span class="comment">            layui-col-md*</span></span><br><span class="line"><span class="comment">            总共12列</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-col-md9&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background-color: #01aaed&quot;</span>&gt;</span></span><br><span class="line">            9/12</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-col-md3&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background-color: #009688&quot;</span>&gt;</span></span><br><span class="line">            3/12</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 1先写容器</span></span><br><span class="line"><span class="comment">    layui-fluid : 铺满全屏</span></span><br><span class="line"><span class="comment"> --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-fluid&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background-color: red;height: 300px&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--2 容器内写行--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-row&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background-color: #00f7de;height: 200px;&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--3 行内写列--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-col-md9&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background-color: #01aaed&quot;</span>&gt;</span></span><br><span class="line">            9/12</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-col-md3&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background-color: #009688&quot;</span>&gt;</span></span><br><span class="line">            3/12</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-container&quot;</span> <span class="attr">style</span>=<span class="string">&quot;height: 300px&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--2 容器内写行</span></span><br><span class="line"><span class="comment">        layui-col-space10 单元格间距</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-row layui-col-space10&quot;</span> <span class="attr">style</span>=<span class="string">&quot;height: 150px;&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--3 行内写列--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;div class=&quot;layui-col-md4&quot; style=&quot;background-color: #01aaed;height: 150px;&quot;&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            1/3--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;/div&gt;--&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 偏移量layui-col-md-offset4 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-col-md4 layui-col-md-offset4&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background-color: #009688;height: 150px;&quot;</span>&gt;</span></span><br><span class="line">            1/3</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;div class=&quot;layui-col-md4&quot; style=&quot;background-color: #01aaed;height: 150px;&quot;&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            1/3--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;/div&gt;--&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--2 容器内写行--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-row&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background-color: #00f7de;height: 150px;&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--3 行内写列--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-col-md8&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background-color: #01aaed;height: 150px;&quot;</span>&gt;</span></span><br><span class="line">            2/3</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-col-md4&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background-color: #009688;height: 150px;&quot;</span>&gt;</span></span><br><span class="line">            1/3</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 引入layui.js核心 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;/layui/layui.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="4-2-图标"><a href="#4-2-图标" class="headerlink" title="4.2 图标"></a>4.2 图标</h4><blockquote>
<p>通过对一个内联元素（一般推荐用 <em>i</em>标签）设定 *class&#x3D;”layui-icon”*，来定义一个图标，然后对元素加上图标对应的 <em>font-class</em>，即可显示出你想要的图标，譬如：</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;border: #01aaed 2px solid;height: 300px;width: 300px&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;layui-icon layui-icon-face-smile&quot;</span> <span class="attr">style</span>=<span class="string">&quot;font-size: 30px; color: #FF5722;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;layui-icon layui-icon-heart-fill&quot;</span> <span class="attr">style</span>=<span class="string">&quot;font-size: 60px; color: #009688;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="4-3-按钮"><a href="#4-3-按钮" class="headerlink" title="4.3 按钮"></a>4.3 按钮</h4><blockquote>
<p>向<code>任意HTML元素</code>设定*class&#x3D;”layui-btn”<em>，建立一个基础按钮。通过<code>追加格式</code>为</em>layui-btn-{type}*的class来定义其它按钮风格。</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;layui-btn&quot;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;layui-btn&quot;</span>&gt;</span>a标签,链接<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;layui-btn&quot;</span>&gt;</span>i标签<span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;layui-btn layui-btn-primary&quot;</span>&gt;</span>按钮-原始<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;layui-btn layui-btn-normal&quot;</span>&gt;</span>按钮-normal<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;layui-btn layui-btn-warm&quot;</span>&gt;</span>按钮-warm<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;layui-btn layui-btn-danger&quot;</span>&gt;</span>按钮-danger<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;layui-btn layui-btn-disabled&quot;</span>&gt;</span>按钮-layui-btn-disabled<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="4-4-表单"><a href="#4-4-表单" class="headerlink" title="4.4 表单"></a>4.4 表单</h4><blockquote>
<p>在一个容器中设定 <em>class&#x3D;”layui-form”</em> 来标识一个表单元素块，通过规范好的HTML结构及CSS类，来组装成各式各样的表单元素，并通过内置的 <code>form模块</code> 来完成各种交互。</p>
</blockquote>
<blockquote>
<p>依赖加载模块：<a target="_blank" rel="noopener" href="https://layuion.com/docs/modules/form.html">form</a> （请注意：如果不加载form模块，select、checkbox、radio等将无法显示，并且无法使用form相关功能）</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>表单<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;/layui/css/layui.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-container&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-row&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-col-md6 layui-col-md-offset3&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">form</span> <span class="attr">class</span>=<span class="string">&quot;layui-form&quot;</span> <span class="attr">action</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-label&quot;</span>&gt;</span>输入框<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-block&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">required</span> <span class="attr">lay-verify</span>=<span class="string">&quot;required&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入标题&quot;</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span></span></span><br><span class="line"><span class="tag">                               <span class="attr">class</span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-label&quot;</span>&gt;</span>密码框<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-inline&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">required</span> <span class="attr">lay-verify</span>=<span class="string">&quot;required&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入密码&quot;</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span></span></span><br><span class="line"><span class="tag">                               <span class="attr">class</span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-mid layui-word-aux&quot;</span>&gt;</span>辅助文字<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-label&quot;</span>&gt;</span>选择框<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-block&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span>=<span class="string">&quot;city&quot;</span> <span class="attr">lay-verify</span>=<span class="string">&quot;required&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;0&quot;</span>&gt;</span>北京<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>&gt;</span>上海<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;2&quot;</span>&gt;</span>广州<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;3&quot;</span>&gt;</span>深圳<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;4&quot;</span>&gt;</span>杭州<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-label&quot;</span>&gt;</span>复选框<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-block&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;like[write]&quot;</span> <span class="attr">title</span>=<span class="string">&quot;写作&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;like[read]&quot;</span> <span class="attr">title</span>=<span class="string">&quot;阅读&quot;</span> <span class="attr">checked</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;like[dai]&quot;</span> <span class="attr">title</span>=<span class="string">&quot;发呆&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-label&quot;</span>&gt;</span>开关<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-block&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;switch&quot;</span> <span class="attr">lay-skin</span>=<span class="string">&quot;switch&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-label&quot;</span>&gt;</span>单选框<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-block&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">value</span>=<span class="string">&quot;男&quot;</span> <span class="attr">title</span>=<span class="string">&quot;男&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">value</span>=<span class="string">&quot;女&quot;</span> <span class="attr">title</span>=<span class="string">&quot;女&quot;</span> <span class="attr">checked</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-item layui-form-text&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-label&quot;</span>&gt;</span>文本域<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-block&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">name</span>=<span class="string">&quot;desc&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入内容&quot;</span> <span class="attr">class</span>=<span class="string">&quot;layui-textarea&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-block&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;layui-btn&quot;</span> <span class="attr">lay-submit</span> <span class="attr">lay-filter</span>=<span class="string">&quot;formDemo&quot;</span>&gt;</span>立即提交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;reset&quot;</span> <span class="attr">class</span>=<span class="string">&quot;layui-btn layui-btn-primary&quot;</span>&gt;</span>重置<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;/layui/layui.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 加载form模块,渲染出select、checkbox、radio等效果</span></span></span><br><span class="line"><span class="language-javascript">    layui.<span class="title function_">use</span>(<span class="string">&#x27;form&#x27;</span>,<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 取出form对象</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> form = layui.<span class="property">form</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="4-5-导航"><a href="#4-5-导航" class="headerlink" title="4.5 导航"></a>4.5 导航</h4><blockquote>
<p>导航一般指页面引导性频道集合，多以菜单的形式呈现，可应用于头部和侧边，是整个网页画龙点晴般的存在。面包屑结构简单，支持自定义分隔符。</p>
<hr>
<p>千万不要忘了加载 <code>element</code>模块。虽然大部分行为都是在加载完该模块后自动完成的，但一些交互操作，如呼出二级菜单等，需借助element模块才能使用</p>
</blockquote>
<blockquote>
<p>通过对导航追加CSS背景类，让导航呈现不同的主题色</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//如定义一个墨绿背景色的导航</span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;layui-nav layui-bg-green&quot;</span> <span class="attr">lay-filter</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">…</span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>layui-bg-cyan<em>（藏青）、</em>layui-bg-molv<em>（墨绿）、</em>layui-bg-blue*（艳蓝）</li>
</ul>
</blockquote>
<p>水平、垂直、侧边三个导航的HTML结构是完全一样的，不同的是：</p>
<blockquote>
<p>垂直导航需要追加class：<em>layui-nav-tree</em><br>侧边导航需要追加class：<em>layui-nav-tree layui-nav-side</em></p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>导航<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;/layui/css/layui.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;layui-nav layui-bg-green layui-nav-tree layui-nav-side&quot;</span> <span class="attr">lay-filter</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;layui-nav-item&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>最新活动<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;layui-nav-item layui-this&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>产品<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;layui-nav-item&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>大数据<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;layui-nav-item&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span>&gt;</span>解决方案<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dl</span> <span class="attr">class</span>=<span class="string">&quot;layui-nav-child&quot;</span>&gt;</span> <span class="comment">&lt;!-- 二级菜单 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dd</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>移动模块<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dd</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>后台模版<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dd</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>电商平台<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dl</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;layui-nav-item&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>社区<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;/layui/layui.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 【一定注意：加载element模块】</span></span></span><br><span class="line"><span class="language-javascript">    layui.<span class="title function_">use</span>(<span class="string">&#x27;element&#x27;</span>,<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> element = layui.<span class="property">element</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="4-6-表格"><a href="#4-6-表格" class="headerlink" title="4.6 表格"></a>4.6 表格</h4><blockquote>
<p>现在使用的是table的样式,是静态效果,要想有动态效果,比如加载数据,表格排序需要使用<code>table</code>模块</p>
</blockquote>
<p>代码:  看文档</p>
<h3 id="5-内置模块"><a href="#5-内置模块" class="headerlink" title="5 内置模块"></a>5 内置模块</h3><blockquote>
<p>内置模块</p>
<ul>
<li>layui 定义了一套更轻量的模块规范</li>
<li>将一些特殊功能,比如一些动态效果,封装成了一个一个的函数,一个功能就是一个模块,每个模块有对应的名字</li>
<li>用的时候需要加载这些函数或者说模块,然后再使用对应的功能</li>
</ul>
</blockquote>
<p>使用模块的语法</p>
<ul>
<li>要先加载模块,layui 通过 use 方法加载模块</li>
<li>再获得对应的模块对象</li>
<li>在use方法的回调中完成业务</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 1 加载模块,可以一次加载多个模块,此时使用数组</span></span></span><br><span class="line"><span class="language-javascript">    layui.<span class="title function_">use</span>([<span class="string">&#x27;form&#x27;</span>,<span class="string">&#x27;layer&#x27;</span>,<span class="string">&#x27;table&#x27;</span>],<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">       <span class="comment">// 2获得对应的模块对象</span></span></span><br><span class="line"><span class="language-javascript">       <span class="keyword">var</span> form = layui.<span class="property">form</span>;</span></span><br><span class="line"><span class="language-javascript">       <span class="keyword">var</span> layer = layui.<span class="property">layer</span>;</span></span><br><span class="line"><span class="language-javascript">       <span class="keyword">var</span> table = layui.<span class="property">table</span>;</span></span><br><span class="line"><span class="language-javascript">    </span></span><br><span class="line"><span class="language-javascript">       <span class="comment">// 3 完成一些业务</span></span></span><br><span class="line"><span class="language-javascript">       form.<span class="title function_">on</span>(<span class="string">&#x27;submit(formDemo)&#x27;</span>,<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">           <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">       &#125;)</span></span><br><span class="line"><span class="language-javascript">     </span></span><br><span class="line"><span class="language-javascript">       layer.<span class="title function_">msg</span>();</span></span><br><span class="line"><span class="language-javascript">       layer.<span class="title function_">confirm</span>();</span></span><br><span class="line"><span class="language-javascript">       layer.<span class="title function_">alert</span>();</span></span><br><span class="line"><span class="language-javascript">    </span></span><br><span class="line"><span class="language-javascript">       table.<span class="title function_">render</span>()</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="5-1-弹出层"><a href="#5-1-弹出层" class="headerlink" title="5.1 弹出层"></a>5.1 弹出层</h4><blockquote>
<p>弹出层,模块名layer</p>
</blockquote>
<blockquote>
<p>弹出层方法</p>
<ul>
<li><p>layer.open(options)</p>
</li>
<li><p>layer.msg(content,options,end)</p>
</li>
<li><p>layer.alert(content,options,end)</p>
</li>
<li><p>layer.confirm(content,options,yes,end)</p>
</li>
</ul>
</blockquote>
<p>layer.confirm</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;/layui/layui.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 1 加载模块</span></span></span><br><span class="line"><span class="language-javascript">  layui.<span class="title function_">use</span>(<span class="string">&#x27;layer&#x27;</span>,<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 2 获得对象</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> layer = layui.<span class="property">layer</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 3 使用</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// layer.msg(&quot;这是layer弹出&quot;)</span></span></span><br><span class="line"><span class="language-javascript">      layer.<span class="title function_">confirm</span>(<span class="string">&quot;是否删除?&quot;</span>,&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">area</span>: [<span class="string">&#x27;500px&#x27;</span>, <span class="string">&#x27;300px&#x27;</span>],</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">title</span>:<span class="string">&quot;删除???&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">skin</span>:<span class="string">&quot;layui-layer-molv&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">shade</span>: [<span class="number">0.5</span>, <span class="string">&#x27;#393D49&#x27;</span>],</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">shadeClose</span>:<span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">      &#125;,<span class="keyword">function</span> (<span class="params">index</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;确定删除&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// 将来发ajax请求,后台删除数据</span></span></span><br><span class="line"><span class="language-javascript">          layer.<span class="title function_">close</span>(index);</span></span><br><span class="line"><span class="language-javascript">      &#125;,<span class="keyword">function</span> (<span class="params">index</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;取消删除&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">          layer.<span class="title function_">close</span>(index);</span></span><br><span class="line"><span class="language-javascript">      &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>layer.open(options)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">layer.<span class="title function_">open</span>(&#123;</span><br><span class="line">    <span class="attr">type</span>:<span class="number">0</span>, <span class="comment">// 0 默认框</span></span><br><span class="line">    <span class="attr">content</span>:<span class="string">&quot;这是一个open弹框&quot;</span>,</span><br><span class="line">    <span class="attr">title</span>:<span class="string">&quot;open&quot;</span>,</span><br><span class="line">    <span class="attr">area</span>:[<span class="string">&#x27;500px&#x27;</span>, <span class="string">&#x27;300px&#x27;</span>],</span><br><span class="line">    <span class="attr">yes</span>:<span class="keyword">function</span> (<span class="params">index</span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;确定...&quot;</span>)</span><br><span class="line">        layer.<span class="title function_">close</span>(index) <span class="comment">// 关闭弹出层</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">cancel</span>:<span class="keyword">function</span> (<span class="params">index</span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;取消...&quot;</span>)</span><br><span class="line">        layer.<span class="title function_">close</span>(index)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>layer.open(options) 弹出一个页面,例如添加页面</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">layer.<span class="title function_">open</span>(&#123;</span><br><span class="line">    <span class="attr">type</span>:<span class="number">2</span>, <span class="comment">// 2 iframe框架层</span></span><br><span class="line">    <span class="attr">content</span>:<span class="string">&quot;http://localhost:8080/02bd.html&quot;</span>, <span class="comment">// 框架内显示的页面</span></span><br><span class="line">    <span class="attr">area</span>:[<span class="string">&#x27;500px&#x27;</span>,<span class="string">&#x27;600px&#x27;</span>]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<h4 id="5-2-日期"><a href="#5-2-日期" class="headerlink" title="5.2 日期"></a>5.2 日期</h4><blockquote>
<p>模块名: laydate</p>
</blockquote>
<ul>
<li>写一个input输入框,设置一个id</li>
<li>加载模块,获得对象laydate</li>
<li>使用laydate对象,<code>渲染</code>日期框效果</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;test&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;/layui/layui.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    layui.<span class="title function_">use</span>(<span class="string">&#x27;laydate&#x27;</span>,<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> laydate = layui.<span class="property">laydate</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        laydate.<span class="title function_">render</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">elem</span>:<span class="string">&quot;#test&quot;</span>,  <span class="comment">//  绑定元素</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">type</span>:<span class="string">&quot;datetime&quot;</span>, <span class="comment">// 选择的日期类型</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">range</span>:<span class="literal">false</span>,     <span class="comment">// 是否开启范围选择</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">format</span>:<span class="string">&quot;yyyy年MM月dd日&quot;</span>  <span class="comment">// 日期格式</span></span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="5-3-表格"><a href="#5-3-表格" class="headerlink" title="5.3 表格"></a>5.3 表格</h4><blockquote>
<p>模块加载名称：table</p>
<p>用于在表格中对数据进行一系列动态化的操作</p>
</blockquote>
<p>使用步骤</p>
<ul>
<li>写一个空table标签,设置id</li>
<li>加载table模块,获得table对象</li>
<li>开始渲染</li>
</ul>
<h4 id="5-3-1-入门演示"><a href="#5-3-1-入门演示" class="headerlink" title="5.3.1 入门演示"></a>5.3.1 入门演示</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>表格<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;/layui/css/layui.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-row&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-col-md6 layui-col-md-offset3&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">table</span> <span class="attr">id</span>=<span class="string">&quot;test&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;/layui/layui.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    layui.<span class="title function_">use</span>(<span class="string">&quot;table&quot;</span>,<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> table = layui.<span class="property">table</span>;</span></span><br><span class="line"><span class="language-javascript">        table.<span class="title function_">render</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">elem</span>:<span class="string">&quot;#test&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">height</span>:<span class="number">312</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">url</span>:<span class="string">&quot;https://www.fastmock.site/mock/4aa2a624e009051fe726c20c2419c09b/layuidata/api/users&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">page</span>:<span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">cols</span>:[[</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">field</span>:<span class="string">&quot;id&quot;</span>,<span class="attr">title</span>:<span class="string">&quot;编号&quot;</span>,<span class="attr">width</span>:<span class="number">90</span>,<span class="attr">sort</span>:<span class="literal">true</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">field</span>:<span class="string">&quot;username&quot;</span>,<span class="attr">title</span>:<span class="string">&quot;用户名&quot;</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">field</span>:<span class="string">&quot;sex&quot;</span>,<span class="attr">title</span>:<span class="string">&quot;性别&quot;</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">field</span>:<span class="string">&quot;sign&quot;</span>,<span class="attr">title</span>:<span class="string">&quot;签名&quot;</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">field</span>:<span class="string">&quot;experience&quot;</span>,<span class="attr">title</span>:<span class="string">&quot;经验&quot;</span>&#125;</span></span><br><span class="line"><span class="language-javascript">            ]]</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">/**</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">     * 【非常重要】【非常重要】【非常重要】</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">     * 1 table渲染数据的前提,后台返回的数据格式一定是json</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">     * 2 且json格式必须是</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">     *  &#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">          &quot;code&quot;: 0,</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">          &quot;msg&quot;: &quot;&quot;,</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">          &quot;count&quot;: 1000,</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">          &quot;data&quot;: [&#123;&#125;, &#123;&#125;]</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        &#125;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">       ,如果不是,那么就需要通过parseData来转换</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">       3 code必须是0时,认为是成功,才会渲染出效果</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">     */</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="5-3-2-后台servlet接口"><a href="#5-3-2-后台servlet接口" class="headerlink" title="5.3.2 后台servlet接口"></a>5.3.2 后台servlet接口</h4><blockquote>
<p>ps: 后台接口,指的是前后端交互对接的口子,接口.也就是指后端控制层代码.</p>
</blockquote>
<blockquote>
<p>需求: 前端使用layui.table模块,加载后台数据并在前端展现.</p>
<hr>
<p>后台代码编写,就是三层架构(servlet+service+dao),返回一个json数据</p>
</blockquote>
<p>三层架构的代码不再粘贴</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ResultData</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> code;</span><br><span class="line">    <span class="keyword">private</span> String msg;</span><br><span class="line">    <span class="keyword">private</span> Object data;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> ResultData <span class="title function_">fail</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">ResultData</span> <span class="variable">resultData</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ResultData</span>( );</span><br><span class="line">        resultData.setCode(<span class="number">500</span>);</span><br><span class="line">        resultData.setMsg(<span class="string">&quot;失败&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> resultData;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> ResultData <span class="title function_">ok</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">ResultData</span> <span class="variable">resultData</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ResultData</span>( );</span><br><span class="line">        resultData.setCode(<span class="number">200</span>);</span><br><span class="line">        resultData.setMsg(<span class="string">&quot;成功&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> resultData;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> ResultData <span class="title function_">ok</span><span class="params">(Object data)</span>&#123;</span><br><span class="line">        <span class="type">ResultData</span> <span class="variable">resultData</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ResultData</span>( );</span><br><span class="line">        resultData.setCode(<span class="number">200</span>);</span><br><span class="line">        resultData.setMsg(<span class="string">&quot;成功&quot;</span>);</span><br><span class="line">        resultData.setData(data);</span><br><span class="line">        <span class="keyword">return</span> resultData;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// setter getter...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="5-3-3-转换返回的数据格式"><a href="#5-3-3-转换返回的数据格式" class="headerlink" title="5.3.3 转换返回的数据格式"></a>5.3.3 转换返回的数据格式</h4><p>table 组件默认规定的数据格式为：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;code&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span>  <span class="comment">// 返回0才是成功</span></span><br><span class="line">  <span class="attr">&quot;msg&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;count&quot;</span><span class="punctuation">:</span> <span class="number">1000</span><span class="punctuation">,</span>  <span class="comment">// 数据条数,分页中使用</span></span><br><span class="line">  <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>接口返回的数据格式并不一定都符合 table 默认规定的格式，比如我们自己的返回值</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">	<span class="attr">&quot;code&quot;</span><span class="punctuation">:</span> <span class="number">200</span><span class="punctuation">,</span> <span class="comment">// 后台java返回200是成功</span></span><br><span class="line">	<span class="attr">&quot;msg&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">	<span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span><span class="punctuation">&#125;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>那么需要借助 parseData 回调函数将其解析成 table 组件所规定的数据格式</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">table.<span class="title function_">render</span>(&#123;</span><br><span class="line">  <span class="attr">elem</span>: <span class="string">&#x27;#demp&#x27;</span></span><br><span class="line">  ,<span class="attr">url</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">  ,<span class="attr">parseData</span>: <span class="keyword">function</span>(<span class="params">res</span>)&#123; <span class="comment">//res 即为原始返回的数据</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="string">&quot;code&quot;</span>: res.<span class="property">code</span> == <span class="number">200</span> ? <span class="number">0</span> : -<span class="number">1</span>, <span class="comment">//解析接口状态</span></span><br><span class="line">      <span class="string">&quot;msg&quot;</span>: res.<span class="property">msg</span>, <span class="comment">//解析提示文本</span></span><br><span class="line">      <span class="string">&quot;count&quot;</span>: res.<span class="property">data</span>.<span class="property">length</span>, <span class="comment">//解析数据长度</span></span><br><span class="line">      <span class="string">&quot;data&quot;</span>: res.<span class="property">data</span> <span class="comment">//解析数据列表</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//,…… //其他参数</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="5-3-4-数据模板"><a href="#5-3-4-数据模板" class="headerlink" title="5.3.4 数据模板"></a>5.3.4 数据模板</h4><blockquote>
<p>table模板内,有一个参数templet,可以将后台返回的数据再转换成指定的数据返回给table</p>
</blockquote>
<blockquote>
<p>templet 函数，有一个参数 d（包含当前行数据及特定的额外字段）。如下所示：</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">table.<span class="title function_">render</span>(&#123;</span><br><span class="line">            <span class="attr">elem</span>:<span class="string">&quot;#test&quot;</span>,</span><br><span class="line">            <span class="attr">height</span>:<span class="number">312</span>,</span><br><span class="line">            <span class="attr">url</span>:<span class="string">&quot;http://localhost:8080/user/list&quot;</span>,</span><br><span class="line">            <span class="attr">page</span>:<span class="literal">true</span>,</span><br><span class="line">            <span class="attr">cols</span>:[[</span><br><span class="line">                &#123;<span class="attr">field</span>:<span class="string">&quot;id&quot;</span>,<span class="attr">title</span>:<span class="string">&quot;编号&quot;</span>,<span class="attr">width</span>:<span class="number">90</span>,<span class="attr">sort</span>:<span class="literal">true</span>&#125;,</span><br><span class="line">                &#123;<span class="attr">field</span>:<span class="string">&quot;username&quot;</span>,<span class="attr">title</span>:<span class="string">&quot;用户名&quot;</span>,<span class="attr">align</span>:<span class="string">&quot;center&quot;</span>&#125;,</span><br><span class="line">                &#123;<span class="attr">field</span>:<span class="string">&quot;password&quot;</span>,<span class="attr">title</span>:<span class="string">&quot;密码&quot;</span>&#125;,</span><br><span class="line">                &#123;<span class="attr">field</span>:<span class="string">&quot;phone&quot;</span>,<span class="attr">title</span>:<span class="string">&quot;手机号&quot;</span>&#125;,</span><br><span class="line">                &#123;<span class="attr">field</span>:<span class="string">&quot;createTime&quot;</span>,<span class="attr">title</span>:<span class="string">&quot;注册时间&quot;</span>,<span class="attr">templet</span>:<span class="keyword">function</span> (<span class="params">d</span>)&#123;</span><br><span class="line">                   <span class="comment">// console.log(&quot;d ==&gt;&quot; ,d);</span></span><br><span class="line">                   <span class="keyword">let</span> now = <span class="keyword">new</span> <span class="title class_">Date</span>(d.<span class="property">createTime</span>);</span><br><span class="line">                   <span class="keyword">let</span> year = now.<span class="title function_">getFullYear</span>();</span><br><span class="line">                   <span class="keyword">let</span> month = now.<span class="title function_">getMonth</span>() +<span class="number">1</span>;</span><br><span class="line">                   <span class="keyword">let</span> day = now.<span class="title function_">getDate</span>();</span><br><span class="line">                   <span class="keyword">return</span> year+<span class="string">&quot;年&quot;</span>+month+<span class="string">&quot;月&quot;</span>+day+<span class="string">&quot;日&quot;</span>;</span><br><span class="line">                &#125;&#125;,</span><br><span class="line">                &#123;<span class="attr">field</span>:<span class="string">&quot;money&quot;</span>,<span class="attr">title</span>:<span class="string">&quot;余额&quot;</span>,<span class="attr">sort</span>: <span class="literal">true</span>&#125;,</span><br><span class="line">                &#123;<span class="attr">field</span>:<span class="string">&quot;sex&quot;</span>,<span class="attr">title</span>:<span class="string">&quot;性别&quot;</span>,<span class="attr">templet</span>:<span class="keyword">function</span> (<span class="params">d</span>)&#123;</span><br><span class="line">                    <span class="keyword">return</span> d.<span class="property">sex</span> == <span class="number">1</span> ? <span class="string">&#x27;男&#x27;</span>:<span class="string">&#x27;女&#x27;</span>;</span><br><span class="line">                &#125;&#125;</span><br><span class="line">            ]],</span><br></pre></td></tr></table></figure>

<h4 id="5-3-5-分页数据"><a href="#5-3-5-分页数据" class="headerlink" title="5.3.5 分页数据"></a>5.3.5 分页数据</h4><blockquote>
<p>table.render中设置 page:true,开启分页</p>
<hr>
<p>page参数还可以设置为laypage模块中的参数<a target="_blank" rel="noopener" href="https://layuion.com/docs/modules/laypage.html#options">分页组件文档 - Layui (layuion.com)</a></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">table.<span class="title function_">render</span>(&#123;</span><br><span class="line">    <span class="attr">elem</span>:<span class="string">&quot;#test&quot;</span>,</span><br><span class="line">    <span class="attr">height</span>:<span class="number">312</span>,</span><br><span class="line">    <span class="attr">url</span>:<span class="string">&quot;http://localhost:8080/user/list&quot;</span>,</span><br><span class="line">    <span class="comment">// page:true,</span></span><br><span class="line">    <span class="attr">page</span>:&#123;</span><br><span class="line">        <span class="attr">count</span>: <span class="number">2000</span>,</span><br><span class="line">        <span class="attr">limit</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="attr">limits</span>:[<span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">10</span>],</span><br><span class="line">        <span class="attr">first</span>:<span class="string">&quot;首页&quot;</span>,</span><br><span class="line">        <span class="attr">last</span>:<span class="string">&quot;尾页&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<blockquote>
<p>table.render在渲染数据时,发送请求时会自动拼接出分页参数</p>
<p>?page&#x3D;1&amp;limit&#x3D;10 意思是指,从第一页展现,每页展现10条</p>
</blockquote>
<h4 id="5-3-6-操作按钮"><a href="#5-3-6-操作按钮" class="headerlink" title="5.3.6 操作按钮"></a>5.3.6 操作按钮</h4><blockquote>
<p>layui.table提供两种方案来给表格提供操作按钮</p>
<ul>
<li>通过toolbar,指定按钮脚本</li>
<li>通过templet,自己拼接</li>
</ul>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091707231.png" alt="image-20221203105641196"></p>
<p><strong>方案一:toolbar</strong></p>
<p>1)设置按钮脚本</p>
<p>2)使用toolbar引用脚本</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 按钮脚本 </span></span><br><span class="line"><span class="comment">注意,id能使用短横线,btn-script</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/html&quot;</span> <span class="attr">id</span>=<span class="string">&quot;btnScript&quot;</span>&gt;</span><span class="language-handlebars"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;layui-btn layui-btn-xs layui-btn-warm&quot;</span>&gt;</span>编辑<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;layui-btn layui-btn-xs layui-btn-danger&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"></span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/layui/layui.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    layui.<span class="title function_">use</span>(<span class="string">&quot;table&quot;</span>,<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> table = layui.<span class="property">table</span>;</span></span><br><span class="line"><span class="language-javascript">        table.<span class="title function_">render</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">elem</span>:<span class="string">&quot;#test&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">height</span>:<span class="number">312</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">url</span>:<span class="string">&quot;http://localhost:8080/user/list&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">cols</span>:[[</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// ....</span></span></span><br><span class="line"><span class="language-javascript">                &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">title</span>:<span class="string">&quot;操作&quot;</span>,<span class="attr">toolbar</span>:<span class="string">&quot;#btnScript&quot;</span></span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            ]],</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"> </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>方案二: templet自己拼接</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">title</span>:<span class="string">&quot;操作&quot;</span>,<span class="attr">templet</span>:<span class="keyword">function</span> (<span class="params">d</span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> str = <span class="string">&quot;&lt;a class=\&quot;layui-btn layui-btn-xs layui-btn-warm\&quot;&gt;编辑&lt;/a&gt;&quot;</span>;</span><br><span class="line">    str += <span class="string">&quot; &lt;a class=\&quot;layui-btn layui-btn-xs layui-btn-danger\&quot;&gt;删除&lt;/a&gt;&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> str;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="5-3-7-操作按钮事件"><a href="#5-3-7-操作按钮事件" class="headerlink" title="5.3.7 操作按钮事件"></a>5.3.7 操作按钮事件</h4><blockquote>
<p>layui有自己的事件处理方式</p>
<ul>
<li><p>给table标签设置过滤器 lay-filter&#x3D;”随意名”</p>
<ul>
<li><pre><code class="html">&lt;table class=&quot;layui-table&quot; lay-filter=&quot;test&quot;&gt;&lt;/table&gt; 
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 设置事件源</span><br><span class="line"></span><br><span class="line">  - 在按钮标签中设置 lay-event=&quot;自己随便写的事件名&quot;</span><br><span class="line"></span><br><span class="line">- 绑定事件</span><br><span class="line"></span><br><span class="line">  - table.on(&#x27;事件(filter)&#x27;)</span><br><span class="line">  - table.on(&#x27;toolbar(test)&#x27;, function(obj)&#123;&#125;</span><br><span class="line"></span><br><span class="line">```html</span><br><span class="line">&lt;table id=&quot;test&quot; lay-filter=&quot;myTableFilter&quot;&gt;&lt;/table&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">   layui.use([&quot;table&quot;,&quot;layer&quot;,&quot;jquery&quot;],function ()&#123;</span><br><span class="line">       var table = layui.table;</span><br><span class="line">       var layer = layui.layer;</span><br><span class="line">       var $ = layui.jquery;</span><br><span class="line">       table.render(&#123;</span><br><span class="line">           elem:&quot;#test&quot;,</span><br><span class="line">           height:312,</span><br><span class="line">           url:&quot;http://localhost:8080/user/list&quot;,</span><br><span class="line">           page:true,</span><br><span class="line">           cols:[[</span><br><span class="line">               &#123;field:&quot;id&quot;,title:&quot;编号&quot;,width:90,sort:true&#125;,</span><br><span class="line">               // ....</span><br><span class="line">               &#123;</span><br><span class="line">                   title:&quot;操作&quot;,templet:function (d)&#123;</span><br><span class="line">                       let str = &quot;&lt;a class=\&quot;layui-btn layui-btn-xs layui-btn-warm\&quot; lay-event=&#x27;edit&#x27;&gt;编辑&lt;/a&gt;&quot;;</span><br><span class="line">                       str += &quot; &lt;a class=\&quot;layui-btn layui-btn-xs layui-btn-danger\&quot; lay-event=&#x27;delete&#x27;&gt;删除&lt;/a&gt;&quot;;</span><br><span class="line">                       return str;</span><br><span class="line">                   &#125;</span><br><span class="line">               &#125;</span><br><span class="line">           ]]</span><br><span class="line">       // 给tool,即操作按钮绑定事件</span><br><span class="line">       table.on(&#x27;tool(myTableFilter)&#x27;,function (obj)&#123;</span><br><span class="line">           // console.log(&quot;obj ==&gt;&quot; , obj) // obj 是事件触发的对象,内含当前行数据以及自定义事件名</span><br><span class="line">           if (obj.event == &#x27;edit&#x27;) &#123;</span><br><span class="line">               // 发送ajax请求</span><br><span class="line">               // $.ajax()</span><br><span class="line">               layer.msg(&quot;更新&quot;);</span><br><span class="line">           &#125; else if (obj.event == &quot;delete&quot;) &#123;</span><br><span class="line">               layer.confirm(&quot;删除?&quot;,function (index)&#123;</span><br><span class="line">                   console.log(&quot;确定删除!&quot;)</span><br><span class="line">                   layer.close(index);</span><br><span class="line">               &#125;,function (index)&#123;</span><br><span class="line">                   console.log(&quot;取消删除!&quot;)</span><br><span class="line">                   layer.close(index);</span><br><span class="line">               &#125;);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;)</span><br><span class="line">   &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
</li>
</ul>
</blockquote>
<blockquote>
<p>需要注意的!!!!</p>
<p>table.on(‘tool(myTableFilter)’</p>
<p>tool是固定的事件名,不能乱改</p>
<p>myTableFilter是table标签中filter的名字</p>
<hr>
<p>需要使用ajax发送请求的话,</p>
<p>1)项目中需要加入jquery.js文件</p>
<p>2)文件中需要使用script引用jquery文件</p>
<p>3)layui加载jquery模块</p>
<p>4)获得jquery对象就可以操作了</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091707240.png" alt="image-20221203114542470"></p>
</blockquote>
<h2 id="day22"><a href="#day22" class="headerlink" title="day22"></a>day22</h2><h3 id="今日内容-11"><a href="#今日内容-11" class="headerlink" title="今日内容"></a>今日内容</h3><blockquote>
<p>0 复习昨日</p>
<p>1 layui-CRUD练习</p>
</blockquote>
<h3 id="0-复习昨日-9"><a href="#0-复习昨日-9" class="headerlink" title="0 复习昨日"></a>0 复习昨日</h3><blockquote>
</blockquote>
<h3 id="1-开发流程"><a href="#1-开发流程" class="headerlink" title="1 开发流程"></a>1 开发流程</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091711490.jpg" alt="crud练习"></p>
<ul>
<li>需求分析<ul>
<li>增删改查 + 分页 + 模糊查询</li>
</ul>
</li>
<li>数据库<ul>
<li>tb_user</li>
</ul>
</li>
<li>技术<ul>
<li>servlet+jdbc</li>
<li>mysql</li>
<li>html+css+js+jq+ajax+layui</li>
</ul>
</li>
<li>工具<ul>
<li>idea,Navicat,浏览器</li>
</ul>
</li>
</ul>
<hr>
<ul>
<li>搭建环境<ul>
<li>依赖</li>
<li>工具类</li>
<li>实体类</li>
<li>配置文件</li>
</ul>
</li>
<li>前端</li>
<li>后端</li>
</ul>
<h3 id="2-搭建环境"><a href="#2-搭建环境" class="headerlink" title="2 搭建环境"></a>2 搭建环境</h3><h4 id="2-1-创建项目"><a href="#2-1-创建项目" class="headerlink" title="2.1 创建项目"></a>2.1 创建项目</h4><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091711486.png" alt="image-20221205150239332" style="zoom:67%;" />

<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091711495.png" alt="image-20221205150305605" style="zoom:67%;" />

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091711498.png" alt="image-20221205150425082"></p>
<h4 id="2-2-导入依赖"><a href="#2-2-导入依赖" class="headerlink" title="2.2 导入依赖"></a>2.2 导入依赖</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet.jsp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet.jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.47<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.46<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="2-3-配置文件"><a href="#2-3-配置文件" class="headerlink" title="2.3 配置文件"></a>2.3 配置文件</h4><p>jdbc.properties,放在main&#x2F;resources下</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">driverClass</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="attr">url</span>=<span class="string">jdbc:mysql://localhost:3306/java2217?useSSL=false</span></span><br><span class="line"><span class="attr">username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">password</span>=<span class="string">123456</span></span><br><span class="line"><span class="comment"># ----- 加入druid的一些连接配置</span></span><br><span class="line"><span class="comment">#&lt;!-- 初始化连接 --&gt;</span></span><br><span class="line"><span class="attr">initialSize</span>=<span class="string">10</span></span><br><span class="line"><span class="comment">#最大连接数量</span></span><br><span class="line"><span class="attr">maxActive</span>=<span class="string">50</span></span><br><span class="line"><span class="comment">#&lt;!-- 最小空闲连接 --&gt;</span></span><br><span class="line"><span class="attr">minIdle</span>=<span class="string">5</span></span><br><span class="line"><span class="comment">#&lt;!-- 超时等待时间以毫秒为单位 60000毫秒/1000等于60秒 --&gt;</span></span><br><span class="line"><span class="attr">maxWait</span>=<span class="string">5000</span></span><br></pre></td></tr></table></figure>

<h4 id="2-4-包结构"><a href="#2-4-包结构" class="headerlink" title="2.4 包结构"></a>2.4 包结构</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">|-src</span><br><span class="line">|---main</span><br><span class="line">|------java</span><br><span class="line">|---------com.qf</span><br><span class="line">|---------com.qf.model</span><br><span class="line">|---------com.qf.servlet</span><br><span class="line">|---------com.qf.service</span><br><span class="line">|---------com.qf.service.impl</span><br><span class="line">|---------com.qf.dao</span><br><span class="line">|---------com.qf.dao.impl</span><br><span class="line">|---------com.qf.util</span><br><span class="line">|---------com.qf.filter</span><br><span class="line">|------resources</span><br><span class="line">|------webapp</span><br><span class="line">-pom.xml</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091711497.png" alt="image-20221205151050184"></p>
<h4 id="2-5-实体类-工具类"><a href="#2-5-实体类-工具类" class="headerlink" title="2.5 实体类,工具类"></a>2.5 实体类,工具类</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> String phone;</span><br><span class="line">    <span class="keyword">private</span> Date createTime;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> money;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> sex;</span><br><span class="line">    <span class="comment">// setter getter   </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>DBUtil</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">...</span><br></pre></td></tr></table></figure>

<p>ResultData (符和前后端交互使用的json格式)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qf.util;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * --- 天道酬勤 ---</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> QiuShiju</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@desc</span> 封装的结果数据</span></span><br><span class="line"><span class="comment"> * --&gt; 符合layui默认模板格式</span></span><br><span class="line"><span class="comment"> * &#123;</span></span><br><span class="line"><span class="comment"> *   &quot;code&quot;: 0,</span></span><br><span class="line"><span class="comment"> *   &quot;msg&quot;: &quot;&quot;,</span></span><br><span class="line"><span class="comment"> *   &quot;count&quot;: 1000,</span></span><br><span class="line"><span class="comment"> *   &quot;data&quot;: [&#123;&#125;, &#123;&#125;]</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ResultData</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> code; <span class="comment">// 0是成功,其他都是不成功</span></span><br><span class="line">    <span class="keyword">private</span> String msg;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> count;</span><br><span class="line">    <span class="keyword">private</span> Object data;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ResultData</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> ResultData <span class="title function_">ok</span><span class="params">(Object data)</span> &#123;</span><br><span class="line">        <span class="type">ResultData</span> <span class="variable">resultData</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ResultData</span>( );</span><br><span class="line">        resultData.setCode(<span class="number">0</span>);</span><br><span class="line">        resultData.setMsg(<span class="string">&quot;成功&quot;</span>);</span><br><span class="line">        resultData.setData(data);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> resultData;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> ResultData <span class="title function_">ok</span><span class="params">(Object data,<span class="type">int</span> count)</span> &#123;</span><br><span class="line">        <span class="type">ResultData</span> <span class="variable">resultData</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ResultData</span>( );</span><br><span class="line">        resultData.setCode(<span class="number">0</span>);</span><br><span class="line">        resultData.setMsg(<span class="string">&quot;成功&quot;</span>);</span><br><span class="line">        resultData.setData(data);</span><br><span class="line">        resultData.setCount(count);</span><br><span class="line">        <span class="keyword">return</span> resultData;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> ResultData <span class="title function_">fail</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">ResultData</span> <span class="variable">resultData</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ResultData</span>( );</span><br><span class="line">        resultData.setCode(-<span class="number">1</span>);</span><br><span class="line">        resultData.setMsg(<span class="string">&quot;失败&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> resultData;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCode</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCode</span><span class="params">(<span class="type">int</span> code)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getMsg</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> msg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setMsg</span><span class="params">(String msg)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.msg = msg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCount</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCount</span><span class="params">(<span class="type">int</span> count)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.count = count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getData</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> data;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setData</span><span class="params">(Object data)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.data = data;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="2-6-拦截器"><a href="#2-6-拦截器" class="headerlink" title="2.6 拦截器"></a>2.6 拦截器</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qf.filter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebFilter;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * --- 天道酬勤 ---</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> QiuShiju</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@desc</span> 编码格式+内容类型过滤器</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebFilter(&quot;/*&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EncodingContentTypeFilter</span> <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest request, ServletResponse response, FilterChain chain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line"></span><br><span class="line">        request.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        <span class="comment">// 直接固定,每个响应都是json</span></span><br><span class="line">        response.setContentType(<span class="string">&quot;application/json;charset=UTF-8&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 放行</span></span><br><span class="line">        chain.doFilter(request,response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="2-7-前端环境"><a href="#2-7-前端环境" class="headerlink" title="2.7 前端环境"></a>2.7 前端环境</h4><ul>
<li>layui资源</li>
<li>jquery资源</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091711502.png" alt="image-20221205152951506"></p>
<h3 id="3-功能开发"><a href="#3-功能开发" class="headerlink" title="3 功能开发"></a>3 功能开发</h3><h4 id="3-1-首页"><a href="#3-1-首页" class="headerlink" title="3.1 首页"></a>3.1 首页</h4><blockquote>
<p>需求: 打开index.html展现所有用户数据</p>
</blockquote>
<p>前端页面</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;/layui/css/layui.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-container&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-row&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-col-md3 layui-col-md-offset5&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>用户管理系统<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-row&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-col-md10 layui-col-md-offset1&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 表格容器 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">table</span> <span class="attr">id</span>=<span class="string">&quot;userTable&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;/layui/layui.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    layui.<span class="title function_">use</span>([<span class="string">&quot;table&quot;</span>],<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> table = layui.<span class="property">table</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        table.<span class="title function_">render</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">elem</span>:<span class="string">&quot;#userTable&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">url</span>:<span class="string">&quot;/user/list&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">cols</span>:[[</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">field</span>: <span class="string">&quot;id&quot;</span>, <span class="attr">title</span>: <span class="string">&quot;ID&quot;</span>, <span class="attr">sort</span>: <span class="literal">true</span>,<span class="attr">width</span>:<span class="number">80</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">field</span>: <span class="string">&quot;username&quot;</span>, <span class="attr">title</span>: <span class="string">&quot;用户名&quot;</span>,<span class="attr">width</span>:<span class="number">100</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">field</span>: <span class="string">&quot;password&quot;</span>, <span class="attr">title</span>: <span class="string">&quot;密码&quot;</span>,<span class="attr">width</span>:<span class="number">100</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">field</span>: <span class="string">&quot;phone&quot;</span>, <span class="attr">title</span>: <span class="string">&quot;手机号&quot;</span>,<span class="attr">width</span>:<span class="number">120</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">field</span>: <span class="string">&quot;money&quot;</span>, <span class="attr">title</span>: <span class="string">&quot;余额&quot;</span>, <span class="attr">sort</span>: <span class="literal">true</span>,<span class="attr">width</span>:<span class="number">100</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">field</span>: <span class="string">&quot;sex&quot;</span>, <span class="attr">title</span>: <span class="string">&quot;性别&quot;</span>, <span class="attr">sort</span>: <span class="literal">true</span>,<span class="attr">width</span>:<span class="number">80</span>,<span class="attr">templet</span>:<span class="keyword">function</span>(<span class="params">obj</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// console.log(obj.sex)</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">return</span> obj.<span class="property">sex</span> == <span class="number">1</span>? <span class="string">&#x27;男&#x27;</span>:<span class="string">&#x27;女&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;&#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">field</span>: <span class="string">&quot;createTime&quot;</span>, <span class="attr">title</span>: <span class="string">&quot;注册时间&quot;</span>, <span class="attr">sort</span>: <span class="literal">true</span>,<span class="attr">templet</span>:<span class="keyword">function</span> (<span class="params">obj</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">let</span> date = <span class="keyword">new</span> <span class="title class_">Date</span>(obj.<span class="property">createTime</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">let</span> year = date.<span class="title function_">getFullYear</span>();</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">let</span> month = date.<span class="title function_">getMonth</span>() + <span class="number">1</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (month &lt; <span class="number">10</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        month = <span class="string">&quot;0&quot;</span>+month;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">let</span> day = date.<span class="title function_">getDate</span>();</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (day &lt; <span class="number">10</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        day = <span class="string">&quot;0&quot;</span>+day;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">return</span> year+<span class="string">&quot;-&quot;</span>+month+<span class="string">&quot;-&quot;</span>+day;</span></span><br><span class="line"><span class="language-javascript">                &#125;&#125;,</span></span><br><span class="line"><span class="language-javascript">            ]]</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>后端代码</p>
<p>UserListServlet</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qf.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSON;</span><br><span class="line"><span class="keyword">import</span> com.qf.service.UserService;</span><br><span class="line"><span class="keyword">import</span> com.qf.service.impl.UserServiceImpl;</span><br><span class="line"><span class="keyword">import</span> com.qf.util.ResultData;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * --- 天道酬勤 ---</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> QiuShiju</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@desc</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/user/list&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserListServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">UserService</span> <span class="variable">userService</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserServiceImpl</span>();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">// 接收参数</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 调用业务层</span></span><br><span class="line">        <span class="type">ResultData</span> <span class="variable">resultData</span> <span class="operator">=</span> userService.findAll();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 响应</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">jsonString</span> <span class="operator">=</span> JSON.toJSONString(resultData);</span><br><span class="line">        resp.getWriter().write(jsonString);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>UserService&amp;UserServiceImpl</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    ResultData <span class="title function_">findAll</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line">-----</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">UserDao</span> <span class="variable">userDao</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserDaoImpl</span>();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> ResultData <span class="title function_">findAll</span><span class="params">()</span> &#123;</span><br><span class="line">        List&lt;User&gt; list = userDao.findAll();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 后续还要改动..</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> ResultData.ok(list);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>UserDao&amp;UserDaoImpl</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line">    List&lt;User&gt; <span class="title function_">findAll</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">----------------------------------------</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">findAll</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">        List&lt;User&gt; list = DBUtil.selectAll(<span class="string">&quot;select * from tb_user&quot;</span>, User.class);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-2-添加"><a href="#3-2-添加" class="headerlink" title="3.2 添加"></a>3.2 添加</h4><p>前端</p>
<ol>
<li><p>设置添加按钮</p>
</li>
<li><p>绑定js事件,弹出层</p>
</li>
<li><p><strong>弹出层内加载user-add.html</strong></p>
</li>
<li><p>user-add.html里面写表单样式</p>
</li>
<li><p>绑定提交按钮,<strong>点击提交触发ajax事件</strong>,发送请求及数据</p>
</li>
<li><p>在user-add.html关闭弹出层</p>
</li>
<li><p>在index.html中等弹出层销毁后,再重新加载数据</p>
</li>
</ol>
<p>后端</p>
<ol start="6">
<li>接收数据,完成处理(servlet+service+dao)</li>
<li>作出响应</li>
</ol>
<h4 id="3-3-操作按钮"><a href="#3-3-操作按钮" class="headerlink" title="3.3 操作按钮"></a>3.3 操作按钮</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">title</span>:<span class="string">&quot;操作&quot;</span>,<span class="attr">templet</span>:<span class="keyword">function</span> (<span class="params">d</span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> str = <span class="string">&quot;&lt;a class=\&quot;layui-btn layui-btn-xs layui-btn-warm\&quot;&gt;编辑&lt;/a&gt;&quot;</span>;</span><br><span class="line">    str += <span class="string">&quot; &lt;a class=\&quot;layui-btn layui-btn-xs layui-btn-danger\&quot;&gt;删除&lt;/a&gt;&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> str;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091711934.png" alt="image-20221206092044027"></p>
<h4 id="3-4-删除"><a href="#3-4-删除" class="headerlink" title="3.4 删除"></a>3.4 删除</h4><p>前端</p>
<ol>
<li><p>点击删除按钮,弹出确认框</p>
<ol>
<li>给table设置lay-filter,并且给两个操作按钮设置lay-event</li>
<li>给表格绑定工具栏事件 table.on(“tool(过滤器)”,function(obj){})</li>
<li>通过event判断具体事件</li>
<li>layer弹出确认框</li>
</ol>
</li>
<li><p>点击取消,不删除,关闭弹出层</p>
</li>
<li><p>点击确定,使用ajax发送请求,<code>携带当前行的id</code>,执行删除</p>
</li>
<li><p>关闭弹出层,重新加载表格数据</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 表格点击事件</span></span><br><span class="line">table.<span class="title function_">on</span>(<span class="string">&quot;tool(userTableFilter)&quot;</span>,<span class="keyword">function</span> (<span class="params">obj</span>) &#123;</span><br><span class="line">    <span class="comment">// console.log(&quot;obj-event ==&gt;&quot;,obj)</span></span><br><span class="line">    <span class="keyword">if</span> (obj.<span class="property">event</span> == <span class="string">&quot;delete&quot;</span>) &#123;</span><br><span class="line">        layer.<span class="title function_">confirm</span>(<span class="string">&quot;确定删除吗?&quot;</span>,&#123;<span class="attr">icon</span>: <span class="number">3</span>, <span class="attr">title</span>:<span class="string">&#x27;提示&#x27;</span>&#125;,<span class="keyword">function</span> (<span class="params">index</span>)&#123;</span><br><span class="line">            <span class="comment">// 发请求执行删除</span></span><br><span class="line">            <span class="comment">// console.log(&quot;id ==&gt;&quot;,obj.data.id)</span></span><br><span class="line">            $.<span class="title function_">get</span>(<span class="string">&quot;/user/delete&quot;</span>,&#123;<span class="attr">id</span>:obj.<span class="property">data</span>.<span class="property">id</span>&#125;,<span class="keyword">function</span> (<span class="params">ret</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (ret.<span class="property">code</span> == <span class="number">0</span>) &#123;</span><br><span class="line">                    layer.<span class="title function_">msg</span>(<span class="string">&quot;删除成功!&quot;</span>)</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    layer.<span class="title function_">msg</span>(<span class="string">&quot;删除失败!&quot;</span>)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">            layer.<span class="title function_">close</span>(index);</span><br><span class="line">            table.<span class="title function_">reload</span>(<span class="string">&quot;userTable&quot;</span>)</span><br><span class="line">        &#125;,<span class="keyword">function</span> (<span class="params">index</span>)&#123;</span><br><span class="line">            layer.<span class="title function_">msg</span>(<span class="string">&quot;取消删除!&quot;</span>)</span><br><span class="line">            layer.<span class="title function_">close</span>(index);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(obj.<span class="property">event</span> == <span class="string">&quot;edit&quot;</span>) &#123;</span><br><span class="line">        <span class="comment">// 更新操作...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li>
</ol>
<p>后端</p>
<ol start="4">
<li>接收请求,接收id</li>
<li>servlet &lt;–&gt; service &lt;–&gt; dao</li>
<li>响应</li>
</ol>
<h4 id="3-5-更新"><a href="#3-5-更新" class="headerlink" title="3.5 更新"></a>3.5 更新</h4><h5 id="3-5-1-更新弹出层"><a href="#3-5-1-更新弹出层" class="headerlink" title="3.5.1 更新弹出层"></a>3.5.1 更新弹出层</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(obj.<span class="property">event</span> == <span class="string">&quot;edit&quot;</span>) &#123;</span><br><span class="line">    layer.<span class="title function_">open</span>(&#123;</span><br><span class="line">        <span class="attr">type</span>:<span class="number">2</span>,</span><br><span class="line">        <span class="attr">content</span>:<span class="string">&quot;user-edit.html&quot;</span>, </span><br><span class="line">        <span class="comment">// 新建user-edit.html页面(复制的user-add.html)</span></span><br><span class="line">        <span class="attr">area</span>: [<span class="string">&quot;400px&quot;</span>, <span class="string">&quot;500px&quot;</span>],</span><br><span class="line">        <span class="attr">title</span>:<span class="string">&quot;更新用户&quot;</span>,</span><br><span class="line">        <span class="attr">end</span>:<span class="keyword">function</span> (<span class="params"></span>)&#123;</span><br><span class="line">            <span class="comment">// 弹出层销毁时,重新加载表格数据</span></span><br><span class="line">            <span class="comment">// js方法</span></span><br><span class="line">            <span class="comment">// location.reload()</span></span><br><span class="line">            <span class="comment">// layui方法</span></span><br><span class="line">            <span class="comment">// 官方文档:https://layuion.com/docs/modules/table.html#reload</span></span><br><span class="line">            table.<span class="title function_">reload</span>(<span class="string">&quot;userTable&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>后续还要改动上面代码,现在只是先弹出更新层</p>
</blockquote>
<h5 id="3-5-2-更新页面回显数据"><a href="#3-5-2-更新页面回显数据" class="headerlink" title="3.5.2 更新页面回显数据"></a>3.5.2 更新页面回显数据</h5><p>弹出层出现后,在表单内回显数据</p>
<p>index.html</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(obj.<span class="property">event</span> == <span class="string">&quot;edit&quot;</span>) &#123;</span><br><span class="line">    layer.<span class="title function_">open</span>(&#123;</span><br><span class="line">        <span class="attr">type</span>:<span class="number">2</span>,</span><br><span class="line">        <span class="attr">content</span>:<span class="string">&quot;user-edit.html&quot;</span>,</span><br><span class="line">        <span class="attr">area</span>: [<span class="string">&quot;400px&quot;</span>, <span class="string">&quot;500px&quot;</span>],</span><br><span class="line">        <span class="attr">title</span>:<span class="string">&quot;更新用户&quot;</span>,</span><br><span class="line">        <span class="attr">success</span>:<span class="keyword">function</span>(<span class="params">layero, index</span>)&#123;</span><br><span class="line">            <span class="comment">// 弹出层提供一个方法,可以获得弹出的那个层的dom对象</span></span><br><span class="line">            <span class="comment">// 官方文档: https://layuion.com/docs/modules/layer.html#layer.getChildFrame</span></span><br><span class="line">            <span class="keyword">let</span> body = layer.<span class="title function_">getChildFrame</span>(<span class="string">&quot;body&quot;</span>, index);</span><br><span class="line">            <span class="comment">// body是user-edit.html页面的内容</span></span><br><span class="line">            <span class="keyword">let</span> userData = obj.<span class="property">data</span>;</span><br><span class="line">            body.<span class="title function_">find</span>(<span class="string">&quot;input[name=username]&quot;</span>).<span class="title function_">val</span>(userData.<span class="property">username</span>)</span><br><span class="line">            body.<span class="title function_">find</span>(<span class="string">&quot;input[name=password]&quot;</span>).<span class="title function_">val</span>(userData.<span class="property">password</span>)</span><br><span class="line">            body.<span class="title function_">find</span>(<span class="string">&quot;input[name=phone]&quot;</span>).<span class="title function_">val</span>(userData.<span class="property">phone</span>)</span><br><span class="line">            body.<span class="title function_">find</span>(<span class="string">&quot;input[name=money]&quot;</span>).<span class="title function_">val</span>(userData.<span class="property">money</span>)</span><br><span class="line">            <span class="keyword">let</span> date = <span class="keyword">new</span> <span class="title class_">Date</span>(userData.<span class="property">createTime</span>);</span><br><span class="line">            <span class="keyword">let</span> year = date.<span class="title function_">getFullYear</span>();</span><br><span class="line">            <span class="keyword">let</span> month = date.<span class="title function_">getMonth</span>() + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (month &lt; <span class="number">10</span>) &#123;</span><br><span class="line">                month = <span class="string">&quot;0&quot;</span>+month;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">let</span> day = date.<span class="title function_">getDate</span>();</span><br><span class="line">            <span class="keyword">if</span> (day &lt; <span class="number">10</span>) &#123;</span><br><span class="line">                day = <span class="string">&quot;0&quot;</span>+day;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">let</span> createTime = year+<span class="string">&quot;-&quot;</span>+month+<span class="string">&quot;-&quot;</span>+day;</span><br><span class="line">            body.<span class="title function_">find</span>(<span class="string">&quot;input[name=createTime]&quot;</span>).<span class="title function_">val</span>(createTime)</span><br><span class="line">            <span class="comment">// 根据性别判断,给标签添加checked属性</span></span><br><span class="line">            <span class="comment">// checked=true,默认选中</span></span><br><span class="line">            <span class="comment">// console.log(&quot;sex = &quot;,userData.sex)</span></span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">                         * 以下代码,并没有给form中radio设置上选择效果,为什么?</span></span><br><span class="line"><span class="comment">                         * 表单中，select、checkbox、radio需要layui来渲染完成,即页面加载完,渲染效果已经完成</span></span><br><span class="line"><span class="comment">                         * 所以后续再去改动效果,没有直接生效,怎么解决?</span></span><br><span class="line"><span class="comment">                         * 设置定时,等这边回显完,user-edit再渲染</span></span><br><span class="line"><span class="comment">                         */</span></span><br><span class="line">            body.<span class="title function_">find</span>(<span class="string">&#x27;input[name=sex][value=1]&#x27;</span>).<span class="title function_">attr</span>(<span class="string">&#x27;checked&#x27;</span>,userData.<span class="property">sex</span> == <span class="number">1</span> ? <span class="literal">true</span> : <span class="literal">false</span>);</span><br><span class="line">            body.<span class="title function_">find</span>(<span class="string">&#x27;input[name=sex][value=2]&#x27;</span>).<span class="title function_">attr</span>(<span class="string">&#x27;checked&#x27;</span>,userData.<span class="property">sex</span> == <span class="number">2</span> ? <span class="literal">true</span> : <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">end</span>:<span class="keyword">function</span> (<span class="params"></span>)&#123;</span><br><span class="line">            <span class="comment">// 弹出层销毁时,重新加载表格数据</span></span><br><span class="line">            <span class="comment">// js方法</span></span><br><span class="line">            <span class="comment">// location.reload()</span></span><br><span class="line">            <span class="comment">// layui方法</span></span><br><span class="line">            <span class="comment">// 官方文档:https://layuion.com/docs/modules/table.html#reload</span></span><br><span class="line">            table.<span class="title function_">reload</span>(<span class="string">&quot;userTable&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>user-edit.html</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">layui.<span class="title function_">use</span>([<span class="string">&quot;form&quot;</span>,<span class="string">&quot;laydate&quot;</span>,<span class="string">&quot;jquery&quot;</span>,<span class="string">&quot;layer&quot;</span>],<span class="keyword">function</span> (<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> form = layui.<span class="property">form</span>;</span><br><span class="line">    <span class="keyword">let</span> laydate = layui.<span class="property">laydate</span>;</span><br><span class="line">    <span class="keyword">let</span> $ = layui.<span class="property">jquery</span>;</span><br><span class="line">    <span class="keyword">let</span> layer = layui.<span class="property">layer</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 等index页面,完成input回显后,这边再渲染表单</span></span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>)&#123;</span><br><span class="line">        form.<span class="title function_">render</span>();</span><br><span class="line">    &#125;,<span class="number">50</span>)</span><br><span class="line">    <span class="comment">// 其他代码略...</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>



<h5 id="3-5-3-执行更新"><a href="#3-5-3-执行更新" class="headerlink" title="3.5.3 执行更新"></a>3.5.3 执行更新</h5><p>user-edit.html</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 绑定提交事件</span></span><br><span class="line">form.<span class="title function_">on</span>(<span class="string">&quot;submit(formDemo)&quot;</span>,<span class="keyword">function</span> (<span class="params">obj</span>) &#123;</span><br><span class="line">    $.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">        <span class="attr">url</span>:<span class="string">&quot;/user/edit&quot;</span>,</span><br><span class="line">        <span class="attr">type</span>:<span class="string">&quot;POST&quot;</span>,</span><br><span class="line">        <span class="attr">data</span>:obj.<span class="property">field</span>,</span><br><span class="line">        <span class="attr">success</span>:<span class="keyword">function</span> (<span class="params">ret</span>) &#123;</span><br><span class="line">            <span class="comment">// console.log(&quot;ret ==&gt;&quot;,ret)</span></span><br><span class="line">            <span class="keyword">if</span> (ret.<span class="property">code</span> == <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="comment">// 把弹出层关闭</span></span><br><span class="line">                <span class="comment">// 官方文档: https://layuion.com/docs/modules/layer.html#layer.getFrameIndex</span></span><br><span class="line">                <span class="keyword">var</span> index = parent.<span class="property">layer</span>.<span class="title function_">getFrameIndex</span>(<span class="variable language_">window</span>.<span class="property">name</span>);</span><br><span class="line">                parent.<span class="property">layer</span>.<span class="title function_">close</span>(index);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                layer.<span class="title function_">msg</span>(<span class="string">&quot;添加失败&quot;</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">error</span>:<span class="keyword">function</span> (<span class="params"></span>)&#123;</span><br><span class="line">            layer.<span class="title function_">msg</span>(<span class="string">&quot;服务器正忙!&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>后台</p>
<p>servlet–service-dao</p>
<h4 id="3-6-分页"><a href="#3-6-分页" class="headerlink" title="3.6 分页"></a>3.6 分页</h4><p>前端</p>
<blockquote>
<p>table.render在渲染数据时,设置page:true,开启分页发送</p>
<p>请求时会<code>自动拼接出分页参数?page=1&amp;limit=10</code> 意思是指,从第一页展现,每页展现10条</p>
<hr>
<p>也可以通过设置limit:n,来设置每页多少条数据</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">limit</span>:<span class="number">3</span>,</span><br><span class="line"><span class="attr">limits</span>:[<span class="number">3</span>,<span class="number">6</span>,<span class="number">9</span>,<span class="number">12</span>],</span><br></pre></td></tr></table></figure>
</blockquote>
<p>后端</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1 修改后台UserListServlet中代码,接收分页数据</span><br><span class="line">2 修改后台UserService和UserServiceImpl的findAll(),添加参数int pageNo,int pageSize</span><br><span class="line"></span><br><span class="line">3 修改后台UserDao和UserDaoImpl的findAll(),添加参数int pageNo,int pageSize </span><br><span class="line">--------</span><br><span class="line">发现分页的页数不对,需要后台查询数据条数返回给前端</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>数据库</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">已知条件:</span></span><br><span class="line"><span class="comment">当前页    pageNo</span></span><br><span class="line"><span class="comment">页面大小  pageSize</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">-- 第1页</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> tb_user limit <span class="number">0</span> , <span class="number">3</span></span><br><span class="line"><span class="comment">-- 第2页</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> tb_user limit <span class="number">3</span> , <span class="number">3</span></span><br><span class="line"><span class="comment">-- 第3页</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> tb_user limit <span class="number">6</span> , <span class="number">3</span></span><br><span class="line"><span class="comment">-- 第n页</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> tb_user limit (pageNo<span class="number">-1</span>)<span class="operator">*</span>pageSize, pageSize</span><br></pre></td></tr></table></figure>

<h4 id="3-7-模糊查询"><a href="#3-7-模糊查询" class="headerlink" title="3.7 模糊查询"></a>3.7 模糊查询</h4><p>前端</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-row&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-col-md9 layui-col-md-offset2&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">form</span> <span class="attr">class</span>=<span class="string">&quot;layui-form layui-form-pane&quot;</span> <span class="attr">action</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-inline&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span>=<span class="string">&quot;field&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>&gt;</span>---请选择---<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;username&quot;</span>&gt;</span>用户名<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;phone&quot;</span>&gt;</span>手机号<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-inline&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;keyword&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入搜索关键词&quot;</span> <span class="attr">class</span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-inline&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;layui-btn layui-btn-normal&quot;</span> <span class="attr">lay-submit</span> <span class="attr">lay-filter</span>=<span class="string">&quot;search&quot;</span>&gt;</span>搜索<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;layui-btn layui-btn-warm&quot;</span> <span class="attr">lay-submit</span> <span class="attr">lay-filter</span>=<span class="string">&quot;findAll&quot;</span>&gt;</span>查询全部<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> table;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> $ ;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> layer;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> form;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    layui.<span class="title function_">use</span>([<span class="string">&quot;table&quot;</span>,<span class="string">&quot;jquery&quot;</span>,<span class="string">&quot;layer&quot;</span>,<span class="string">&quot;form&quot;</span>],<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        table = layui.<span class="property">table</span>;</span></span><br><span class="line"><span class="language-javascript">        $ = layui.<span class="property">jquery</span>;</span></span><br><span class="line"><span class="language-javascript">        layer = layui.<span class="property">layer</span>;</span></span><br><span class="line"><span class="language-javascript">        form = layui.<span class="property">form</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 搜索框点击提交事件</span></span></span><br><span class="line"><span class="language-javascript">        form.<span class="title function_">on</span>(<span class="string">&quot;submit(search)&quot;</span>,<span class="keyword">function</span> (<span class="params">obj</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(obj)</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> field = obj.<span class="property">field</span>.<span class="property">field</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> keyword = obj.<span class="property">field</span>.<span class="property">keyword</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 调用方法,渲染表格</span></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">renderTable</span>(field,keyword);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 查询全部点击</span></span></span><br><span class="line"><span class="language-javascript">        form.<span class="title function_">on</span>(<span class="string">&quot;submit(findAll)&quot;</span>,<span class="keyword">function</span> (<span class="params">obj</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 调用方法,渲染表格</span></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">renderTable</span>();</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">  </span></span><br><span class="line"><span class="language-javascript">         <span class="comment">// 删除,更新回显,,代码省略</span></span></span><br><span class="line"><span class="language-javascript">       </span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 用户列表渲染</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">renderTable</span>();</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 抽取出渲染表格的方法</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">renderTable</span>(<span class="params">field,keyword</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 只是查询全部,url应该是http://localhost:8080/user/list?page=1&amp;limit=10</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 模糊查询,url应该是http://localhost:8080/user/list?field=xx&amp;keyword=xx&amp;page=1&amp;limit=10</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> url = <span class="string">&quot;http://localhost:8080/user/list&quot;</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (field != <span class="literal">undefined</span> &amp;&amp; keyword != <span class="literal">undefined</span> &amp;&amp; field != <span class="string">&#x27;&#x27;</span> &amp;&amp; keyword != <span class="string">&#x27;&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            url += <span class="string">&quot;?field=&quot;</span>+field+<span class="string">&quot;&amp;keyword=&quot;</span>+keyword;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// console.log(&quot;url --&gt; &quot;,url)</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        table.<span class="title function_">render</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">elem</span>:<span class="string">&quot;#userTable&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">url</span>:url,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">page</span>:<span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">limit</span>:<span class="number">3</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">limits</span>:[<span class="number">3</span>,<span class="number">6</span>,<span class="number">9</span>,<span class="number">12</span>],</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">cols</span>:[[</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">field</span>: <span class="string">&quot;id&quot;</span>, <span class="attr">title</span>: <span class="string">&quot;ID&quot;</span>, <span class="attr">sort</span>: <span class="literal">true</span>,<span class="attr">width</span>:<span class="number">80</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">field</span>: <span class="string">&quot;username&quot;</span>, <span class="attr">title</span>: <span class="string">&quot;用户名&quot;</span>,<span class="attr">width</span>:<span class="number">100</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">field</span>: <span class="string">&quot;password&quot;</span>, <span class="attr">title</span>: <span class="string">&quot;密码&quot;</span>,<span class="attr">width</span>:<span class="number">100</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">field</span>: <span class="string">&quot;phone&quot;</span>, <span class="attr">title</span>: <span class="string">&quot;手机号&quot;</span>,<span class="attr">width</span>:<span class="number">120</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">field</span>: <span class="string">&quot;money&quot;</span>, <span class="attr">title</span>: <span class="string">&quot;余额&quot;</span>, <span class="attr">sort</span>: <span class="literal">true</span>,<span class="attr">width</span>:<span class="number">100</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">field</span>: <span class="string">&quot;sex&quot;</span>, <span class="attr">title</span>: <span class="string">&quot;性别&quot;</span>, <span class="attr">sort</span>: <span class="literal">true</span>,<span class="attr">width</span>:<span class="number">80</span>,<span class="attr">templet</span>:<span class="keyword">function</span>(<span class="params">obj</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// console.log(obj.sex)</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">return</span> obj.<span class="property">sex</span> == <span class="number">1</span>? <span class="string">&#x27;男&#x27;</span>:<span class="string">&#x27;女&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                    &#125;&#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">field</span>: <span class="string">&quot;createTime&quot;</span>, <span class="attr">title</span>: <span class="string">&quot;注册时间&quot;</span>, <span class="attr">sort</span>: <span class="literal">true</span>,<span class="attr">templet</span>:<span class="keyword">function</span> (<span class="params">obj</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">let</span> date = <span class="keyword">new</span> <span class="title class_">Date</span>(obj.<span class="property">createTime</span>);</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">let</span> year = date.<span class="title function_">getFullYear</span>();</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">let</span> month = date.<span class="title function_">getMonth</span>() + <span class="number">1</span>;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (month &lt; <span class="number">10</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                            month = <span class="string">&quot;0&quot;</span>+month;</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">let</span> day = date.<span class="title function_">getDate</span>();</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (day &lt; <span class="number">10</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                            day = <span class="string">&quot;0&quot;</span>+day;</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">return</span> year+<span class="string">&quot;-&quot;</span>+month+<span class="string">&quot;-&quot;</span>+day;</span></span><br><span class="line"><span class="language-javascript">                    &#125;&#125;,</span></span><br><span class="line"><span class="language-javascript">                &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">title</span>:<span class="string">&quot;操作&quot;</span>,<span class="attr">templet</span>:<span class="keyword">function</span> (<span class="params">d</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">let</span> str = <span class="string">&quot;&lt;a lay-event=\&quot;edit\&quot; class=\&quot;layui-btn layui-btn-xs layui-btn-warm\&quot;&gt;编辑&lt;/a&gt;&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">                        str += <span class="string">&quot; &lt;a lay-event=\&quot;delete\&quot;class=\&quot;layui-btn layui-btn-xs layui-btn-danger\&quot;&gt;删除&lt;/a&gt;&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">return</span> str;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            ]]</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>后端</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">主要是改动findAll()方法,传入pageNo,pageSize,field,keyword参数</span><br><span class="line">所以设计了map,承载所有参数</span><br><span class="line"></span><br><span class="line">-----</span><br><span class="line">Dao层,要动态拼接sql (要判断)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>数据库</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> tb_user <span class="keyword">where</span> ??? <span class="keyword">like</span> <span class="string">&#x27;%???%&#x27;</span>  limit x,y</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 动态sql</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> tb_user <span class="keyword">where</span> phone <span class="keyword">like</span> <span class="string">&#x27;%xxx%&#x27;</span> limit x,y</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> tb_user <span class="keyword">where</span> <span class="string">&#x27;phone&#x27;</span> <span class="keyword">like</span> <span class="string">&#x27;%1%&#x27;</span> limit <span class="number">0</span>,<span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 没有关键词</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> tb_user limit <span class="number">0</span>,<span class="number">3</span></span><br><span class="line"><span class="comment">-- 有关键词</span></span><br><span class="line"><span class="comment">-- select * from tb_user where &#x27;phone&#x27; like &#x27;%1%&#x27; limit 0,3</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> tb_user  <span class="keyword">where</span> username <span class="keyword">like</span> <span class="string">&#x27;%邱%&#x27;</span> limit <span class="number">0</span> , <span class="number">3</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> tb_user  <span class="keyword">where</span> phone <span class="keyword">like</span> <span class="string">&#x27;%222%&#x27;</span> limit <span class="number">0</span> , <span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> tb_user limit <span class="number">0</span> , <span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) count <span class="keyword">from</span> tb_user</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) count <span class="keyword">from</span> tb_user  <span class="keyword">where</span> phone <span class="keyword">like</span> <span class="string">&#x27;%222%&#x27;</span> </span><br></pre></td></tr></table></figure>

<h2 id="day23"><a href="#day23" class="headerlink" title="day23"></a>day23</h2><h3 id="今日内容-12"><a href="#今日内容-12" class="headerlink" title="今日内容"></a>今日内容</h3><blockquote>
<p>0 复习昨日</p>
<p>1 了解项目开发流程</p>
<p>2 项目需求</p>
<p>3 设计数据库</p>
<p>4 编码</p>
</blockquote>
<h3 id="0-复习昨日-10"><a href="#0-复习昨日-10" class="headerlink" title="0 复习昨日"></a>0 复习昨日</h3><blockquote>
<p>1 jdbc 五大步骤<br>    1)加载驱动<br>    2)获得连接<br>    3)获得执行sql对象<br>    4)执行sql<br>    5)关流</p>
<p>2 Statement使用方式<br>自己写完整的sql语句,如果有参数,都要自己拼接sql<br>使用statement调用方法executeQuery(sql),executeUpdate(sql)	</p>
<p>3 PreparedStatement使用方式<br>自己写sql语句,如果有参数,用?占位<br>conn.preparedStatement(sql)进行预处理<br>对?赋值<br>ps.executeUpdate(),executeQuery()</p>
<p>4 它俩区别<br>    处理语句,需要自己写完整sql(需要拼接),容易sql注入<br>    预处理语句,sql不需要拼接,避免sql注入</p>
<p>5 写出分页sql语句,假设每页5条,第三页的数据<br>select * from 表名 limit (pageNo - 1) * pageSize,pageSize<br>select * from 表名 limit 10,5</p>
<p>6 画出后台代码的执行流程(三层架构中的数据流转)</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091713708.png"></p>
<h3 id="1-了解项目开发流程"><a href="#1-了解项目开发流程" class="headerlink" title="1 了解项目开发流程"></a>1 了解项目开发流程</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">1.公司部门的组成</span><br><span class="line">	人事部门HR</span><br><span class="line">	技术部门(研发部/IT部/java组/h5组/c组/ui组/产品)</span><br><span class="line">	行政部门</span><br><span class="line">	财务部门</span><br><span class="line">	市场部门</span><br><span class="line">	运营部门</span><br><span class="line">	总经理</span><br><span class="line">	老板/董事/CEO</span><br><span class="line">	</span><br><span class="line">2.项目部人员的组成</span><br><span class="line">各种开发人员: UI/前端/后端(java/c/Python/c++/android/Object-c)</span><br><span class="line">              测试/实施/运维</span><br><span class="line">			  </span><br><span class="line">3.项目的来源（怎么接项目）</span><br><span class="line">客户(人脉/广告效应/朋友推荐/...)</span><br><span class="line"></span><br><span class="line">4.可行性方法分析</span><br><span class="line"></span><br><span class="line">5.=======立项========</span><br><span class="line">6.报价表以及项目周期</span><br><span class="line"></span><br><span class="line">7.合同签订</span><br><span class="line">(首付30%,中期(30%),后期(30%),交付使用,(10%))</span><br><span class="line"></span><br><span class="line">8.人员分配</span><br><span class="line">中等项目(2月) 1个UI 1个前端  4个后台(1Android 1IOS 2Java) 1个测试</span><br><span class="line"></span><br><span class="line">9.=======项目开发=======</span><br><span class="line">10.原型图（甲方/乙方），思维导图</span><br><span class="line">11.需求文档-接口文档</span><br><span class="line">12.技术选型，架构设计，数据库设计(*) 几张表 表中多少字段 字段约束 表和表之间的关系 ，产品设计</span><br><span class="line">13.项目编码，单元测试</span><br><span class="line">14.测试（测试环境  公司测试，内部测试）</span><br><span class="line">15.产品使用说明书【专业】</span><br><span class="line">16.上线，项目部署</span><br></pre></td></tr></table></figure>

<h3 id="2-项目需求"><a href="#2-项目需求" class="headerlink" title="2 项目需求"></a>2 项目需求</h3><p>详见文档</p>
<h3 id="3-数据库设计"><a href="#3-数据库设计" class="headerlink" title="3 数据库设计"></a>3 数据库设计</h3><p>设计一个独立的库: apartment2217</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091713707.png" alt="image-20221207113947865" style="zoom:67%;" />

<p>建表(一个模块一张表)</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Table structure for activity</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `activity`;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `activity` (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;活动id&#x27;</span>,</span><br><span class="line">  `<span class="type">time</span>` datetime <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> <span class="keyword">ON</span> <span class="keyword">UPDATE</span> <span class="built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="string">&#x27;活动时间&#x27;</span>,</span><br><span class="line">  `subject` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">COLLATE</span> utf8_bin <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;活动主题&#x27;</span>,</span><br><span class="line">  `intr` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">COLLATE</span> utf8_bin <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;活动内容介绍&#x27;</span>,</span><br><span class="line">  `address` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">COLLATE</span> utf8_bin <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;活动地址&#x27;</span>,</span><br><span class="line">  `price` <span class="keyword">double</span>(<span class="number">10</span>,<span class="number">2</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;活动费用&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8_bin COMMENT<span class="operator">=</span><span class="string">&#x27;活动表&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Records of activity</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `activity` <span class="keyword">VALUES</span> (<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2022-11-20 17:19:21&#x27;</span>, <span class="string">&#x27;相亲&#x27;</span>, <span class="string">&#x27;单身青年相亲&#x27;</span>, <span class="string">&#x27;同乐公园&#x27;</span>, <span class="string">&#x27;100.00&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Table structure for contract</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `contract`;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `contract` (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  `num` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">COLLATE</span> utf8_bin <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;合同号&#x27;</span>,</span><br><span class="line">  `hid` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;关联房屋id&#x27;</span>,</span><br><span class="line">  `lid` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;关联租户id&#x27;</span>,</span><br><span class="line">  `<span class="type">time</span>` datetime <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> <span class="keyword">ON</span> <span class="keyword">UPDATE</span> <span class="built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="string">&#x27;合同签订时间&#x27;</span>,</span><br><span class="line">  `startTime` datetime <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> <span class="keyword">ON</span> <span class="keyword">UPDATE</span> <span class="built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="string">&#x27;合同生效起始时间&#x27;</span>,</span><br><span class="line">  `endTime` datetime <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> <span class="keyword">ON</span> <span class="keyword">UPDATE</span> <span class="built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="string">&#x27;合同失效时间&#x27;</span>,</span><br><span class="line">  `totalMoney` <span class="keyword">double</span>(<span class="number">255</span>,<span class="number">0</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;合同总金额&#x27;</span>,</span><br><span class="line">  `payType` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;1月付 2半年付 3年付&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB AUTO_INCREMENT<span class="operator">=</span><span class="number">2</span> <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8_bin  COMMENT<span class="operator">=</span><span class="string">&#x27;合同表&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Records of contract</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `contract` <span class="keyword">VALUES</span> (<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2022112001&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2022-11-20 16:49:00&#x27;</span>, <span class="string">&#x27;2022-11-21 16:49:02&#x27;</span>, <span class="string">&#x27;2022-11-22 16:49:05&#x27;</span>, <span class="string">&#x27;180&#x27;</span>, <span class="string">&#x27;1&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Table structure for house</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `house`;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `house` (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;主键&#x27;</span>,</span><br><span class="line">  `address` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">COLLATE</span> utf8_bin <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;房屋地址&#x27;</span>,</span><br><span class="line">  `floor` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">COLLATE</span> utf8_bin <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;楼层&#x27;</span>,</span><br><span class="line">  `roomNum` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;房间号&#x27;</span>,</span><br><span class="line">  `area` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">COLLATE</span> utf8_bin <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;面积&#x27;</span>,</span><br><span class="line">  `dir` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">COLLATE</span> utf8_bin <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;朝向&#x27;</span>,</span><br><span class="line">  `deco` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;装修类型 1毛坯 2精装&#x27;</span>,</span><br><span class="line">  `air` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;是否双气 1是 2否&#x27;</span>,</span><br><span class="line">  `price` <span class="keyword">double</span>(<span class="number">10</span>,<span class="number">2</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;价格&#x27;</span>,</span><br><span class="line">  `rentStatus` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;出租状态 1已出租 2未出租 3停止出租&#x27;</span>,</span><br><span class="line">  `image` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">COLLATE</span> utf8_bin <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;房屋图片路径&#x27;</span> ,</span><br><span class="line">  `addTime` datetime <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> <span class="keyword">ON</span> <span class="keyword">UPDATE</span> <span class="built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="string">&#x27;添加时间&#x27;</span>,</span><br><span class="line">  `updateTime` datetime <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> <span class="keyword">ON</span> <span class="keyword">UPDATE</span> <span class="built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="string">&#x27;更新时间&#x27;</span>,</span><br><span class="line">  `status` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;房屋状态 1正常 2已删除&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB AUTO_INCREMENT<span class="operator">=</span><span class="number">6</span> <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8_bin  COMMENT<span class="operator">=</span><span class="string">&#x27;房屋表&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Records of house</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `house` <span class="keyword">VALUES</span> (<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;老代庄10号&#x27;</span>, <span class="number">1</span>, <span class="string">&#x27;102&#x27;</span>, <span class="string">&#x27;30平&#x27;</span>, <span class="string">&#x27;南&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;1980.00&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;2022-11-23 10:46:08&#x27;</span>, <span class="string">&#x27;2022-11-23 00:00:00&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `house` <span class="keyword">VALUES</span> (<span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;航海路60号&#x27;</span>, <span class="number">2</span>, <span class="string">&#x27;209&#x27;</span>, <span class="string">&#x27;65平&#x27;</span>, <span class="string">&#x27;西&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;2000.00&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;2022-11-23 10:48:44&#x27;</span>, <span class="string">&#x27;2022-11-23 00:00:00&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `house` <span class="keyword">VALUES</span> (<span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;二七万达&#x27;</span>, <span class="number">1</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;56平&#x27;</span>, <span class="string">&#x27;东&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;13000.00&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;2022-11-25 16:13:16&#x27;</span>, <span class="string">&#x27;2022-11-25 16:13:16&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `house` <span class="keyword">VALUES</span> (<span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;海为科技园&#x27;</span>, <span class="number">1</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;200平&#x27;</span>, <span class="string">&#x27;北&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;300.00&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;2022-11-25 16:13:13&#x27;</span>, <span class="string">&#x27;2022-11-25 16:13:13&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `house` <span class="keyword">VALUES</span> (<span class="string">&#x27;5&#x27;</span>, <span class="string">&#x27;台胞小区&#x27;</span>, <span class="number">1</span>, <span class="string">&#x27;8&#x27;</span>, <span class="string">&#x27;90平&#x27;</span>, <span class="string">&#x27;东北&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;40.00&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;2022-11-25 16:13:12&#x27;</span>, <span class="string">&#x27;2022-11-25 16:13:12&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Table structure for lessee</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `lessee`;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `lessee` (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;主键ID&#x27;</span>,</span><br><span class="line">  `name` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">COLLATE</span> utf8_bin <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;租户姓名&#x27;</span>,</span><br><span class="line">  `tel` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">COLLATE</span> utf8_bin <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;手机号&#x27;</span>,</span><br><span class="line">  `sex` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;性别 1男 2女&#x27;</span>,</span><br><span class="line">  `np` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">COLLATE</span> utf8_bin <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;籍贯&#x27;</span>,</span><br><span class="line">  `idCard` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">COLLATE</span> utf8_bin <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;身份证号码&#x27;</span>,</span><br><span class="line">  `addTime` datetime <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> <span class="keyword">ON</span> <span class="keyword">UPDATE</span> <span class="built_in">CURRENT_TIMESTAMP</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB AUTO_INCREMENT<span class="operator">=</span><span class="number">2</span> <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8_bin  COMMENT<span class="operator">=</span><span class="string">&#x27;租户表&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Records of lessee</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `lessee` <span class="keyword">VALUES</span> (<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;张三&#x27;</span>, <span class="string">&#x27;110&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;郑州&#x27;</span>, <span class="string">&#x27;4101010110101&#x27;</span>, <span class="string">&#x27;2022-11-20 16:38:15&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Table structure for logi</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `logi`;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `logi` (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;主键ID&#x27;</span>,</span><br><span class="line">  `name` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">COLLATE</span> utf8_bin <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;后勤人员姓名&#x27;</span>,</span><br><span class="line">  `idCard` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">COLLATE</span> utf8_bin <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;后勤人员身份证号&#x27;</span>,</span><br><span class="line">  `tel` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">COLLATE</span> utf8_bin <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;后勤人员手机&#x27;</span>,</span><br><span class="line">  `sex` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;1男 2女&#x27;</span>,</span><br><span class="line">  `addTime` datetime <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> <span class="keyword">ON</span> <span class="keyword">UPDATE</span> <span class="built_in">CURRENT_TIMESTAMP</span>,</span><br><span class="line">  `salary` <span class="keyword">double</span>(<span class="number">10</span>,<span class="number">2</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;工资&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8_bin  COMMENT<span class="operator">=</span><span class="string">&#x27;后勤人员表&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Records of logi</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Table structure for maintain</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `maintain`;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `maintain` (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  `hid` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;关联房屋id&#x27;</span>,</span><br><span class="line">  `loid` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;关联后勤人员id&#x27;</span>,</span><br><span class="line">  `<span class="type">time</span>` datetime <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> <span class="keyword">ON</span> <span class="keyword">UPDATE</span> <span class="built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="string">&#x27;维修时间&#x27;</span>,</span><br><span class="line">  `<span class="keyword">result</span>` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">COLLATE</span> utf8_bin <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;维修结果&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8_bin  COMMENT<span class="operator">=</span><span class="string">&#x27;维修表&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Records of maintain</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Table structure for rent</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `rent`;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `rent` (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  `hid` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;关联房屋id&#x27;</span>,</span><br><span class="line">  `lid` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;关联租户id&#x27;</span>,</span><br><span class="line">  `price` <span class="keyword">double</span>(<span class="number">10</span>,<span class="number">2</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;缴纳房租&#x27;</span>,</span><br><span class="line">  `payTime` datetime <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> <span class="keyword">ON</span> <span class="keyword">UPDATE</span> <span class="built_in">CURRENT_TIMESTAMP</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8_bin  COMMENT<span class="operator">=</span><span class="string">&#x27;房租表&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Records of rent</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `rent` <span class="keyword">VALUES</span> (<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;180.00&#x27;</span>, <span class="string">&#x27;2022-11-20 16:56:02&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Table structure for user</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `<span class="keyword">user</span>`;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `<span class="keyword">user</span>` (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  `username` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">COLLATE</span> utf8_bin <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `password` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">COLLATE</span> utf8_bin <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `sex` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">COLLATE</span> utf8_bin <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;1男 2女&#x27;</span>,</span><br><span class="line">  `realname` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">COLLATE</span> utf8_bin <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;真实姓名&#x27;</span>,</span><br><span class="line">  `hiredate` datetime <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> <span class="keyword">ON</span> <span class="keyword">UPDATE</span> <span class="built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="string">&#x27;入职时间&#x27;</span>,</span><br><span class="line">  `status` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;1正常 2离职&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB AUTO_INCREMENT<span class="operator">=</span><span class="number">4</span> <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8_bin  COMMENT<span class="operator">=</span><span class="string">&#x27;用户表&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Records of user</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `<span class="keyword">user</span>` <span class="keyword">VALUES</span> (<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;admin&#x27;</span>, <span class="string">&#x27;123456&#x27;</span>, <span class="number">1</span>,<span class="string">&#x27;邱世举&#x27;</span>, <span class="string">&#x27;2022-11-22 16:22:54&#x27;</span>, <span class="string">&#x27;1&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `<span class="keyword">user</span>` <span class="keyword">VALUES</span> (<span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;zs&#x27;</span>, <span class="string">&#x27;123456&#x27;</span>, <span class="number">2</span>,<span class="string">&#x27;张三&#x27;</span>, <span class="string">&#x27;2022-11-22 16:23:12&#x27;</span>, <span class="string">&#x27;1&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `<span class="keyword">user</span>` <span class="keyword">VALUES</span> (<span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;ls&#x27;</span>, <span class="string">&#x27;123456&#x27;</span>,<span class="number">2</span>, <span class="string">&#x27;李四&#x27;</span>, <span class="string">&#x27;2022-11-22 16:23:30&#x27;</span>, <span class="string">&#x27;1&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="4-编码"><a href="#4-编码" class="headerlink" title="4 编码"></a>4 编码</h3><h4 id="4-1-前端脚手架"><a href="#4-1-前端脚手架" class="headerlink" title="4.1 前端脚手架"></a>4.1 前端脚手架</h4><blockquote>
<p>可以快速搭建一个前端界面,</p>
<ul>
<li>X-admin(目前使用这个)</li>
<li>Layui mini</li>
</ul>
<p>这两个脚手架都是基于Layui改造的</p>
<hr>
<p>如果使用?</p>
<p>看上哪个效果,就赋值粘贴哪个页面,根据实际需求改动页面内容</p>
</blockquote>
<h4 id="4-2-环境搭建"><a href="#4-2-环境搭建" class="headerlink" title="4.2 环境搭建"></a>4.2 环境搭建</h4><ul>
<li>创建项目</li>
<li>导入依赖</li>
<li>创建对应包结构</li>
<li>创建对应实体类</li>
<li>工具类,配置文件</li>
<li>加入前端静态资源<ul>
<li>在webapp下,创建static文件夹</li>
<li>把前端脚手架资源拷贝到static下</li>
<li>另外单独导入jquery.js</li>
</ul>
</li>
<li>配置tomcat</li>
<li>部署项目</li>
</ul>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202308091713711.png" alt="image-20221207154713480" style="zoom:67%;" />

<h4 id="4-3-登录页"><a href="#4-3-登录页" class="headerlink" title="4.3 登录页"></a>4.3 登录页</h4><ul>
<li>在webapp下创建login.html</li>
<li>复制xadmin脚手架的代码</li>
<li>改动css.js的引入路径</li>
<li>web.xml设置欢迎页</li>
</ul>
<h4 id="4-4-登录功能"><a href="#4-4-登录功能" class="headerlink" title="4.4 登录功能"></a>4.4 登录功能</h4><p>前端</p>
<ol>
<li><p>登录表单提交事件</p>
</li>
<li><p>获得用户名+密码数据</p>
</li>
<li><p>发ajax请求,到后台</p>
</li>
<li><p>ajax的回调函数中判断是否登录成功</p>
</li>
<li><p>登录失败,弹框提示</p>
</li>
<li><p>登录成功,跳转页面到首页</p>
</li>
</ol>
<p>后端</p>
<ol start="4">
<li>后台servlet接收请求 &lt;–&gt; service  &lt;–&gt; dao</li>
<li>如果查询到,要存储登录状态(session)</li>
<li>响应</li>
</ol>
<h4 id="4-5-首页样式跳转"><a href="#4-5-首页样式跳转" class="headerlink" title="4.5 首页样式跳转"></a>4.5 首页样式跳转</h4><p>前端</p>
<ol>
<li>登录成功后跳转首页</li>
</ol>
<h4 id="4-6-展现房屋数据"><a href="#4-6-展现房屋数据" class="headerlink" title="4.6 展现房屋数据"></a>4.6 展现房屋数据</h4><ol>
<li>登录成功,跳转至首页后,立即展现房屋列表</li>
<li>是通过iframe的src指定路径,会自动发请求加载list页面</li>
<li>list页面,通过layui-table渲染数据</li>
</ol>
<h3 id="5-模糊搜索"><a href="#5-模糊搜索" class="headerlink" title="5 模糊搜索"></a>5 模糊搜索</h3><p>要实现的是多条件搜索,关键词和字段有多套(比如,地址字段对应地址的内容|楼层字段,对应楼层内容….)</p>
<ol>
<li>使用json优化渲染表格的方法参数</li>
<li>使用table.render字段参数where,优化拼接路径</li>
<li>后台要根据关键词动态拼接sql</li>
</ol>
<h3 id="6-多表联查"><a href="#6-多表联查" class="headerlink" title="6 多表联查"></a>6 多表联查</h3><p>业务需求: 查询合同时,需要关联查询房屋和租户,</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> c.<span class="operator">*</span>,h.address,l.name <span class="keyword">from</span> contract c, house h,lessee l <span class="keyword">where</span> c.hid <span class="operator">=</span> h.id <span class="keyword">and</span> c.lid <span class="operator">=</span> l.id</span><br></pre></td></tr></table></figure>

<p>因为查询到的数据,不止有合同信息,还要关联房屋,租户信息,如何封装查询到数据?此时一个单独的合同类不能够展现全部数据,怎么解决?</p>
<p>实体类中展现的数据不够,就加?</p>
<p>加哪? 一般不直接加在原实体类,还是创建一个扩展类ContractVO</p>
<p>还有另外的一种思路:”分而治之”</p>
<p>分开一个一个查</p>
<ol>
<li>先查询且只查询合同</li>
<li>根据上一步查询得到的结果房屋id,租户id</li>
<li>根据hid查房屋</li>
<li>根据lid查租户</li>
</ol>
<h3 id="7-下拉框回显"><a href="#7-下拉框回显" class="headerlink" title="7 下拉框回显"></a>7 下拉框回显</h3><p>复选框&#x2F;单选框选中是添加 checked</p>
<p>下拉框选中是添加 selected</p>
<h3 id="8-批量删除"><a href="#8-批量删除" class="headerlink" title="8 批量删除"></a>8 批量删除</h3><h3 id="9-js-cookie"><a href="#9-js-cookie" class="headerlink" title="9 js-cookie"></a>9 js-cookie</h3><p>登录成功后,主页右上角人名应该是当前登录的人.</p>
<p>是login.html登录成功,跳转到index.html</p>
<p>需要在index.html展现登录成功的人名</p>
<p>人名数据在哪?人名在login.html登录成功的回调函数中</p>
<p>那么,数据如何从login.html传递到index.html?</p>
<ul>
<li>其中一个方案是cookie,注意是前端js操作cookie</li>
<li>在login.html将数据存储到cookie</li>
<li>在index.html从cookie中取出</li>
<li>操作dom显示数据</li>
</ul>
<p>官方文档<a target="_blank" rel="noopener" href="https://www.w3school.com.cn/js/js_cookies.asp">JavaScript Cookies (w3school.com.cn)</a></p>
<h2 id=""><a href="#" class="headerlink" title=""></a></h2></article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202309300844043.png" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202309300844043.png" title="头像" alt="头像"></a><div class="post-copyright__author_name">小u</div><div class="post-copyright__author_desc">热爱可抵岁月漫长</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="http://example.com/2023/10/01/codenotes/Java/qf/4/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('http://example.com/2023/10/01/codenotes/Java/qf/4/')">重学java第二阶段(下)</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202309300816229.jpg" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202309300816229.jpg" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202309300816224.jpg" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202309300816224.jpg" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="http://example.com/2023/10/01/codenotes/Java/qf/4/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=重学java第二阶段(下)&amp;url=http://example.com/2023/10/01/codenotes/Java/qf/4/&amp;pic=" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="rm.copyPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/java/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>java<span class="tagsPageCount">12</span></a><a class="post-meta__box__tags" href="/tags/javaWeb/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>javaWeb<span class="tagsPageCount">2</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202309300844043.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/10/01/codenotes/Java/qf/2/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">重学java第一阶段(下)</div></div></a></div><div class="next-post pull-right"><a href="/2023/10/01/codenotes/Java/jvm/1/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/lql_static@latest/logo/jvm.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">JVM系列-第1章-JVM与Java体系结构</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>Related Articles</span></div><div class="relatedPosts-list"><div><a href="/2023/10/01/codenotes/Java/qf/3/" title="重学java第二阶段(上)"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-10-01</div><div class="title">重学java第二阶段(上)</div></div></a></div><div><a href="/2023/10/01/codenotes/Java/JDK%E6%96%B0%E7%89%B9%E6%80%A7/" title="JDK9~JDK17新特性"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-10-01</div><div class="title">JDK9~JDK17新特性</div></div></a></div><div><a href="/2023/10/01/codenotes/Java/java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" title="java面向对象"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-10-01</div><div class="title">java面向对象</div></div></a></div><div><a href="/2023/10/01/codenotes/Java/java%E5%9F%BA%E7%A1%80/" title="java基础"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-10-01</div><div class="title">java基础</div></div></a></div><div><a href="/2023/10/01/codenotes/Java/spring6/" title="Spring6"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-10-01</div><div class="title">Spring6</div></div></a></div><div><a href="/2023/10/01/codenotes/other/clean-code/" title="《代码整洁之道》"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-10-01</div><div class="title">《代码整洁之道》</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202309300844043.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/24/64e6ce9c507bb.png" ait="status"/></div></div><div class="author-info__description">Java,java,springboot,mysql,redis,教程,git,软件,编程,开发,互联网,Java 基础,Java 教程,Java程序员进阶之路,Java 入门,Vue,前端,算法</div></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bullhorn anzhiyu-shake"></i><span>Announcement</span></div><div class="announcement_content">欢迎来看我的博客 博客主地址：http://blog.xiaou61.top/  备用地址：https://newblog.guoyaxue.top/</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>Catalog</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#day11"><span class="toc-number">1.</span> <span class="toc-text">day11</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8A%E6%97%A5%E5%86%85%E5%AE%B9"><span class="toc-number">1.1.</span> <span class="toc-text">今日内容</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#0-%E5%A4%8D%E4%B9%A0%E6%98%A8%E6%97%A5"><span class="toc-number">1.2.</span> <span class="toc-text">0 复习昨日</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-JDBC%E6%A6%82%E8%BF%B0"><span class="toc-number">1.3.</span> <span class="toc-text">1 JDBC概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-JDBC%E5%BC%80%E5%8F%91%E6%AD%A5%E9%AA%A4"><span class="toc-number">1.4.</span> <span class="toc-text">2 JDBC开发步骤</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-%E5%88%9B%E5%BB%BAjava%E9%A1%B9%E7%9B%AE"><span class="toc-number">1.4.1.</span> <span class="toc-text">2.1 创建java项目</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-%E5%AF%BC%E5%85%A5mysql%E9%A9%B1%E5%8A%A8%E5%8C%85"><span class="toc-number">1.4.2.</span> <span class="toc-text">2.2 导入mysql驱动包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-1-%E5%A4%8D%E5%88%B6%E7%B2%98%E8%B4%B4%E7%89%88%E6%9C%AC"><span class="toc-number">1.4.3.</span> <span class="toc-text">2.2.1 复制粘贴版本</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-2-idea%E5%AF%BC%E5%85%A5%E7%B1%BB%E5%BA%93%E7%89%88%E6%9C%AC"><span class="toc-number">1.5.</span> <span class="toc-text">2.2.2 idea导入类库版本</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-JDBC%E7%BC%96%E7%A8%8B"><span class="toc-number">1.5.1.</span> <span class="toc-text">2.3 JDBC编程</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%AE%8C%E6%88%90%E5%A2%9E%E5%88%A0%E6%94%B9"><span class="toc-number">1.6.</span> <span class="toc-text">3 完成增删改</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-%E6%8F%92%E5%85%A5"><span class="toc-number">1.6.1.</span> <span class="toc-text">3.1 插入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-%E6%9B%B4%E6%96%B0"><span class="toc-number">1.6.2.</span> <span class="toc-text">3.2 更新</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-%E5%88%A0%E9%99%A4"><span class="toc-number">1.6.3.</span> <span class="toc-text">3.3 删除</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C%E9%9B%86ResultSet%E3%80%90%E9%87%8D%E8%A6%81%E3%80%91"><span class="toc-number">1.7.</span> <span class="toc-text">4 查询结果集ResultSet【重要】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E7%99%BB%E5%BD%95%E6%A1%88%E4%BE%8B%E3%80%90%E9%87%8D%E8%A6%81%E3%80%91"><span class="toc-number">1.8.</span> <span class="toc-text">5 登录案例【重要】</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#day12"><span class="toc-number">2.</span> <span class="toc-text">day12</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8A%E6%97%A5%E5%86%85%E5%AE%B9-1"><span class="toc-number">2.1.</span> <span class="toc-text">今日内容</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#0-%E5%A4%8D%E4%B9%A0%E6%98%A8%E6%97%A5-1"><span class="toc-number">2.2.</span> <span class="toc-text">0 复习昨日</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-SQL%E6%B3%A8%E5%85%A5"><span class="toc-number">2.3.</span> <span class="toc-text">1 SQL注入</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-%E4%BB%80%E4%B9%88%E6%98%AFSQL%E6%B3%A8%E5%85%A5"><span class="toc-number">2.3.1.</span> <span class="toc-text">1.1 什么是SQL注入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-%E9%81%BF%E5%85%8DSQL%E6%B3%A8%E5%85%A5"><span class="toc-number">2.3.2.</span> <span class="toc-text">1.2 避免SQL注入</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-PreparedStatement%E3%80%90%E9%87%8D%E7%82%B9%E3%80%91"><span class="toc-number">2.4.</span> <span class="toc-text">2 PreparedStatement【重点】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%AE%8C%E6%88%90CRUD%E7%BB%83%E4%B9%A0"><span class="toc-number">2.5.</span> <span class="toc-text">3 完成CRUD练习</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-%E6%8F%92%E5%85%A5-1"><span class="toc-number">2.5.1.</span> <span class="toc-text">3.1 插入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-%E6%9B%B4%E6%96%B0-1"><span class="toc-number">2.5.2.</span> <span class="toc-text">3.2 更新</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-%E5%88%A0%E9%99%A4-1"><span class="toc-number">2.5.3.</span> <span class="toc-text">3.3 删除</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E4%BA%8B%E5%8A%A1%E5%A4%84%E7%90%86"><span class="toc-number">2.6.</span> <span class="toc-text">4 事务处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-ORM%E3%80%90%E9%87%8D%E7%82%B9%E3%80%91"><span class="toc-number">2.7.</span> <span class="toc-text">5 ORM【重点】</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-%E4%BB%80%E4%B9%88%E6%98%AFORM"><span class="toc-number">2.7.1.</span> <span class="toc-text">5.1 什么是ORM</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-%E5%AE%9E%E4%BD%93%E7%B1%BB"><span class="toc-number">2.7.2.</span> <span class="toc-text">5.2 实体类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-%E4%BD%BF%E7%94%A8ORM%E5%AE%8C%E6%88%90CRUD"><span class="toc-number">2.7.3.</span> <span class="toc-text">5.3 使用ORM完成CRUD</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#5-3-1-%E6%9F%A5%E8%AF%A2%E4%BD%BF%E7%94%A8ORM%E5%B0%81%E8%A3%85%E6%95%B0%E6%8D%AE"><span class="toc-number">2.7.3.1.</span> <span class="toc-text">5.3.1 查询使用ORM封装数据</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-3-2-%E6%8F%92%E5%85%A5%E4%BD%BF%E7%94%A8ORM%E5%B0%81%E8%A3%85%E6%95%B0%E6%8D%AE"><span class="toc-number">2.7.3.2.</span> <span class="toc-text">5.3.2 插入使用ORM封装数据</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-DBUtil%E3%80%90%E7%90%86%E8%A7%A3%EF%BC%8C%E4%BC%9A%E7%94%A8%E3%80%91"><span class="toc-number">2.8.</span> <span class="toc-text">6 DBUtil【理解，会用】</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#day13"><span class="toc-number">3.</span> <span class="toc-text">day13</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8A%E6%97%A5%E5%86%85%E5%AE%B9-2"><span class="toc-number">3.1.</span> <span class="toc-text">今日内容</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#0-%E5%A4%8D%E4%B9%A0%E6%98%A8%E6%97%A5-2"><span class="toc-number">3.2.</span> <span class="toc-text">0 复习昨日</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%BD%9C%E4%B8%9A%E3%80%90%E9%87%8D%E8%A6%81%E3%80%91"><span class="toc-number">3.3.</span> <span class="toc-text">1 作业【重要】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0"><span class="toc-number">3.4.</span> <span class="toc-text">2 数据库连接池</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-Druid%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0"><span class="toc-number">3.4.1.</span> <span class="toc-text">2.1 Druid数据库连接池</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%8F%8D%E5%B0%84-reflect"><span class="toc-number">3.5.</span> <span class="toc-text">3 反射(reflect)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-%E8%8E%B7%E5%BE%97%E7%B1%BB%E7%9A%84%E5%AD%97%E8%8A%82%E7%A0%81%E6%96%87%E4%BB%B6"><span class="toc-number">3.5.1.</span> <span class="toc-text">3.1 获得类的字节码文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-%E8%8E%B7%E5%BE%97%E5%B9%B6%E8%AE%BE%E7%BD%AE%E5%B1%9E%E6%80%A7-Field"><span class="toc-number">3.5.2.</span> <span class="toc-text">3.2 获得并设置属性(Field)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-%E8%8E%B7%E5%BE%97%E5%B9%B6%E8%AE%BE%E7%BD%AE%E6%96%B9%E6%B3%95-Method"><span class="toc-number">3.5.3.</span> <span class="toc-text">3.3 获得并设置方法(Method)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-%E8%8E%B7%E5%BE%97%E5%B9%B6%E8%AE%BE%E7%BD%AE%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95-Constructor"><span class="toc-number">3.5.4.</span> <span class="toc-text">3.4 获得并设置构造方法(Constructor)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E4%BD%BF%E7%94%A8%E5%8F%8D%E5%B0%84%E5%B0%81%E8%A3%85DBUtil"><span class="toc-number">3.6.</span> <span class="toc-text">4 使用反射封装DBUtil</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#day14"><span class="toc-number">4.</span> <span class="toc-text">day14</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8A%E6%97%A5%E5%86%85%E5%AE%B9-3"><span class="toc-number">4.1.</span> <span class="toc-text">今日内容</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#0-%E5%A4%8D%E4%B9%A0%E6%98%A8%E6%97%A5-3"><span class="toc-number">4.2.</span> <span class="toc-text">0 复习昨日</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Maven"><span class="toc-number">4.3.</span> <span class="toc-text">1 Maven</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-0-%E5%BC%95%E8%A8%80"><span class="toc-number">4.3.1.</span> <span class="toc-text">1.0 引言</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-%E4%BB%8B%E7%BB%8D"><span class="toc-number">4.3.2.</span> <span class="toc-text">1.1 介绍</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-%E4%B8%8B%E8%BD%BD"><span class="toc-number">4.3.3.</span> <span class="toc-text">1.2 下载</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-%E5%AE%89%E8%A3%85"><span class="toc-number">4.3.4.</span> <span class="toc-text">1.3 安装</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-3-1-%E8%A7%A3%E5%8E%8B"><span class="toc-number">4.3.4.1.</span> <span class="toc-text">1.3.1 解压</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-3-2-%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-number">4.3.4.2.</span> <span class="toc-text">1.3.2 配置环境变量</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-3-3-%E6%B5%8B%E8%AF%95"><span class="toc-number">4.3.4.3.</span> <span class="toc-text">1.3.3 测试</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-4-%E4%BB%93%E5%BA%93"><span class="toc-number">4.3.5.</span> <span class="toc-text">1.4 仓库</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-5-Maven%E9%85%8D%E7%BD%AE"><span class="toc-number">4.3.6.</span> <span class="toc-text">1.5 Maven配置</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-5-1-%E4%BF%AE%E6%94%B9%E4%BB%93%E5%BA%93%E4%BD%8D%E7%BD%AE"><span class="toc-number">4.3.6.0.1.</span> <span class="toc-text">1.5.1 修改仓库位置</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-5-2-%E8%AE%BE%E7%BD%AE%E9%95%9C%E5%83%8F"><span class="toc-number">4.3.6.1.</span> <span class="toc-text">1.5.2 设置镜像</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-IDEA-MAVEN"><span class="toc-number">4.4.</span> <span class="toc-text">2 IDEA - MAVEN</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-idea%E5%85%B3%E8%81%94maven"><span class="toc-number">4.4.1.</span> <span class="toc-text">2.1 idea关联maven</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-%E5%88%9B%E5%BB%BAjava%E9%A1%B9%E7%9B%AE"><span class="toc-number">4.4.2.</span> <span class="toc-text">2.2 创建java项目</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-java%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84"><span class="toc-number">4.4.3.</span> <span class="toc-text">2.3 java项目结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-pom"><span class="toc-number">4.4.4.</span> <span class="toc-text">2.4 pom</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-5-%E5%AF%BC%E5%85%A5%E4%BE%9D%E8%B5%96"><span class="toc-number">4.4.5.</span> <span class="toc-text">2.5 导入依赖</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#2-5-1-%E6%9F%A5%E6%89%BE%E4%BE%9D%E8%B5%96"><span class="toc-number">4.4.5.1.</span> <span class="toc-text">2.5.1 查找依赖</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-5-2-%E4%BD%BF%E7%94%A8%E4%BE%9D%E8%B5%96"><span class="toc-number">4.4.5.2.</span> <span class="toc-text">2.5.2 使用依赖</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-6-%E6%B5%8B%E8%AF%95"><span class="toc-number">4.4.5.3.</span> <span class="toc-text">2.6 测试</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-JavaWeb"><span class="toc-number">4.5.</span> <span class="toc-text">3 JavaWeb</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">4.6.</span> <span class="toc-text">4 服务器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-Tomcat"><span class="toc-number">4.7.</span> <span class="toc-text">5 Tomcat</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-%E4%B8%8B%E8%BD%BD"><span class="toc-number">4.7.1.</span> <span class="toc-text">5.1 下载</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-%E5%AE%89%E8%A3%85"><span class="toc-number">4.7.2.</span> <span class="toc-text">5.2 安装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-%E5%90%AF%E5%8A%A8%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">4.7.3.</span> <span class="toc-text">5.3 启动服务器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-4-%E8%AE%BF%E9%97%AE%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">4.7.4.</span> <span class="toc-text">5.4 访问服务器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-5-%E5%85%B3%E9%97%AD%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">4.7.5.</span> <span class="toc-text">5.5 关闭服务器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-6-%E7%89%B9%E5%88%AB%E8%AF%B4%E6%98%8E"><span class="toc-number">4.7.6.</span> <span class="toc-text">5.6 特别说明</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-IDEA-Tomcat"><span class="toc-number">4.8.</span> <span class="toc-text">6 IDEA - Tomcat</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-maven%E5%88%9B%E5%BB%BAjavaweb%E9%A1%B9%E7%9B%AE"><span class="toc-number">4.8.1.</span> <span class="toc-text">6.1 maven创建javaweb项目</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-1-%E4%BD%BF%E7%94%A8%E6%A8%A1%E6%9D%BF%E5%88%9B%E5%BB%BA%E3%80%90%E6%8E%A8%E8%8D%90%E3%80%91"><span class="toc-number">4.8.2.</span> <span class="toc-text">6.1.1 使用模板创建【推荐】</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A8%A1%E6%9D%BF%E5%88%9B%E5%BB%BA%E5%B9%B6%E4%B8%8D%E5%AE%8C%E6%95%B4"><span class="toc-number">4.8.3.</span> <span class="toc-text">模板创建并不完整</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%89%8B%E5%8A%A8%E8%A1%A5%E5%85%A8%E7%9B%AE%E5%BD%95"><span class="toc-number">4.8.4.</span> <span class="toc-text">手动补全目录</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-2-%E4%B8%8D%E4%BD%BF%E7%94%A8%E6%A8%A1%E6%9D%BF%E5%88%9B%E5%BB%BAjavaweb%E9%A1%B9%E7%9B%AE"><span class="toc-number">4.8.5.</span> <span class="toc-text">6.1.2 不使用模板创建javaweb项目</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-3-%E4%B8%8D%E4%BD%BF%E7%94%A8%E6%A8%A1%E6%9D%BF-%E4%B9%9F%E4%B8%8D%E4%BD%BF%E7%94%A8%E6%A1%86%E6%9E%B6%E6%94%AF%E6%8C%81"><span class="toc-number">4.8.6.</span> <span class="toc-text">6.1.3 不使用模板,也不使用框架支持</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2-web%E9%A1%B9%E7%9B%AE%E8%AE%BE%E7%BD%AETomcat-%E9%83%A8%E7%BD%B2%E9%A1%B9%E7%9B%AE"><span class="toc-number">4.8.7.</span> <span class="toc-text">6.2 web项目设置Tomcat(部署项目)</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#day15"><span class="toc-number">5.</span> <span class="toc-text">day15</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8A%E6%97%A5%E5%86%85%E5%AE%B9-4"><span class="toc-number">5.1.</span> <span class="toc-text">今日内容</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#0-%E5%A4%8D%E4%B9%A0%E6%98%A8%E6%97%A5-4"><span class="toc-number">5.2.</span> <span class="toc-text">0 复习昨日</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Servlet"><span class="toc-number">5.3.</span> <span class="toc-text">1 Servlet</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-%E4%BB%8B%E7%BB%8D-1"><span class="toc-number">5.3.1.</span> <span class="toc-text">1.1 介绍</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-%E7%AC%AC%E4%B8%80%E4%B8%AAServlet%E7%A8%8B%E5%BA%8F"><span class="toc-number">5.4.</span> <span class="toc-text">1.2 第一个Servlet程序</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-1-%E5%88%9B%E5%BB%BAweb%E9%A1%B9%E7%9B%AE"><span class="toc-number">5.4.1.</span> <span class="toc-text">1.2.1 创建web项目</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-2-pom%E4%BE%9D%E8%B5%96"><span class="toc-number">5.4.2.</span> <span class="toc-text">1.2.2 pom依赖</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-3-%E7%BC%96%E5%86%99Servlet"><span class="toc-number">5.4.3.</span> <span class="toc-text">1.2.3 编写Servlet</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-4-%E9%85%8D%E7%BD%AEServlet"><span class="toc-number">5.4.4.</span> <span class="toc-text">1.2.4 配置Servlet</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-5-%E9%83%A8%E7%BD%B2%E9%A1%B9%E7%9B%AE"><span class="toc-number">5.4.5.</span> <span class="toc-text">1.2.5 部署项目</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#day16"><span class="toc-number">6.</span> <span class="toc-text">day16</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8A%E6%97%A5%E5%86%85%E5%AE%B9-5"><span class="toc-number">6.1.</span> <span class="toc-text">今日内容</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#0-%E5%A4%8D%E4%B9%A0%E6%98%A8%E6%97%A5-5"><span class="toc-number">6.2.</span> <span class="toc-text">0 复习昨日</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%8E%A5%E6%94%B6%E8%AF%B7%E6%B1%82"><span class="toc-number">6.3.</span> <span class="toc-text">1 接收请求</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-%E7%BC%96%E5%86%99%E9%A1%B5%E9%9D%A2"><span class="toc-number">6.3.1.</span> <span class="toc-text">1.1 编写页面</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-%E7%BC%96%E5%86%99Servlet"><span class="toc-number">6.3.2.</span> <span class="toc-text">1.2 编写Servlet</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-%E9%85%8D%E7%BD%AEweb-xml"><span class="toc-number">6.3.3.</span> <span class="toc-text">1.3 配置web.xml</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-4-%E9%83%A8%E7%BD%B2%E9%A1%B9%E7%9B%AE"><span class="toc-number">6.3.4.</span> <span class="toc-text">1.4 部署项目</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-5-%E5%90%AF%E5%8A%A8%E6%B5%8B%E8%AF%95"><span class="toc-number">6.3.5.</span> <span class="toc-text">1.5 启动测试</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%81%9A%E5%87%BA%E5%93%8D%E5%BA%94"><span class="toc-number">6.4.</span> <span class="toc-text">2 做出响应</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E4%B9%B1%E7%A0%81%E8%A7%A3%E5%86%B3"><span class="toc-number">6.5.</span> <span class="toc-text">3 乱码解决</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#day17"><span class="toc-number">7.</span> <span class="toc-text">day17</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8A%E6%97%A5%E5%86%85%E5%AE%B9-6"><span class="toc-number">7.1.</span> <span class="toc-text">今日内容</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#0-%E5%A4%8D%E4%B9%A0%E6%98%A8%E6%97%A5-6"><span class="toc-number">7.2.</span> <span class="toc-text">0 复习昨日</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-MVC%E5%92%8C%E4%B8%89%E5%B1%82%E6%9E%B6%E6%9E%84"><span class="toc-number">7.3.</span> <span class="toc-text">1 MVC和三层架构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Login%E6%A1%88%E4%BE%8B"><span class="toc-number">7.4.</span> <span class="toc-text">2 Login案例</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-%E6%90%AD%E5%BB%BA%E7%8E%AF%E5%A2%83"><span class="toc-number">7.4.1.</span> <span class="toc-text">2.1 搭建环境</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-%E9%A1%B5%E9%9D%A2"><span class="toc-number">7.4.2.</span> <span class="toc-text">2.2 页面</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-UserServlet"><span class="toc-number">7.4.3.</span> <span class="toc-text">2.3 UserServlet</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-UserService"><span class="toc-number">7.4.4.</span> <span class="toc-text">2.4 UserService</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-5-UserDao"><span class="toc-number">7.4.5.</span> <span class="toc-text">2.5 UserDao</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E8%AF%B7%E6%B1%82%E8%BD%AC%E5%8F%91"><span class="toc-number">7.5.</span> <span class="toc-text">3 请求转发</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-%E8%AF%B7%E6%B1%82%E8%BD%AC%E5%8F%91"><span class="toc-number">7.5.1.</span> <span class="toc-text">3.1 请求转发</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-%E8%AF%B7%E6%B1%82%E5%9F%9F"><span class="toc-number">7.5.2.</span> <span class="toc-text">3.2 请求域</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-%E8%B7%B3%E8%BD%AC%E9%A1%B5%E9%9D%A2"><span class="toc-number">7.5.3.</span> <span class="toc-text">3.3 跳转页面</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-number">7.6.</span> <span class="toc-text">4 重定向</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E6%B3%A8%E8%A7%A3"><span class="toc-number">7.7.</span> <span class="toc-text">5 注解</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-%E5%88%9B%E5%BB%BA%E6%B3%A8%E8%A7%A3%E6%96%87%E4%BB%B6"><span class="toc-number">7.7.1.</span> <span class="toc-text">5.1 创建注解文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-%E5%85%83%E6%B3%A8%E8%A7%A3"><span class="toc-number">7.7.2.</span> <span class="toc-text">5.2 元注解</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-1-Target"><span class="toc-number">7.7.3.</span> <span class="toc-text">5.2.1 @Target</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-2-Retention"><span class="toc-number">7.7.4.</span> <span class="toc-text">5.2.2 @Retention</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-%E6%B3%A8%E8%A7%A3%E5%8F%82%E6%95%B0"><span class="toc-number">7.7.5.</span> <span class="toc-text">5.3 注解参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-4-%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8"><span class="toc-number">7.7.6.</span> <span class="toc-text">5.4 实际应用</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#day18"><span class="toc-number">8.</span> <span class="toc-text">day18</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8A%E6%97%A5%E5%86%85%E5%AE%B9-7"><span class="toc-number">8.1.</span> <span class="toc-text">今日内容</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#0-%E5%A4%8D%E4%B9%A0%E6%98%A8%E6%97%A5-7"><span class="toc-number">8.2.</span> <span class="toc-text">0 复习昨日</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%85%B3%E4%BA%8E%E8%B7%AF%E5%BE%84"><span class="toc-number">8.3.</span> <span class="toc-text">1 关于路径</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-IDEA%E7%83%AD%E9%83%A8%E7%BD%B2"><span class="toc-number">8.4.</span> <span class="toc-text">2 IDEA热部署</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E4%BC%9A%E8%AF%9D%E6%8A%80%E6%9C%AF"><span class="toc-number">8.5.</span> <span class="toc-text">3 会话技术</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-Cookie"><span class="toc-number">8.6.</span> <span class="toc-text">4 Cookie</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1-%E5%88%9B%E5%BB%BAcookie"><span class="toc-number">8.6.1.</span> <span class="toc-text">4.1 创建cookie</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-%E5%93%8D%E5%BA%94%E7%BB%99%E6%B5%8F%E8%A7%88%E5%99%A8"><span class="toc-number">8.6.2.</span> <span class="toc-text">4.2 响应给浏览器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-%E8%8E%B7%E5%BE%97Cookie"><span class="toc-number">8.6.3.</span> <span class="toc-text">4.3 获得Cookie</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-cookie%E7%9A%84%E8%B7%AF%E5%BE%84%E9%97%AE%E9%A2%98"><span class="toc-number">8.6.4.</span> <span class="toc-text">4.4 cookie的路径问题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-5-cookie%E4%BF%9D%E5%AD%98%E4%B8%AD%E6%96%87%E9%97%AE%E9%A2%98"><span class="toc-number">8.6.5.</span> <span class="toc-text">4.5 cookie保存中文问题</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-Session%E3%80%90%E9%87%8D%E7%82%B9%E3%80%91"><span class="toc-number">8.7.</span> <span class="toc-text">5 Session【重点】</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-%E5%88%9B%E5%BB%BAsession"><span class="toc-number">8.7.1.</span> <span class="toc-text">5.1 创建session</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-Session%E5%AD%98%E5%8F%96%E6%95%B0%E6%8D%AE"><span class="toc-number">8.7.2.</span> <span class="toc-text">5.2 Session存取数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-Session%E5%9F%9F%E5%92%8CRequest%E5%9F%9F"><span class="toc-number">8.7.3.</span> <span class="toc-text">5.3 Session域和Request域</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-4-Session%E5%9F%9F%E6%95%B0%E6%8D%AE%E6%B8%85%E9%99%A4"><span class="toc-number">8.7.4.</span> <span class="toc-text">5.4 Session域数据清除</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E8%AE%B0%E5%BD%95%E7%99%BB%E5%BD%95%E7%8A%B6%E6%80%81%E6%A1%88%E4%BE%8B"><span class="toc-number">8.8.</span> <span class="toc-text">6 记录登录状态案例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E6%8B%A6%E6%88%AA%E5%99%A8-%E8%BF%87%E6%BB%A4%E5%99%A8-Filter"><span class="toc-number">8.9.</span> <span class="toc-text">7 拦截器&#x2F;过滤器(Filter)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#day19"><span class="toc-number">9.</span> <span class="toc-text">day19</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8A%E6%97%A5%E5%86%85%E5%AE%B9-8"><span class="toc-number">9.1.</span> <span class="toc-text">今日内容</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#0-%E5%A4%8D%E4%B9%A0%E6%98%A8%E6%97%A5-8"><span class="toc-number">9.2.</span> <span class="toc-text">0 复习昨日</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-session%E5%AD%98%E5%82%A8%E7%99%BB%E5%BD%95%E7%8A%B6%E6%80%81"><span class="toc-number">9.3.</span> <span class="toc-text">1 session存储登录状态</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E4%BD%BF%E7%94%A8%E6%8B%A6%E6%88%AA%E5%99%A8%E6%94%B9%E9%80%A0"><span class="toc-number">9.4.</span> <span class="toc-text">2 使用拦截器改造</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-Ajax"><span class="toc-number">9.5.</span> <span class="toc-text">3 Ajax</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-%E4%BB%8B%E7%BB%8D"><span class="toc-number">9.5.1.</span> <span class="toc-text">3.1 介绍</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-%E8%AF%AD%E6%B3%95"><span class="toc-number">9.5.2.</span> <span class="toc-text">3.2 语法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-%E6%B5%8B%E8%AF%95"><span class="toc-number">9.5.3.</span> <span class="toc-text">3.3 测试</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-3-1-get"><span class="toc-number">9.5.3.1.</span> <span class="toc-text">3.3.1 $.get</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-3-2-post"><span class="toc-number">9.5.3.2.</span> <span class="toc-text">3.3.2 $.post</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-3-3-ajax"><span class="toc-number">9.5.3.3.</span> <span class="toc-text">3.3.3 $.ajax</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-%E5%93%8D%E5%BA%94json%E9%97%AE%E9%A2%98"><span class="toc-number">9.5.4.</span> <span class="toc-text">3.4 响应json问题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-5-BUG-JS%E5%BC%95%E5%85%A5%E5%A4%B1%E8%B4%A5"><span class="toc-number">9.5.5.</span> <span class="toc-text">3.5 BUG: JS引入失败</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E6%A1%88%E4%BE%8B"><span class="toc-number">9.6.</span> <span class="toc-text">4 案例</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1-%E6%B3%A8%E5%86%8C"><span class="toc-number">9.6.1.</span> <span class="toc-text">4.1 注册</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-%E5%9B%9E%E6%98%BE%E6%95%B0%E6%8D%AE"><span class="toc-number">9.6.2.</span> <span class="toc-text">4.2 回显数据</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-FastJson"><span class="toc-number">9.7.</span> <span class="toc-text">5 FastJson</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#day20"><span class="toc-number">10.</span> <span class="toc-text">day20</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8A%E6%97%A5%E5%86%85%E5%AE%B9-9"><span class="toc-number">10.1.</span> <span class="toc-text">今日内容</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%8D%E4%B9%A0"><span class="toc-number">10.2.</span> <span class="toc-text">复习</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A6%81%E5%A4%8D%E4%B9%A0"><span class="toc-number">10.3.</span> <span class="toc-text">要复习</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#day21"><span class="toc-number">11.</span> <span class="toc-text">day21</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8A%E6%97%A5%E5%86%85%E5%AE%B9-10"><span class="toc-number">11.1.</span> <span class="toc-text">今日内容</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#0-%E5%BC%95%E8%A8%80"><span class="toc-number">11.2.</span> <span class="toc-text">0 引言</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Layui"><span class="toc-number">11.3.</span> <span class="toc-text">Layui</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%BB%8B%E7%BB%8D"><span class="toc-number">11.4.</span> <span class="toc-text">1 介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA"><span class="toc-number">11.5.</span> <span class="toc-text">2 环境搭建</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-%E4%B8%8B%E8%BD%BD"><span class="toc-number">11.5.1.</span> <span class="toc-text">2.1 下载</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-%E8%A7%A3%E5%8E%8B"><span class="toc-number">11.5.2.</span> <span class="toc-text">2.2 解压</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA"><span class="toc-number">11.5.3.</span> <span class="toc-text">2.3 项目搭建</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#2-3-1-%E5%88%9B%E5%BB%BAjavaweb%E9%A1%B9%E7%9B%AE"><span class="toc-number">11.5.3.1.</span> <span class="toc-text">2.3.1 创建javaweb项目</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-3-2-%E5%AF%BC%E5%85%A5layui%E8%B5%84%E6%BA%90"><span class="toc-number">11.5.3.2.</span> <span class="toc-text">2.3.2 导入layui资源</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-3-3-%E9%A1%B5%E9%9D%A2%E4%B8%AD%E5%BC%95%E5%85%A5layui"><span class="toc-number">11.5.3.3.</span> <span class="toc-text">2.3.3 页面中引入layui</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%85%A5%E9%97%A8%E4%BD%BF%E7%94%A8"><span class="toc-number">11.6.</span> <span class="toc-text">3 入门使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E9%A1%B5%E9%9D%A2%E5%85%83%E7%B4%A0"><span class="toc-number">11.7.</span> <span class="toc-text">4 页面元素</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1-%E5%B8%83%E5%B1%80"><span class="toc-number">11.7.1.</span> <span class="toc-text">4.1 布局</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-%E5%9B%BE%E6%A0%87"><span class="toc-number">11.7.2.</span> <span class="toc-text">4.2 图标</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-%E6%8C%89%E9%92%AE"><span class="toc-number">11.7.3.</span> <span class="toc-text">4.3 按钮</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-%E8%A1%A8%E5%8D%95"><span class="toc-number">11.7.4.</span> <span class="toc-text">4.4 表单</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-5-%E5%AF%BC%E8%88%AA"><span class="toc-number">11.7.5.</span> <span class="toc-text">4.5 导航</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-6-%E8%A1%A8%E6%A0%BC"><span class="toc-number">11.7.6.</span> <span class="toc-text">4.6 表格</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E5%86%85%E7%BD%AE%E6%A8%A1%E5%9D%97"><span class="toc-number">11.8.</span> <span class="toc-text">5 内置模块</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-%E5%BC%B9%E5%87%BA%E5%B1%82"><span class="toc-number">11.8.1.</span> <span class="toc-text">5.1 弹出层</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-%E6%97%A5%E6%9C%9F"><span class="toc-number">11.8.2.</span> <span class="toc-text">5.2 日期</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-%E8%A1%A8%E6%A0%BC"><span class="toc-number">11.8.3.</span> <span class="toc-text">5.3 表格</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-1-%E5%85%A5%E9%97%A8%E6%BC%94%E7%A4%BA"><span class="toc-number">11.8.4.</span> <span class="toc-text">5.3.1 入门演示</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-2-%E5%90%8E%E5%8F%B0servlet%E6%8E%A5%E5%8F%A3"><span class="toc-number">11.8.5.</span> <span class="toc-text">5.3.2 后台servlet接口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-3-%E8%BD%AC%E6%8D%A2%E8%BF%94%E5%9B%9E%E7%9A%84%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F"><span class="toc-number">11.8.6.</span> <span class="toc-text">5.3.3 转换返回的数据格式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-4-%E6%95%B0%E6%8D%AE%E6%A8%A1%E6%9D%BF"><span class="toc-number">11.8.7.</span> <span class="toc-text">5.3.4 数据模板</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-5-%E5%88%86%E9%A1%B5%E6%95%B0%E6%8D%AE"><span class="toc-number">11.8.8.</span> <span class="toc-text">5.3.5 分页数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-6-%E6%93%8D%E4%BD%9C%E6%8C%89%E9%92%AE"><span class="toc-number">11.8.9.</span> <span class="toc-text">5.3.6 操作按钮</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-7-%E6%93%8D%E4%BD%9C%E6%8C%89%E9%92%AE%E4%BA%8B%E4%BB%B6"><span class="toc-number">11.8.10.</span> <span class="toc-text">5.3.7 操作按钮事件</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#day22"><span class="toc-number">12.</span> <span class="toc-text">day22</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8A%E6%97%A5%E5%86%85%E5%AE%B9-11"><span class="toc-number">12.1.</span> <span class="toc-text">今日内容</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#0-%E5%A4%8D%E4%B9%A0%E6%98%A8%E6%97%A5-9"><span class="toc-number">12.2.</span> <span class="toc-text">0 复习昨日</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B"><span class="toc-number">12.3.</span> <span class="toc-text">1 开发流程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%90%AD%E5%BB%BA%E7%8E%AF%E5%A2%83"><span class="toc-number">12.4.</span> <span class="toc-text">2 搭建环境</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE"><span class="toc-number">12.4.1.</span> <span class="toc-text">2.1 创建项目</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-%E5%AF%BC%E5%85%A5%E4%BE%9D%E8%B5%96"><span class="toc-number">12.4.2.</span> <span class="toc-text">2.2 导入依赖</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">12.4.3.</span> <span class="toc-text">2.3 配置文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-%E5%8C%85%E7%BB%93%E6%9E%84"><span class="toc-number">12.4.4.</span> <span class="toc-text">2.4 包结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-5-%E5%AE%9E%E4%BD%93%E7%B1%BB-%E5%B7%A5%E5%85%B7%E7%B1%BB"><span class="toc-number">12.4.5.</span> <span class="toc-text">2.5 实体类,工具类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-6-%E6%8B%A6%E6%88%AA%E5%99%A8"><span class="toc-number">12.4.6.</span> <span class="toc-text">2.6 拦截器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-7-%E5%89%8D%E7%AB%AF%E7%8E%AF%E5%A2%83"><span class="toc-number">12.4.7.</span> <span class="toc-text">2.7 前端环境</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%8A%9F%E8%83%BD%E5%BC%80%E5%8F%91"><span class="toc-number">12.5.</span> <span class="toc-text">3 功能开发</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-%E9%A6%96%E9%A1%B5"><span class="toc-number">12.5.1.</span> <span class="toc-text">3.1 首页</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-%E6%B7%BB%E5%8A%A0"><span class="toc-number">12.5.2.</span> <span class="toc-text">3.2 添加</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-%E6%93%8D%E4%BD%9C%E6%8C%89%E9%92%AE"><span class="toc-number">12.5.3.</span> <span class="toc-text">3.3 操作按钮</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-%E5%88%A0%E9%99%A4"><span class="toc-number">12.5.4.</span> <span class="toc-text">3.4 删除</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-5-%E6%9B%B4%E6%96%B0"><span class="toc-number">12.5.5.</span> <span class="toc-text">3.5 更新</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-5-1-%E6%9B%B4%E6%96%B0%E5%BC%B9%E5%87%BA%E5%B1%82"><span class="toc-number">12.5.5.1.</span> <span class="toc-text">3.5.1 更新弹出层</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-5-2-%E6%9B%B4%E6%96%B0%E9%A1%B5%E9%9D%A2%E5%9B%9E%E6%98%BE%E6%95%B0%E6%8D%AE"><span class="toc-number">12.5.5.2.</span> <span class="toc-text">3.5.2 更新页面回显数据</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-5-3-%E6%89%A7%E8%A1%8C%E6%9B%B4%E6%96%B0"><span class="toc-number">12.5.5.3.</span> <span class="toc-text">3.5.3 执行更新</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-6-%E5%88%86%E9%A1%B5"><span class="toc-number">12.5.6.</span> <span class="toc-text">3.6 分页</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-7-%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2"><span class="toc-number">12.5.7.</span> <span class="toc-text">3.7 模糊查询</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#day23"><span class="toc-number">13.</span> <span class="toc-text">day23</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8A%E6%97%A5%E5%86%85%E5%AE%B9-12"><span class="toc-number">13.1.</span> <span class="toc-text">今日内容</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#0-%E5%A4%8D%E4%B9%A0%E6%98%A8%E6%97%A5-10"><span class="toc-number">13.2.</span> <span class="toc-text">0 复习昨日</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%BA%86%E8%A7%A3%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B"><span class="toc-number">13.3.</span> <span class="toc-text">1 了解项目开发流程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E9%A1%B9%E7%9B%AE%E9%9C%80%E6%B1%82"><span class="toc-number">13.4.</span> <span class="toc-text">2 项目需求</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1"><span class="toc-number">13.5.</span> <span class="toc-text">3 数据库设计</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E7%BC%96%E7%A0%81"><span class="toc-number">13.6.</span> <span class="toc-text">4 编码</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1-%E5%89%8D%E7%AB%AF%E8%84%9A%E6%89%8B%E6%9E%B6"><span class="toc-number">13.6.1.</span> <span class="toc-text">4.1 前端脚手架</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA"><span class="toc-number">13.6.2.</span> <span class="toc-text">4.2 环境搭建</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-%E7%99%BB%E5%BD%95%E9%A1%B5"><span class="toc-number">13.6.3.</span> <span class="toc-text">4.3 登录页</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-%E7%99%BB%E5%BD%95%E5%8A%9F%E8%83%BD"><span class="toc-number">13.6.4.</span> <span class="toc-text">4.4 登录功能</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-5-%E9%A6%96%E9%A1%B5%E6%A0%B7%E5%BC%8F%E8%B7%B3%E8%BD%AC"><span class="toc-number">13.6.5.</span> <span class="toc-text">4.5 首页样式跳转</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-6-%E5%B1%95%E7%8E%B0%E6%88%BF%E5%B1%8B%E6%95%B0%E6%8D%AE"><span class="toc-number">13.6.6.</span> <span class="toc-text">4.6 展现房屋数据</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E6%A8%A1%E7%B3%8A%E6%90%9C%E7%B4%A2"><span class="toc-number">13.7.</span> <span class="toc-text">5 模糊搜索</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E5%A4%9A%E8%A1%A8%E8%81%94%E6%9F%A5"><span class="toc-number">13.8.</span> <span class="toc-text">6 多表联查</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E4%B8%8B%E6%8B%89%E6%A1%86%E5%9B%9E%E6%98%BE"><span class="toc-number">13.9.</span> <span class="toc-text">7 下拉框回显</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-%E6%89%B9%E9%87%8F%E5%88%A0%E9%99%A4"><span class="toc-number">13.10.</span> <span class="toc-text">8 批量删除</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-js-cookie"><span class="toc-number">13.11.</span> <span class="toc-text">9 js-cookie</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">14.</span> <span class="toc-text"></span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/10/08/%E5%85%AC%E4%BC%97%E5%8F%B7%E6%94%B6%E8%97%8F/27/" title="再见 MyBatis-Plus ！">再见 MyBatis-Plus ！</a><time datetime="2023-10-08T12:28:14.000Z" title="Created 2023-10-08 20:28:14">2023-10-08</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/10/08/%E5%85%AC%E4%BC%97%E5%8F%B7%E6%94%B6%E8%97%8F/26/" title="“人尽皆知”的单例模式">“人尽皆知”的单例模式</a><time datetime="2023-10-08T12:28:14.000Z" title="Created 2023-10-08 20:28:14">2023-10-08</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/10/08/%E5%85%AC%E4%BC%97%E5%8F%B7%E6%94%B6%E8%97%8F/29/" title="阿里的同事，写的代码真 TMD 优雅！">阿里的同事，写的代码真 TMD 优雅！</a><time datetime="2023-10-08T12:28:14.000Z" title="Created 2023-10-08 20:28:14">2023-10-08</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/10/08/%E5%85%AC%E4%BC%97%E5%8F%B7%E6%94%B6%E8%97%8F/28/" title="别再用 BeanUtils 了，这款 PO VO DTO 转换神器不香么？">别再用 BeanUtils 了，这款 PO VO DTO 转换神器不香么？</a><time datetime="2023-10-08T12:28:14.000Z" title="Created 2023-10-08 20:28:14">2023-10-08</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/10/08/%E5%85%AC%E4%BC%97%E5%8F%B7%E6%94%B6%E8%97%8F/30/" title="MyBatis过时了吗？">MyBatis过时了吗？</a><time datetime="2023-10-08T12:28:14.000Z" title="Created 2023-10-08 20:28:14">2023-10-08</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2020 - 2023 By <a class="footer-bar-link" href="/" title="小u" target="_blank">小u</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">Articles</div><div class="length-num">238</div></a><a href="/tags/" title="tag"><div class="headline">Tags</div><div class="length-num">39</div></a><a href="/categories/" title="category"><div class="headline">Categories</div><div class="length-num">50</div></a></div><span class="sidebar-menu-item-title">Function</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="Display Mode"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>Display Mode</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://mydocs.guoyaxue.top/" title="旧版博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="旧版博客"/><span class="back-menu-item-text">旧版博客</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="http://pan.xiaou61.top/#/" title="免费网盘"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="免费网盘"/><span class="back-menu-item-text">免费网盘</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="http://cloud.xiaou61.top/" title="云盘(自用)"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="云盘(自用)"/><span class="back-menu-item-text">云盘(自用)</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="http://wpzc.xiaou61.top/" title="云盘转存"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="云盘转存"/><span class="back-menu-item-text">云盘转存</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="http://love.xiaou61.top/#/" title="关于我们(My girlFriend)"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="关于我们(My girlFriend)"/><span class="back-menu-item-text">关于我们(My girlFriend)</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">娱乐项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="http://fxq.xiaou61.top/#/" title="飞行棋"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="飞行棋"/><span class="back-menu-item-text">飞行棋</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://blogutil-1305448902.cos-website.ap-nanjing.myqcloud.com/game/sqnwmai803/" title="谁去拿外卖"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="谁去拿外卖"/><span class="back-menu-item-text">谁去拿外卖</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://blogutil-1305448902.cos-website.ap-nanjing.myqcloud.com/win12kymain/win12-main/desktop.html" title="win12网页版"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://blogutil-1305448902.cos-website.ap-nanjing.myqcloud.com/win12kymain/win12-main/icon/logo.svg" alt="win12网页版"/><span class="back-menu-item-text">win12网页版</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="http://game.xiaou61.top/" title="在线游戏"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="在线游戏"/><span class="back-menu-item-text">在线游戏</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 开往</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" target="_blank" rel="noopener" href="https://www.travellings.cn/go.html"><span> 开往</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Git/" style="font-size: 0.88rem;">Git<sup>3</sup></a><a href="/tags/HTML/" style="font-size: 0.88rem;">HTML<sup>1</sup></a><a href="/tags/JVM/" style="font-size: 0.88rem;">JVM<sup>22</sup></a><a href="/tags/Nginx/" style="font-size: 0.88rem;">Nginx<sup>1</sup></a><a href="/tags/Spring/" style="font-size: 0.88rem;">Spring<sup>1</sup></a><a href="/tags/Ts/" style="font-size: 0.88rem;">Ts<sup>1</sup></a><a href="/tags/TypeScript/" style="font-size: 0.88rem;">TypeScript<sup>1</sup></a><a href="/tags/WebApi/" style="font-size: 0.88rem;">WebApi<sup>1</sup></a><a href="/tags/coder1v5/" style="font-size: 0.88rem;">coder1v5<sup>2</sup></a><a href="/tags/css/" style="font-size: 0.88rem;">css<sup>3</sup></a><a href="/tags/java/" style="font-size: 0.88rem;">java<sup>12</sup></a><a href="/tags/javaSE/" style="font-size: 0.88rem;">javaSE<sup>3</sup></a><a href="/tags/javaWeb/" style="font-size: 0.88rem;">javaWeb<sup>2</sup></a><a href="/tags/js%E9%80%86%E5%90%91/" style="font-size: 0.88rem;">js逆向<sup>1</sup></a><a href="/tags/leetcode/" style="font-size: 0.88rem;">leetcode<sup>3</sup></a><a href="/tags/python/" style="font-size: 0.88rem;">python<sup>8</sup></a><a href="/tags/%E4%B9%A6%E7%B1%8D%E6%8E%A8%E8%8D%90/" style="font-size: 0.88rem;">书籍推荐<sup>2</sup></a><a href="/tags/%E5%85%AC%E4%BC%97%E5%8F%B7%E6%90%AC%E8%BF%90/" style="font-size: 0.88rem;">公众号搬运<sup>35</sup></a><a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 0.88rem;">前端<sup>10</sup></a><a href="/tags/%E5%8A%9E%E5%85%AC/" style="font-size: 0.88rem;">办公<sup>1</sup></a><a href="/tags/%E5%90%8E%E7%AB%AF/" style="font-size: 0.88rem;">后端<sup>8</sup></a><a href="/tags/%E5%A4%A9%E6%B6%AF%E8%AE%BA%E5%9D%9B/" style="font-size: 0.88rem;">天涯论坛<sup>1</sup></a><a href="/tags/%E5%AF%BC%E8%88%AA/" style="font-size: 0.88rem;">导航<sup>1</sup></a><a href="/tags/%E5%B0%B1%E4%B8%9A/" style="font-size: 0.88rem;">就业<sup>16</sup></a><a href="/tags/%E5%BE%AE%E4%BF%A1/" style="font-size: 0.88rem;">微信<sup>1</sup></a><a href="/tags/%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/" style="font-size: 0.88rem;">技术杂谈<sup>51</sup></a><a href="/tags/%E6%8E%98%E9%87%91/" style="font-size: 0.88rem;">掘金<sup>14</sup></a><a href="/tags/%E6%9D%82%E9%A1%B9/" style="font-size: 0.88rem;">杂项<sup>1</sup></a><a href="/tags/%E6%B5%8B%E8%AF%95/" style="font-size: 0.88rem;">测试<sup>1</sup></a><a href="/tags/%E6%B8%A1%E4%B8%80%E5%A4%A7%E5%B8%88%E8%AF%BE/" style="font-size: 0.88rem;">渡一大师课<sup>3</sup></a><a href="/tags/%E7%88%AC%E8%99%AB/" style="font-size: 0.88rem;">爬虫<sup>1</sup></a><a href="/tags/%E7%9B%AE%E5%BD%95/" style="font-size: 0.88rem;">目录<sup>1</sup></a><a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 0.88rem;">算法<sup>4</sup></a><a href="/tags/%E8%99%9A%E6%8B%9F%E6%9C%BA/" style="font-size: 0.88rem;">虚拟机<sup>12</sup></a><a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 0.88rem;">设计模式<sup>6</sup></a><a href="/tags/%E8%B7%AF%E9%A3%9E%E5%AD%A6%E9%99%A2/" style="font-size: 0.88rem;">路飞学院<sup>3</sup></a><a href="/tags/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" style="font-size: 0.88rem;">面向对象<sup>1</sup></a><a href="/tags/%E9%9D%A2%E8%AF%95/" style="font-size: 0.88rem;">面试<sup>51</sup></a><a href="/tags/%E9%A3%9E%E8%A1%8C%E6%A3%8B/" style="font-size: 0.88rem;">飞行棋<sup>1</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="Switch Between Traditional Chinese And Simplified Chinese">繁</button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Setting"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="7409599794" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random"></meting-js></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div id="he-plugin-simple"></div><script>var WIDGET = {
  "CONFIG": {
    "modules": "0124",
    "background": "2",
    "tmpColor": "FFFFFF",
    "tmpSize": "16",
    "cityColor": "FFFFFF",
    "citySize": "16",
    "aqiColor": "E8D87B",
    "aqiSize": "16",
    "weatherIconSize": "24",
    "alertIconSize": "18",
    "padding": "10px 10px 10px 10px",
    "shadow": "0",
    "language": "auto",
    "borderRadius": "20",
    "fixed": "true",
    "vertical": "top",
    "horizontal": "left",
    "left": "20",
    "top": "7.1",
    "key": "df245676fb434a0691ead1c63341cd94"
  }
}
</script><link rel="stylesheet" href="https://widget.qweather.net/simple/static/css/he-simple.css?v=1.4.0"/><script src="https://widget.qweather.net/simple/static/js/he-simple.js?v=1.4.0"></script><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.20/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.4/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script async src="/anzhiyu/random.js"></script><div class="js-pjax"><input type="hidden" name="page-type" id="page-type" value="post"></div><script async data-pjax src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.1/bubble/bubble.js"></script><script>var visitorMail = "visitor@anheyu.com";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><script src="/js/anzhiyu/right_click_menu.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>