<!DOCTYPE html><html class="hide-aside" lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>路飞爬虫(第六期) | 小u的博客</title><meta name="keywords" content="python,路飞学院"><meta name="author" content="小u"><meta name="copyright" content="小u"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="路飞爬虫(第六期)"><meta name="application-name" content="路飞爬虫(第六期)"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="路飞爬虫(第六期)"><meta property="og:url" content="http://example.com/2023/10/01/codenotes/python/lf/oc/index.html"><meta property="og:site_name" content="小u的博客"><meta property="og:description" content="第一节,  python基础内容回顾二. 关于爬虫的特殊性爬虫是一个很蛋疼的东西, 可能今天讲解的案例. 明天就失效了. 所以, 不要死盯着一个网站干.  要学会见招拆招(爬虫的灵魂)爬虫程序如果编写的不够完善. 访问频率过高. 很有可能会对服务器造成毁灭性打击, 所以, 不要死盯着一个网站干. 请"><meta property="og:locale" content="en"><meta property="og:image" content="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202309300844043.png"><meta property="article:author" content="小u"><meta property="article:tag" content="Java,java,springboot,mysql,redis,教程,git,软件,编程,开发,互联网,Java 基础,Java 教程,Java程序员进阶之路,Java 入门,Vue,前端,算法"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202309300844043.png"><meta name="description" content="第一节,  python基础内容回顾二. 关于爬虫的特殊性爬虫是一个很蛋疼的东西, 可能今天讲解的案例. 明天就失效了. 所以, 不要死盯着一个网站干.  要学会见招拆招(爬虫的灵魂)爬虫程序如果编写的不够完善. 访问频率过高. 很有可能会对服务器造成毁灭性打击, 所以, 不要死盯着一个网站干. 请"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="http://example.com/2023/10/01/codenotes/python/lf/oc/"><link rel="preconnect" href="//cdn.cbd.int"/><link rel="preconnect" href="//hm.baidu.com"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.20/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?1433b93d16cca6b366bdf23126c0c200";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: {"enable":true,"img":"https://upload-bbs.miyoushe.com/upload/2023/09/03/125766904/ee23df8517f3c3e3efc4145658269c06_5714860933110284659.png"},
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"tianli","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"784b999ee9b2f0689c5a","Referer":"https://mydocs-1305448902.cos-website.ap-nanjing.myqcloud.com/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: undefined,
  greetingBox: {"enable":true,"default":"晚上好👋","list":[{"greeting":"晚安😴","startTime":0,"endTime":5},{"greeting":"早上好鸭👋, 祝你一天好心情！","startTime":6,"endTime":9},{"greeting":"上午好👋, 状态很好，鼓励一下～","startTime":10,"endTime":10},{"greeting":"11点多啦, 在坚持一下就吃饭啦～","startTime":11,"endTime":11},{"greeting":"午安👋, 宝贝","startTime":12,"endTime":14},{"greeting":"🌈充实的一天辛苦啦！","startTime":14,"endTime":18},{"greeting":"19点喽, 奖励一顿丰盛的大餐吧🍔。","startTime":19,"endTime":19},{"greeting":"晚上好👋, 在属于自己的时间好好放松😌~","startTime":20,"endTime":24}]},
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: {"skills":null},
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: 'days',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"Author: 小u","link":"Link: ","source":"Source: 小u的博客","info":"Copyright is owned by the author. For commercial reprints, please contact the author for authorization. For non-commercial reprints, please indicate the source.","copySuccess":"Copy success, copy and reprint please mark the address of this article"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"Traditional Chinese Activated Manually","cht_to_chs":"Simplified Chinese Activated Manually","day_to_night":"Dark Mode Activated Manually","night_to_day":"Light Mode Activated Manually","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: '小u的博客',
  title: '路飞爬虫(第六期)',
  postAI: '',
  pageFillDescription: '第一节  python基础内容回顾, 二. 关于爬虫的特殊性, 三. 必须要掌握的py基础, 3.1 基础语法相关, 3.2  字符串, 3.3  列表, 3.4  字典, 3.5  字符集和bytes, 3.6 文件操作, 3.7  关于函数, 3.8 关于模块, 第二节 正则, 一、正则基础, 1、为什么使用正则, 2、正则与re模块简介, 二、正则表达式, 1、匹配单个字符与数字, 2、匹配锚字符, 3、限定符, 三、re模块中常用函数, 1、match()函数, 2、searce()函数, 3、findall()函数（返回列表）, 4、finditer()函数, 5、split()函数, 6、修正符, 四、正则高级, 1、分组amp起名称, 2、编译, 3、贪婪与非贪婪, 第三节 beautifulsoup, 一、beautifulsoup的简单使用, 1、安装, 1.1解析器, 1.2 解析器对比, 2、快速开始, 3、如何使用, 二、beautifulsoup的遍历文档树, 1、子节点, 1.1 .contents, 2、 节点内容, 2.1 .string, 2.2 .text, 3、 多个内容, 3.1**.strings**, 3.2 .stripped_strings, 4、 父节点, 4.1 .parent, 三、beautifulsoup的搜索文档树, 1、find_all, 1.1 name 参数, 1.2 keyword 参数, 1.3  text 参数, 1.4 limit 参数, 2、find(), 四、beautifulsoup的css选择器, 1、通过标签名查找, 2、通过类名查找, 3、id名查找, 4、组合查找, 5、属性查找第一节基础内容回顾二关于爬虫的特殊性爬虫是一个很蛋疼的东西可能今天讲解的案例明天就失效了所以不要死盯着一个网站干要学会见招拆招爬虫的灵魂爬虫程序如果编写的不够完善访问频率过高很有可能会对服务器造成毁灭性打击所以不要死盯着一个网站干请放慢你爬取的速度为你好也为网站好腾讯阿里字节的网站反爬手段很残忍新手不要去挑战这种大厂等你有实力了慢慢研究哪个都要研究很久的网站非必要不爬取非要爬取请一定降低访问频率为你好不要以为的网站好欺负那是地方性的网站中央的很多重要网站都有非常强力的防护措施瑞数等这种愿意搞的自己研究樵夫搞不定爬虫只能爬你看得见的东西网站的多变性这个是爬虫的魅力我们要全方位的去思考就像找漏洞一样思维逻辑不可能是固定的达到目的即可不要死磕牛角尖要不然你会死的很惨要学会见招拆招关于憋代码这个事要憋一定要憋让你憋主要有两个原因简单的语法使用错误不憋记不住复杂的程序逻辑不憋培养不出来独立思考能力三必须要掌握的基础基础语法相关条件判断条件事情事情上面就是的最基础的语法规则含义是如果条件为真去执行事情如果条件不真去执行事情这东西我就不拆开聊了关于你要记住的事情是它是用来做条件判断的以后你的程序里如果需要条件判断了就用它举例在写爬虫的时候我们会遇到这样的两种情况情况一数据里有一些我们并不需要的内容英雄本色万正常你需要的数据你不需要的数据伪代码理解含义思路里有你不需要的数据再见保留情况二页面结构不统一会有两种页面结构伪代码理解含义思路提取器用来提取页面中内容的提取器页面有可能是不规则的张飞潘长江结果提取器提取页面结果有结果存起来没有结果结果提取器提取页面相信我上面的逻辑并不难但是到了后面很多小伙伴容易踩坑我们完全没必要用一个提取器获取所有的数据完全没必要循环关于循环我们必须要知道一个事情条件循环体如果条件为真就执行循环体然后再次判断条件直到条件为假结束循环反复的执行一段代码关于和是真的意思翻译成人话对的没毛病确定是假的意思翻译成人话不对劲错误有瑕疵不对劲这个应该都能看懂但是下面这个需要各位去记住几乎所有能表示为空的东西都可以认为是上面这一坨全是相反的都是真利用这个特性我们可以有以下的一些写法伪代码理解逻辑结果提取器提取页面结果有结果我要保存结果没结果字符串字符串在爬虫里必须要知道的几个操作索引和切片索引就是第几个字符它从开始切片从字符串中提取个字符我爱黎明黎明爱我从第个到第个取不到我们从网页上提取的数据很多都是带有一些杂质的换行空格怎么去掉可以去掉字符串左右两端的空白空格换行回车制表符我的天哪够乱的字符串好了我的天哪做切割的男人本色万你在网页上提取到这样的一段数据现在我需要电影名称男人本色切割后把三个结果直接怼给三个变量字符串替换我爱黎明这是你从网页上拿到的东西干掉空格我爱黎明将列表拼接为一个完整的字符串我妈不喜欢黎明有时由于网页结构的不规则导致获取的数据是这样的用空字符串把中的每一项拼接起来我妈不喜欢黎明周杰伦不认识我周杰伦不认识我格式化字符串的一种方案周杰伦我喜欢它会把一个变量塞入一个字符串我喜欢周杰伦我的电话号是它会把计算结果赛入一个字符串我的电话号是综上的大括号里其实是一段表达式能计算出结果即可列表列表我们未来遇见的仅次于字符串的一种数据类型它主要是能承载大量的数据理论上你的内存不炸它就能一直存索引切片列表的索引和切片逻辑与字符串完全一致赵本山王大陆大嘴猴马后炮大嘴猴王大陆大嘴猴马后炮注意如果列表中没有数据取会报错报错注意如果给出的索引下标超过了列表的最大索引依然会报错报错增加给列表添加数据删除删除数据不常用好不容易爬到的数据为什么要删周润发把周润发删掉修改赵本山王大陆大嘴猴马后炮周杰伦赵本山周杰伦大嘴猴马后炮用循环数数的一个东西从数到从数到查询必会赵本山周杰伦大嘴猴马后炮循环列表的索引循环列表的内容字典字典可以成对儿的保存数据增加樵夫樵夫修改樵夫樵夫删除不常用樵夫樵夫查询重点樵夫查询的值樵夫拿到中对应的值哈拉少没有哈拉少报错哈拉少没有哈拉少不报错返回它好它不报错循环樵夫循环出所有的获取到所有的并打印嵌套王峰章子怡胡一菲胡二菲胡三菲王峰的第二个孩子的名字王峰所有孩子的名称和年龄字符集和字符集记住两个字符集就够了一个是一个是都是支持中文的但是的编码数量远大于我们平时使用的最多的是把字符串转化成字节我的天哪一个中文在里是个字节一个英文是一个字节所以英文字母是正常显示的把字节还原回字符串记住不是给人看的是给机器看的我们遇到的所有文字图片音频视频所有所有的东西到了计算机里都是字节文件操作中想要处理一个文件必须用先打开一个文件语法规则文件名模式文件编码文件名就不解释了模式我们需要知道的主要有个分别是只读模式含义是当前这一次的目的是读取数据所以只能读不能写只写模式含义是当前这一次的目的是写入数据所以只能写不能读追加模式含义是当前这一次的目的是向后追加所以只能写不能读字节模式可以和上面三种模式进行混合搭配目的是写入的内容或读取的内容是字节问如果我想保存一张图片应该用哪种模式我想读取文件用哪种模式我想复制一个文件应该用哪种模式文件编码只有处理的文件是文本的时候才能使用并且不可以是的时候我们用的是另一种写法文件名模式编码这种写法的好处是不需要我们手动去关闭读取一个文本文件躺尸一摆手循环可以逐行的进行循环文件中的内容关于函数在代码量很少的时候我们并不需要函数但是一旦代码量大了一次写个几百行代码调试起来就很困难此时建议把程序改写成一个一个具有特定功能的函数方便调试也方便代码的重用函数名形式参数函数体返回值上面是编写一个函数的固定逻辑但是编写好的函数是不会自己运行的必须有人调用才可以函数名实际参数写一个试试我要发送请求了我要获取到页面源代码啊页面源代码再来一个我要下载图片了保存在胡二飞大哥大哥飞飞飞总结函数的好处就是以后需要该功能不用再写重复代码了关于模块模块是啥模块就是已经有人帮我们写好了的一些代码这些代码被保存在一个文件或者一个文件夹里我们可以拿来直接用在中有三种模块第一种内置模块不用安装直接导入就能用第二种第三方模块需要安装安装后导入就可以用了第三种自定义模块新手先别自己定义模块直接导入就能用导入模块的语法模块模块功能模块子模块功能举例子搞爬虫必须要了解的一些内置模块模块这个是获取到时间戳让程序暂停秒模块判断文件是否存在判断文件或者文件夹是否存在路径拼接创建文件夹模块重中之重现在的网站不同于从前了习惯性用来传递数据所以我们必须要知道是啥以及如何处理是一种类似字典一样的东西对于而言是字符串例如你看这破玩意就是如何来转化它字符串字典字典字符串模块随机没别的用处生成随机数的随机数多跑两次效果更加异常处理这个是重点我们在写爬虫的时候非常容易遇到问题但这些问题本身并不是我们程序的问题比如你在抓取某网站的时候由于网络波动或者他服务器本身压力太大导致本次请求失败这种现象太常见了此时我们程序这边就会崩溃打印一堆红色的文字让你难受的一怎么办我们要清楚一个事情我们平时在打开一个网址的时候如果长时间没有反应或者加载很慢的时候我们习惯性的会刷新网页对吧这个逻辑就像程序如果本次请求失败了能不能重新来一次我们接下来聊的这个异常处理就是干这个事儿的尝试假如我是一段爬虫代码请求到对方服务器我得出事儿啊出事儿了出错了我给你兜着怎么兜打印一下就过去了不论上面是否出错我这里依然可以执行看懂了么程序执行的时候如果中的代码出现错误则自动跳到中并执行中的代码然后程序正常的继续执行有了这玩意我们就可以写出一段很漂亮的代码逻辑我要发送请求了我要干美国的总部我要上天我成功了成功了就跳出循环失败了我不怕失败再来改良版我要发送请求了我要干美国的总部我要上天我成功了成功了就跳出循环失败了我不怕失败再来第二节正则一正则基础为什么使用正则需求判断一个字符串是否是手机号解决编写一个函数给函数一个字符串如果是手机号则返回否则返回代码长度为全部都是数字字符以开头是手机号不是手机号注意如果使用正则会让这个问题变得简单正则与模块简介概述正则表达式又称规则表达式正则表达式描述了一种字符串匹配的模式正则匹配是一个模糊的匹配不是精确匹配自版本开始增加了模块该模块提供了风格的正则表达式模式模块是语言拥有了所有正则表达式的功能如下四个方法经常使用二正则表达式匹配单个字符与数字匹配说明匹配除换行符以外的任意字符当被设置为时可以匹配包含换行符以内的所有字符里面是字符集合匹配里任意一个字符匹配任意一个数字字符匹配任意一个数字字符匹配任意一个小写英文字母字符匹配任意一个大写英文字母字符匹配任意一个英文字母字符匹配任意一个数字或英文字母字符里的称为脱字符表示非匹配不在内的任意一个字符以中内的某一个字符作为开头匹配任意一个数字字符相当于匹配任意一个非数字字符相当于匹配字母下划线数字中的任意一个字符相当于匹配非字母下划线数字中的任意一个字符相当于匹配空白符空格换页换行回车制表相当于匹配非空白符空格换页换行回车制表相当于匹配锚字符锚字符用来判定是否按照规定开始或者结尾匹配说明行首匹配和里的不是一个意思行尾匹配限定符限定符用来指定正则表达式的一个给定组件必须要出现多少次才能满足匹配有或或或大括号大括号或或共种匹配说明匹配括号内的作为一个整体去匹配一个单元子存储匹配个或者个非贪婪匹配匹配个或任意多个匹配至少一个确定匹配个是非负数至少匹配个匹配至少个最多个三模块中常用函数通用修正符值说明是匹配对大小写不敏感使匹配包括换行符在内的所有字符通用函数获取匹配结果使用方法获取到匹配的值返回一个包含所有小组字符串的元组也就是自存储的值从到所含的小组号函数原型功能匹配成功返回匹配的对象匹配失败返回获取匹配结果使用方法获取到匹配的值返回一个包含所有小组字符串的元组从到所含的小组号注意从第一位开始匹配只匹配一次参数参数说明匹配的正则表达式一种字符串的模式要匹配的字符串标识位用于控制正则表达式的匹配方式代码给当前匹配到的结果起别名函数原型功能扫描整个字符串并返回第一个模式成功的匹配匹配失败返回参数参数说明匹配的正则表达式一种字符串的模式要匹配的字符串标识位用于控制正则表达式的匹配方式注意只要字符串包含就可以只匹配一次示例注意与的区别相同点都只匹配一次不同点是在要匹配的字符串中包含正则表达式的内容就可以必须第一位就开始匹配否则匹配失败函数返回列表原型功能扫描整个字符串并返回所有匹配的模式结果的字符串列表参数参数说明匹配的正则表达式一种字符串的模式要匹配的字符串标识位用于控制正则表达式的匹配方式示例百度淘宝电影网站我是倾斜我是倾斜我是倾斜里是不区分大小写给正则里面匹配的加上圆括号会将括号里面的内容进行单独的返回百度百度括号的区别百度不区分大小写的匹配百度淘宝百度使支持换行匹配支持换行支持不区分大小写匹配函数原型功能与类似返回一个迭代器参数参数说明匹配的正则表达式一种字符串的模式要匹配的字符串标识位用于控制正则表达式的匹配方式代码函数作用切割字符串原型参数正则表达式要拆分的字符串最大拆分次数默认拆分全部修正符示例通过特殊字符对其进行拆分成列表修正符作用对正则进行修正使用等函数参数的使用修正符不区分大小写匹配使可以匹配换行符匹配任意字符使用标签标签四正则高级分组起名称概念处理简单的判断是否匹配之外正则表达式还有提取子串的功能用表示的就是要提取的分组代码给当前匹配到的结果起别名说明正则表达式中定义了组就可以在对象上用方法提取出子串来永远是原始字符串表示第个子串编译概念当在中使用正则表达式时模块会做两件事一件是编译正则表达式如果表达式的字符串本身不合法会报错另一件是用编译好的正则表达式提取匹配字符串编译优点如果一个正则表达式要使用几千遍每一次都会编译出于效率的考虑进行正则表达式的编译就不需要每次都编译了节省了编译的时间从而提升效率函数原型作用将模式编译成正则对象参数参数说明匹配的正则表达式一种字符串的模式标识位用于控制正则表达式的匹配方式值说明是匹配对大小写不敏感使匹配包括换行符在内的所有字符返回值编译好的正则对象示例编译后其他方法的使用原型参数参数说明待匹配的字符串从字符串下标开始结束下标示例贪婪与非贪婪贪婪模式贪婪概念匹配尽可能多的字符匹配换行符以外的字符至少一次匹配换行符以外的字符任意次实例标签标签标签标签标签非贪婪模式非贪婪概念尽可能少的匹配称为非贪婪匹配即可匹配换行符以外的字符至少一次拒绝贪婪匹配换行符以外的字符任意次拒绝贪婪实例标签标签标签标签标签标签练习中信证券将产品名称管理人风险评级认购金额起点公示信息全部抓到练习抓取股票每一行数据豆瓣抓取标题和图片标签第三节一的简单使用简单来说是的一个库最主要的功能是从网页抓取数据官方解释如下提供一些简单的式的函数用来处理导航搜索修改分析树等功能它是一个工具箱通过解析文档为用户提供需要抓取的数据因为简单所以不需要多少代码就可以写出一个完整的应用程序安装解析器支持标准库中的解析器还支持一些第三方的解析器如果我们不安装它则会使用默认的解析器解析器更加强大速度更快推荐安装解析器对比官网文档快速开始下面的一段代码将作为例子被多次用到这是爱丽丝梦游仙境的的一段内容以后内容中简称为爱丽丝的文档使用解析这段代码能够得到一个的对象并能按照标准的缩进格式的结构输出进行美化匹配代码几个简单的浏览结构化数据的方法获取标签获取标签名称获取标签内的内容获取父级标签获取父级标签名称获取的属性值获取为的标签从文档中找到所有标签的链接从文档中获取所有文字内容如何使用将一段文档传入的构造方法就能得到一个文档的对象可以传入一段字符串或一个文件句柄然后选择最合适的解析器来解析这段文档如果手动指定解析器那么会选择指定的解析器来解析文档二的遍历文档树还拿爱丽丝梦游仙境的文档来做例子和解析的有时候会根据是否完整而有解析不同的问题需要注意通过这段例子来演示怎样从文档的一段内容找到另一段内容子节点一个可能包含多个字符串或其它的这些都是这个的子节点提供了许多操作和遍历子节点的属性注意中字符串节点不支持这些属性因为字符串没有子节点的属性可以将的子节点以列表的方式输出字符串没有属性因为字符串没有子节点节点内容如果只有一个类型子节点那么这个可以使用得到子节点如果一个仅有一个子节点那么这个也可以使用方法输出结果与当前唯一子节点的结果相同通俗点说就是如果一个标签里面没有标签了那么就会返回标签里面的内容如果标签里面只有唯一的一个标签了那么也会返回最里面的内容例如如果包含了多个子节点就无法确定方法应该调用哪个子节点的内容的输出结果是如果包含了多个子节点则会返回内部所有文本内容注意和都可以返回所有文本内容区别返回内容为字符串类型为生成器多个内容属性获取多个内容不过需要遍历获取比如下面的例子输出的字符串中可能包含了很多空格或空行使用可以去除多余空白内容父节点继续分析文档树每个或字符串都有父节点被包含在某个中通过属性来获取某个元素的父节点在例子爱丽丝的文档中标签是标签的父节点文档的顶层节点比如的父节点是对象三的搜索文档树方法搜索当前的所有子节点并判断是否符合过滤器的条件模糊查询包含的就可以有几个方法很相似还有几个方法是新的参数中的和是什么含义为什么返回的是为的标签我们来仔细看一下的参数参数参数可以查找所有名字为的字符串对象会被自动忽略掉简单的用法如下搜索参数的值可以使任一类型的过滤器字符串正则表达式列表方法或是传字符串最简单的过滤器是字符串在搜索方法中传入一个字符串参数会查找与字符串完整匹配的内容下面的例子用于查找文档中所有的标签传正则表达式如果传入正则表达式作为参数会通过正则表达式的来匹配内容下面例子中找出所有以开头的标签这表示和标签都应该被找到传列表如果传入列表参数会将与列表中任一元素匹配的内容返回下面代码找到文档中所有标签和标签参数如果一个指定名字的参数不是搜索内置的参数名搜索时会把该参数当作指定名字的属性来搜索如果包含一个名字为的参数会搜索每个的属性超链接包含标签以作为开头的字符串选择器包含的节点搜索指定名字的属性时可以使用的参数值包括字符串正则表达式列表下面的例子在文档树中查找所有包含属性的无论的值是什么使用多个指定名字的参数可以同时过滤的多个属性在这里我们想用过滤不过是的关键词这怎么办加个下划线就可以通过方法的参数定义一个字典参数来搜索包含特殊属性的注意如何查看条件和同时存在时的写法参数通过参数可以搜搜文档中的字符串内容与参数的可选值一样参数接受字符串正则表达式列表只要包含就可以参数方法返回全部的搜索结构如果文档树很大那么搜索会很慢如果我们不需要全部结果可以使用参数限制返回结果的数量效果与中的关键字类似当搜索到的结果数量达到的限制时就停止搜索返回结果方法将返回文档中符合条件的所有尽管有时候我们只想得到一个结果比如文档中只有一个标签那么使用方法来查找标签就不太合适使用方法并设置参数不如直接使用方法下面两行代码是等价的唯一的区别是方法的返回结果是值包含一个元素的列表而方法直接返回结果方法没有找到目标是返回空列表方法找不到目标时返回是的名字方法的简写这个简写的原理就是多次调用当前的方法四的选择器我们在写时标签名不加任何修饰类名前加点名前加在这里我们也可以利用类似的方法来筛选元素用到的方法是返回类型是通过标签名查找通过类名查找名查找组合查找组合查找即和写文件时标签名与类名名进行的组合原理是一样的例如查找标签中等于的内容二者需要用空格分开直接子标签查找查找既有也有选择器的标签查找有多个选择器的标签查找有多个选择器和一个选择器的标签属性查找查找时还可以加入属性元素属性需要用中括号括起来注意属性和标签属于同一节点所以中间不能加空格否则会无法匹配到方法返回的结果都是列表形式可以遍历形式输出然后用方法来获取它的内容',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-09-16 17:19:52',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202309300844043.png"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://mydocs.guoyaxue.top/" title="旧版博客"><img class="back-menu-item-icon" src="/img/favicon.ico" alt="旧版博客"/><span class="back-menu-item-text">旧版博客</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="http://pan.xiaou61.top/#/" title="免费网盘"><img class="back-menu-item-icon" src="/img/favicon.ico" alt="免费网盘"/><span class="back-menu-item-text">免费网盘</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="http://cloud.xiaou61.top/" title="云盘(自用)"><img class="back-menu-item-icon" src="/img/favicon.ico" alt="云盘(自用)"/><span class="back-menu-item-text">云盘(自用)</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="http://wpzc.xiaou61.top/" title="云盘转存"><img class="back-menu-item-icon" src="/img/favicon.ico" alt="云盘转存"/><span class="back-menu-item-text">云盘转存</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="http://love.xiaou61.top/#/" title="关于我们(My girlFriend)"><img class="back-menu-item-icon" src="/img/favicon.ico" alt="关于我们(My girlFriend)"/><span class="back-menu-item-text">关于我们(My girlFriend)</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">娱乐项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="http://fxq.xiaou61.top/#/" title="飞行棋"><img class="back-menu-item-icon" src="/img/favicon.ico" alt="飞行棋"/><span class="back-menu-item-text">飞行棋</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://blogutil-1305448902.cos-website.ap-nanjing.myqcloud.com/game/sqnwmai803/" title="谁去拿外卖"><img class="back-menu-item-icon" src="https://image.anheyu.com/favicon.ico" alt="谁去拿外卖"/><span class="back-menu-item-text">谁去拿外卖</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://blogutil-1305448902.cos-website.ap-nanjing.myqcloud.com/win12kymain/win12-main/desktop.html" title="win12网页版"><img class="back-menu-item-icon" src="https://blogutil-1305448902.cos-website.ap-nanjing.myqcloud.com/win12kymain/win12-main/icon/logo.svg" alt="win12网页版"/><span class="back-menu-item-text">win12网页版</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="http://game.xiaou61.top/" title="在线游戏"><img class="back-menu-item-icon" src="/img/favicon.ico" alt="在线游戏"/><span class="back-menu-item-text">在线游戏</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">小u的博客</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 开往</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" target="_blank" rel="noopener" href="https://www.travellings.cn/go.html"><span> 开往</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button only-home" id="travellings_button" title="随机前往一个开往项目网站"><a class="site-page" onclick="anzhiyu.totraveling()" title="随机前往一个开往项目网站" href="javascript:void(0);" rel="external nofollow" data-pjax-state="external"><i class="anzhiyufont anzhiyu-icon-train"></i></a></div><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202309300816229.jpg" target="_blank"><img class="post-qr-code-img" alt="微信" src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202309300816229.jpg"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202309300816224.jpg" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202309300816224.jpg"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> Newest Comments</span></div><div class="aside-list"><span>loading...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Git/" style="font-size: 1.05rem;">Git<sup>3</sup></a><a href="/tags/HTML/" style="font-size: 1.05rem;">HTML<sup>1</sup></a><a href="/tags/JVM/" style="font-size: 1.05rem;">JVM<sup>22</sup></a><a href="/tags/Nginx/" style="font-size: 1.05rem;">Nginx<sup>1</sup></a><a href="/tags/Spring/" style="font-size: 1.05rem;">Spring<sup>1</sup></a><a href="/tags/Ts/" style="font-size: 1.05rem;">Ts<sup>1</sup></a><a href="/tags/TypeScript/" style="font-size: 1.05rem;">TypeScript<sup>1</sup></a><a href="/tags/WebApi/" style="font-size: 1.05rem;">WebApi<sup>1</sup></a><a href="/tags/coder1v5/" style="font-size: 1.05rem;">coder1v5<sup>2</sup></a><a href="/tags/css/" style="font-size: 1.05rem;">css<sup>3</sup></a><a href="/tags/java/" style="font-size: 1.05rem;">java<sup>12</sup></a><a href="/tags/javaSE/" style="font-size: 1.05rem;">javaSE<sup>3</sup></a><a href="/tags/javaWeb/" style="font-size: 1.05rem;">javaWeb<sup>2</sup></a><a href="/tags/js%E9%80%86%E5%90%91/" style="font-size: 1.05rem;">js逆向<sup>1</sup></a><a href="/tags/leetcode/" style="font-size: 1.05rem;">leetcode<sup>3</sup></a><a href="/tags/python/" style="font-size: 1.05rem;">python<sup>8</sup></a><a href="/tags/%E4%B9%A6%E7%B1%8D%E6%8E%A8%E8%8D%90/" style="font-size: 1.05rem;">书籍推荐<sup>2</sup></a><a href="/tags/%E5%85%AC%E4%BC%97%E5%8F%B7%E6%90%AC%E8%BF%90/" style="font-size: 1.05rem;">公众号搬运<sup>35</sup></a><a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 1.05rem;">前端<sup>10</sup></a><a href="/tags/%E5%8A%9E%E5%85%AC/" style="font-size: 1.05rem;">办公<sup>1</sup></a><a href="/tags/%E5%90%8E%E7%AB%AF/" style="font-size: 1.05rem;">后端<sup>8</sup></a><a href="/tags/%E5%A4%A9%E6%B6%AF%E8%AE%BA%E5%9D%9B/" style="font-size: 1.05rem;">天涯论坛<sup>1</sup></a><a href="/tags/%E5%AF%BC%E8%88%AA/" style="font-size: 1.05rem;">导航<sup>1</sup></a><a href="/tags/%E5%B0%B1%E4%B8%9A/" style="font-size: 1.05rem;">就业<sup>16</sup></a><a href="/tags/%E5%BE%AE%E4%BF%A1/" style="font-size: 1.05rem;">微信<sup>1</sup></a><a href="/tags/%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/" style="font-size: 1.05rem;">技术杂谈<sup>51</sup></a><a href="/tags/%E6%8E%98%E9%87%91/" style="font-size: 1.05rem;">掘金<sup>14</sup></a><a href="/tags/%E6%9D%82%E9%A1%B9/" style="font-size: 1.05rem;">杂项<sup>1</sup></a><a href="/tags/%E6%B5%8B%E8%AF%95/" style="font-size: 1.05rem;">测试<sup>1</sup></a><a href="/tags/%E6%B8%A1%E4%B8%80%E5%A4%A7%E5%B8%88%E8%AF%BE/" style="font-size: 1.05rem;">渡一大师课<sup>3</sup></a><a href="/tags/%E7%88%AC%E8%99%AB/" style="font-size: 1.05rem;">爬虫<sup>1</sup></a><a href="/tags/%E7%9B%AE%E5%BD%95/" style="font-size: 1.05rem;">目录<sup>1</sup></a><a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 1.05rem;">算法<sup>4</sup></a><a href="/tags/%E8%99%9A%E6%8B%9F%E6%9C%BA/" style="font-size: 1.05rem;">虚拟机<sup>12</sup></a><a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 1.05rem;">设计模式<sup>6</sup></a><a href="/tags/%E8%B7%AF%E9%A3%9E%E5%AD%A6%E9%99%A2/" style="font-size: 1.05rem;">路飞学院<sup>3</sup></a><a href="/tags/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" style="font-size: 1.05rem;">面向对象<sup>1</sup></a><a href="/tags/%E9%9D%A2%E8%AF%95/" style="font-size: 1.05rem;">面试<sup>51</sup></a><a href="/tags/%E9%A3%9E%E8%A1%8C%E6%A3%8B/" style="font-size: 1.05rem;">飞行棋<sup>1</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>Archives</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/10/"><span class="card-archive-list-date">October 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">234</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/09/"><span class="card-archive-list-date">September 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">3</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/05/"><span class="card-archive-list-date">May 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item on" id="consoleCommentBarrage" onclick="anzhiyu.switchCommentBarrage()" title="热评开关"><a class="commentBarrage"><i class="anzhiyufont anzhiyu-icon-message"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/python/" itemprop="url">python</a><i class="anzhiyufont anzhiyu-icon-angle-right post-meta-separator"></i><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/python/%E8%B7%AF%E9%A3%9E%E5%AD%A6%E9%99%A2/" itemprop="url">路飞学院</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/python/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>python</span></a><a class="article-meta__tags" href="/tags/%E8%B7%AF%E9%A3%9E%E5%AD%A6%E9%99%A2/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>路飞学院</span></a></span></div></div><h1 class="post-title" itemprop="name headline">路飞爬虫(第六期)</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2023-09-30T23:34:06.142Z" title="Created 2023-10-01 07:34:06">2023-10-01</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2023-09-16T09:19:52.839Z" title="Updated 2023-09-16 17:19:52">2023-09-16</time></span></div><div class="meta-secondline"><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为邯郸"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>邯郸</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src=""></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="http://example.com/2023/10/01/codenotes/python/lf/oc/"><header><a class="post-meta-categories" href="/categories/python/" itemprop="url">python</a><a class="post-meta-categories" href="/categories/python/%E8%B7%AF%E9%A3%9E%E5%AD%A6%E9%99%A2/" itemprop="url">路飞学院</a><a href="/tags/python/" tabindex="-1" itemprop="url">python</a><a href="/tags/%E8%B7%AF%E9%A3%9E%E5%AD%A6%E9%99%A2/" tabindex="-1" itemprop="url">路飞学院</a><h1 id="CrawlerTitle" itemprop="name headline">路飞爬虫(第六期)</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">小u</span><time itemprop="dateCreated datePublished" datetime="2023-09-30T23:34:06.142Z" title="Created 2023-10-01 07:34:06">2023-10-01</time><time itemprop="dateCreated datePublished" datetime="2023-09-16T09:19:52.839Z" title="Updated 2023-09-16 17:19:52">2023-09-16</time></header><h1 id="第一节-python基础内容回顾"><a href="#第一节-python基础内容回顾" class="headerlink" title="第一节,  python基础内容回顾"></a>第一节,  python基础内容回顾</h1><h2 id="二-关于爬虫的特殊性"><a href="#二-关于爬虫的特殊性" class="headerlink" title="二. 关于爬虫的特殊性"></a>二. 关于爬虫的特殊性</h2><p>爬虫是一个很蛋疼的东西, 可能今天讲解的案例. 明天就失效了. 所以, 不要死盯着一个网站干.  要学会见招拆招(爬虫的灵魂)<br>爬虫程序如果编写的不够完善. 访问频率过高. 很有可能会对服务器造成毁灭性打击, 所以, 不要死盯着一个网站干. 请放慢你爬取的速度. 为你好, 也为网站好. </p>
<p>腾讯, 阿里, 字节的网站, 反爬手段很残忍. 新手不要去挑战这种大厂. 等你有实力了. 慢慢研究(哪个都要研究很久….)</p>
<p>gov的网站, 非必要, 不爬取. 非要爬取. 请一定降低访问频率. 为你好….</p>
<p>不要以为gov的网站好欺负. 那是地方性的网站. 中央的很多重要网站都有非常强力的防护措施(瑞数等…) 这种. 愿意搞的. 自己研究. 樵夫搞不定….</p>
<p>爬虫只能爬 你看得见的东西!!!!!</p>
<p>网站的多变性: 这个是爬虫的魅力. 我们要全方位的去思考. 就像找漏洞一样. 思维逻辑不可能是固定的. 达到目的即可. 不要死磕牛角尖. 要不然, 你会死的很惨…. 要学会见招拆招. </p>
<p>关于憋代码这个事.  要憋. 一定要憋. 让你憋主要有两个原因. </p>
<ol>
<li><strong>简单的语法使用错误. 不憋记不住</strong></li>
<li><strong>复杂的程序逻辑. 不憋培养不出来独立思考能力.</strong></li>
</ol>
<h2 id="三-必须要掌握的py基础"><a href="#三-必须要掌握的py基础" class="headerlink" title="三. 必须要掌握的py基础"></a>三. 必须要掌握的py基础</h2><h3 id="3-1-基础语法相关"><a href="#3-1-基础语法相关" class="headerlink" title="3.1 基础语法相关"></a>3.1 基础语法相关</h3><ol>
<li><p>if条件判断</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> 条件:</span><br><span class="line">    <span class="comment"># 事情1</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="comment"># 事情2</span></span><br></pre></td></tr></table></figure>

<p>上面就是if的最基础的语法规则. 含义是, 如果条件为真, 去执行<code>事情1</code>, 如果条件不真, 去执行<code>事情2</code>. 这东西. 我就不拆开聊了. 关于if. 你要记住的事情是, <code>它是用来做条件判断的</code>. 以后你的程序里,  如果需要条件判断了. 就用它….</p>
<p>举例,</p>
<p>在写爬虫的时候. 我们会遇到这样的两种情况 </p>
<p>情况一, 数据里有一些我们并不需要的内容</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">data = <span class="string">&quot;10,英雄本色,1500万&quot;</span>   <span class="comment"># 正常你需要的数据</span></span><br><span class="line">data = <span class="string">&quot;11,-,-&quot;</span>  <span class="comment"># 你不需要的数据</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 伪代码, 理解含义(思路)</span></span><br><span class="line"><span class="keyword">if</span> data里有你不需要的数据:</span><br><span class="line">	再见</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line"> 	保留</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>情况二, 页面结构不统一, 会有两种页面结构</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 伪代码, 理解含义(思路)</span></span><br><span class="line">提取器<span class="number">1</span> = xxxx  <span class="comment">#  用来提取页面中内容的</span></span><br><span class="line">提取器<span class="number">2</span> = xxxxxx</span><br><span class="line"></span><br><span class="line"><span class="comment"># 页面有可能是不规则的。 张飞， 潘长江 </span></span><br><span class="line">结果<span class="number">1</span> = 提取器<span class="number">1.</span>提取(页面)</span><br><span class="line"><span class="keyword">if</span> 结果<span class="number">1</span>:</span><br><span class="line">    有结果. 存起来</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    没有结果. </span><br><span class="line">    结果<span class="number">2</span> = 提取器<span class="number">2.</span>提取(页面)</span><br></pre></td></tr></table></figure>

<p>相信我, 上面的逻辑并不难. 但是, 到了后面很多小伙伴容易踩坑. 我们完全没必要用一个提取器获取所有的数据. 完全没必要…..</p>
</li>
<li><p>while循环<br>关于循环, 我们必须要知道一个事情. </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> 条件:</span><br><span class="line">    循环体</span><br></pre></td></tr></table></figure>

<p>如果条件为真, 就执行循环体, 然后再次判断条件…..直到条件为假. 结束循环. </p>
<p>反复的执行一段代码</p>
</li>
<li><p>关于True和False</p>
<p>True, 是真的意思. 翻译成人话:  对的, OK, 没毛病. 确定</p>
<p>False, 是假的意思. 翻译成人话: 不对劲, 错误, No. 有瑕疵. 不对劲</p>
<p>这个应该都能看懂. </p>
<p>但是下面这个, 需要各位去记住</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 几乎所有能表示为空的东西. 都可以认为是False</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">bool</span>(<span class="number">0</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">bool</span>(<span class="string">&quot;&quot;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">bool</span>([]))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">bool</span>(&#123;&#125;))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">bool</span>(<span class="built_in">set</span>()))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">bool</span>(<span class="built_in">tuple</span>()))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">bool</span>(<span class="literal">None</span>))</span><br><span class="line"><span class="comment"># 上面这一坨全是False, 相反的. 都是真. 利用这个特性. 我们可以有以下的一些写法</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 伪代码, 理解逻辑. </span></span><br><span class="line">结果 = 提取器.提取(页面)</span><br><span class="line"><span class="keyword">if</span> 结果:</span><br><span class="line">    有结果. 我要保存结果</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    没结果. ......</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="3-2-字符串"><a href="#3-2-字符串" class="headerlink" title="3.2  字符串"></a>3.2  字符串</h3><p>​	字符串在<code>爬虫</code>里. 必须要知道的几个操作:</p>
<ol>
<li><p>索引和切片<br>索引, 就是第几个字符. 它从0开始.<br>切片, 从字符串中提取n个字符. </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="string">&quot;我爱黎明,黎明爱我&quot;</span></span><br><span class="line"><span class="built_in">print</span>(s[<span class="number">1</span>])</span><br><span class="line"><span class="built_in">print</span>(s[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(s[<span class="number">2</span>:<span class="number">4</span>])  从第<span class="number">2</span>个, 到第<span class="number">4</span>个(取不到<span class="number">4</span>)</span><br></pre></td></tr></table></figure>


</li>
<li><p>strip()</p>
<p>我们从网页上提取的数据. 很多都是带有一些杂质的(换行, 空格),怎么去掉?</p>
<p>strip()可以去掉字符串<code>左右两端</code>的空白(空格, 换行\n, 回车\r, 制表符\t)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="string">&quot;    \t\t\t我的天哪\r\r      \n\n  &quot;</span>  <span class="comment"># 够乱的字符串</span></span><br><span class="line">s1 = s.strip()</span><br><span class="line"><span class="built_in">print</span>(s1)  <span class="comment"># 好了 `我的天哪`</span></span><br></pre></td></tr></table></figure>


</li>
<li><p>split()</p>
<p>split,  做切割的. </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="string">&quot;10,男人本色,100000万&quot;</span>  <span class="comment"># 你在网页上提取到这样的一段数据. 现在我需要电影名称</span></span><br><span class="line">tmps = s.split(<span class="string">&quot;,&quot;</span>)</span><br><span class="line">name = tmps[<span class="number">1</span>]</span><br><span class="line"><span class="built_in">print</span>(name)  <span class="comment"># 男人本色</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">id</span>, name, money = s.split(<span class="string">&quot;,&quot;</span>)  <span class="comment"># 切割后. 把三个结果直接怼给三个变量</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>)</span><br><span class="line"><span class="built_in">print</span>(name)</span><br><span class="line"><span class="built_in">print</span>(money)</span><br></pre></td></tr></table></figure>


</li>
<li><p>replace()</p>
<p>replace, 字符串替换</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="string">&quot;我      \t\t\n\n爱   黎       明    &quot;</span>   <span class="comment"># 这是你从网页上拿到的东西</span></span><br><span class="line">s1 = replace(<span class="string">&quot; &quot;</span>, <span class="string">&quot;&quot;</span>).replace(<span class="string">&quot;\t&quot;</span>, <span class="string">&quot;&quot;</span>).replace(<span class="string">&quot;\n&quot;</span>, <span class="string">&quot;&quot;</span>)  <span class="comment"># 干掉空格, \t, \n</span></span><br><span class="line"><span class="built_in">print</span>(s1)  <span class="comment"># 我爱黎明</span></span><br></pre></td></tr></table></figure>


</li>
<li><p>join()</p>
<p>join, 将列表拼接为一个完整的字符串</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">lst = [<span class="string">&quot;我妈&quot;</span>, <span class="string">&quot;不喜欢&quot;</span>, <span class="string">&quot;黎明&quot;</span>]  <span class="comment"># 有时,由于网页结构的不规则, 导致获取的数据是这样的. </span></span><br><span class="line">s1 = <span class="string">&quot;&quot;</span>.join(lst)  <span class="comment"># 用空字符串把lst中的每一项拼接起来</span></span><br><span class="line"><span class="built_in">print</span>(s1)  <span class="comment"># 我妈不喜欢黎明</span></span><br><span class="line"></span><br><span class="line">lst2 = [<span class="string">&quot;\n\r&quot;</span>,<span class="string">&quot;\n\r&quot;</span>,<span class="string">&quot;周杰伦\n\r&quot;</span>, <span class="string">&quot;\n不认识我\r&quot;</span>] </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">s2 = <span class="string">&quot;&quot;</span>.join(lst2).replace(<span class="string">&quot;\n&quot;</span>, <span class="string">&quot;&quot;</span>).replace(<span class="string">&quot;\r&quot;</span>, <span class="string">&quot;&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(s2)  <span class="comment"># 周杰伦不认识我</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li><p>f-string</p>
<p>格式化字符串的一种方案</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="string">&quot;周杰伦&quot;</span></span><br><span class="line">s1 = <span class="string">f&quot;我喜欢<span class="subst">&#123;s&#125;</span>&quot;</span>  <span class="comment">#  它会把一个变量塞入一个字符串</span></span><br><span class="line"><span class="built_in">print</span>(s1)  <span class="comment"># 我喜欢周杰伦</span></span><br><span class="line"></span><br><span class="line">k = <span class="number">10085</span></span><br><span class="line">s2 = <span class="string">f&quot;我的电话号是<span class="subst">&#123;k+<span class="number">1</span>&#125;</span>&quot;</span> <span class="comment"># 它会把计算结果赛入一个字符串</span></span><br><span class="line"><span class="built_in">print</span>(s2)  <span class="comment"># 我的电话号是10086</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 综上, f-string的大括号里, 其实是一段表达式.能计算出结果即可</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="3-3-列表"><a href="#3-3-列表" class="headerlink" title="3.3  列表"></a>3.3  列表</h3><p>列表, 我们未来遇见的仅次于字符串的一种数据类型. 它主要是能承载大量的数据. 理论上. 你的内存不炸. 它就能一直存</p>
<ol>
<li><p>索引, 切片</p>
<p>列表的索引和切片逻辑与字符串完全一致</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">lst = [<span class="string">&quot;赵本山&quot;</span>, <span class="string">&quot;王大陆&quot;</span>, <span class="string">&quot;大嘴猴&quot;</span>, <span class="string">&quot;马后炮&quot;</span>]</span><br><span class="line">item1 = lst[<span class="number">2</span>]  <span class="comment"># 大嘴猴</span></span><br><span class="line">item2 = lst[<span class="number">1</span>]  <span class="comment"># 王大陆</span></span><br><span class="line"></span><br><span class="line">lst2 = lst[<span class="number">2</span>:]</span><br><span class="line"><span class="built_in">print</span>(lst2)  <span class="comment"># [&quot;大嘴猴&quot;, &quot;马后炮&quot;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 注意, 如果列表中没有数据. 取0会报错</span></span><br><span class="line">lst = []</span><br><span class="line"><span class="built_in">print</span>(lst[<span class="number">0</span>])  <span class="comment"># 报错, Index out of bounds</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 注意, 如果给出的索引下标超过了列表的最大索引. 依然会报错</span></span><br><span class="line">lst = [<span class="string">&quot;123&quot;</span>, <span class="string">&quot;456&quot;</span>]</span><br><span class="line"><span class="built_in">print</span>(lst[<span class="number">9999</span>])  <span class="comment"># 报错, Index out of bounds</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>


</li>
<li><p>增加</p>
<p>给列表添加数据. </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">lst = [<span class="number">11</span>,<span class="number">22</span>]</span><br><span class="line">lst.append(<span class="number">33</span>)</span><br><span class="line">lst.append(<span class="number">44</span>)</span><br><span class="line"><span class="built_in">print</span>(lst)  <span class="comment"># [11,22,33,44]</span></span><br></pre></td></tr></table></figure>


</li>
<li><p>删除</p>
<p>删除数据(不常用, 好不容易爬到的数据. 为什么要删)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lst.remove(<span class="string">&quot;周润发&quot;</span>)  <span class="comment">#  把周润发删掉</span></span><br></pre></td></tr></table></figure>


</li>
<li><p>修改</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">lst = [<span class="string">&quot;赵本山&quot;</span>, <span class="string">&quot;王大陆&quot;</span>, <span class="string">&quot;大嘴猴&quot;</span>, <span class="string">&quot;马后炮&quot;</span>]</span><br><span class="line">lst[<span class="number">1</span>] = <span class="string">&quot;周杰伦&quot;</span></span><br><span class="line"><span class="built_in">print</span>(lst)  <span class="comment"># [&quot;赵本山&quot;, &quot;周杰伦&quot;, &quot;大嘴猴&quot;, &quot;马后炮&quot;]</span></span><br></pre></td></tr></table></figure>


</li>
<li><p>range</p>
<p>用for循环数数的一个东西</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">    <span class="built_in">print</span>(i)   <span class="comment"># 从0数到9</span></span><br><span class="line">   </span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>, <span class="number">10</span>):</span><br><span class="line">    <span class="built_in">print</span>(i)  <span class="comment"># 从5 数到 9</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>查询(必会!!!!)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">lst = [<span class="string">&quot;赵本山&quot;</span>, <span class="string">&quot;周杰伦&quot;</span>, <span class="string">&quot;大嘴猴&quot;</span>, <span class="string">&quot;马后炮&quot;</span>]</span><br><span class="line"><span class="built_in">print</span>(lst[<span class="number">0</span>])</span><br><span class="line"><span class="built_in">print</span>(lst[<span class="number">1</span>])</span><br><span class="line"><span class="built_in">print</span>(lst[<span class="number">2</span>])</span><br><span class="line"><span class="built_in">print</span>(lst[<span class="number">3</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 循环列表的索引</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(lst)):</span><br><span class="line">    <span class="built_in">print</span>(lst[i])</span><br><span class="line"><span class="comment"># 循环列表的内容</span></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> lst:</span><br><span class="line">    <span class="built_in">print</span>(item)</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="3-4-字典"><a href="#3-4-字典" class="headerlink" title="3.4  字典"></a>3.4  字典</h3><p>字典可以成对儿的保存数据. </p>
<ol>
<li><p>增加</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">dic = &#123;&#125;</span><br><span class="line">dic[<span class="string">&#x27;name&#x27;</span>] = <span class="string">&#x27;樵夫&#x27;</span></span><br><span class="line">dic[<span class="string">&#x27;age&#x27;</span>] = <span class="number">18</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(dic)  <span class="comment"># &#123;&quot;name&quot;: &quot;樵夫&quot;, &quot;age&quot;: 18&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>


</li>
<li><p>修改</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dic = &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;樵夫&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">18</span>&#125;</span><br><span class="line">dic[<span class="string">&#x27;age&#x27;</span>] = <span class="number">19</span></span><br><span class="line"><span class="built_in">print</span>(dic)  <span class="comment"># &#123;&quot;name&quot;: &quot;樵夫&quot;, &quot;age&quot;: 19&#125;</span></span><br></pre></td></tr></table></figure>


</li>
<li><p>删除(不常用)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dic = &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;樵夫&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">18</span>&#125;</span><br><span class="line">dic.pop(<span class="string">&quot;age&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(dic)  <span class="comment"># &#123;&#x27;name&#x27;: &#x27;樵夫&#x27;&#125;</span></span><br></pre></td></tr></table></figure>


</li>
<li><p>查询(重点)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">dic = &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;樵夫&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">18</span>&#125;</span><br><span class="line"></span><br><span class="line">a = dic[<span class="string">&#x27;name&#x27;</span>]  <span class="comment"># 查询&#x27;name&#x27;的值</span></span><br><span class="line"><span class="built_in">print</span>(a)  <span class="comment"># 樵夫</span></span><br><span class="line"></span><br><span class="line">b = dic[<span class="string">&#x27;age&#x27;</span>]  <span class="comment"># 拿到dic中age对应的值</span></span><br><span class="line"><span class="built_in">print</span>(b)  <span class="comment"># 18</span></span><br><span class="line"></span><br><span class="line">c = dic[<span class="string">&#x27;哈拉少&#x27;</span>]   <span class="comment"># 没有哈拉少. 报错</span></span><br><span class="line">d = dic.get(<span class="string">&quot;哈拉少&quot;</span>)  <span class="comment"># 没有哈拉少, 不报错. 返回None. 它好. 它不报错</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>循环</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">dic = &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;樵夫&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">18</span>&#125;</span><br><span class="line"><span class="keyword">for</span> k <span class="keyword">in</span> dic:  <span class="comment"># 循环出所有的key</span></span><br><span class="line">    <span class="built_in">print</span>(k)  </span><br><span class="line">    <span class="built_in">print</span>(dic[k])  <span class="comment"># 获取到所有的value并打印</span></span><br><span class="line">    </span><br></pre></td></tr></table></figure>

<p>嵌套</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">dic = &#123;</span><br><span class="line">    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;王峰&quot;</span>,</span><br><span class="line">    <span class="string">&quot;age&quot;</span>: <span class="number">18</span>,</span><br><span class="line">    <span class="string">&quot;wife&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;name&quot;</span>: <span class="string">&quot;章子怡&quot;</span>,</span><br><span class="line">        <span class="string">&quot;age&quot;</span>: <span class="number">19</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;children&quot;</span>: [</span><br><span class="line">        &#123;<span class="string">&#x27;name&#x27;</span>:<span class="string">&quot;胡一菲&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">19</span>&#125;,</span><br><span class="line">        &#123;<span class="string">&#x27;name&#x27;</span>:<span class="string">&quot;胡二菲&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">18</span>&#125;,</span><br><span class="line">        &#123;<span class="string">&#x27;name&#x27;</span>:<span class="string">&quot;胡三菲&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">17</span>&#125;,</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 王峰的第二个孩子的名字</span></span><br><span class="line"><span class="built_in">print</span>(dic[<span class="string">&#x27;children&#x27;</span>][<span class="number">1</span>][<span class="string">&#x27;name&#x27;</span>])</span><br><span class="line"><span class="comment"># 王峰所有孩子的名称和年龄</span></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> dic[<span class="string">&#x27;children&#x27;</span>]:</span><br><span class="line">    <span class="built_in">print</span>(item[<span class="string">&#x27;name&#x27;</span>])</span><br><span class="line">    <span class="built_in">print</span>(item[<span class="string">&#x27;age&#x27;</span>])</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="3-5-字符集和bytes"><a href="#3-5-字符集和bytes" class="headerlink" title="3.5  字符集和bytes"></a>3.5  字符集和bytes</h3><p>字符集, 记住两个字符集就够了. 一个是utf-8, 一个是gbk. 都是支持中文的. 但是utf-8的编码数量远大于gbk. 我们平时使用的最多的是utf-8</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 把字符串转化成字节</span></span><br><span class="line">bs = <span class="string">&quot;我的天哪abcdef&quot;</span>.encode(<span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(bs)  <span class="comment">#  b&#x27;\xe6\x88\x91\xe7\x9a\x84\xe5\xa4\xa9\xe5\x93\xaaabcdef&#x27;</span></span><br><span class="line"><span class="comment"># 一个中文在utf-8里是3个字节. 一个英文是一个字节. 所以英文字母是正常显示的</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 把字节还原回字符串</span></span><br><span class="line">bs = <span class="string">b&#x27;\xe6\x88\x91\xe7\x9a\x84\xe5\xa4\xa9\xe5\x93\xaaabcdef&#x27;</span></span><br><span class="line">s = bs.decode(<span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(s)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>记住, bytes不是给人看的. 是给机器看的. 我们遇到的所有文字, 图片, 音频, 视频. 所有所有的东西到了计算机里都是字节. </p>
<h3 id="3-6-文件操作"><a href="#3-6-文件操作" class="headerlink" title="3.6 文件操作"></a>3.6 文件操作</h3><p>python中. 想要处理一个文件. 必须用open()先打开一个文件</p>
<p>语法规则</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">f = <span class="built_in">open</span>(文件名, mode=<span class="string">&quot;模式&quot;</span>, encoding=<span class="string">&#x27;文件编码&#x27;</span>)</span><br><span class="line">f.read()|f.write()</span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>

<p>文件名就不解释了. </p>
<p>模式:<br>    我们需要知道的主要有4个. 分别是: r, w, a, b</p>
<ol>
<li>r  只读模式. 含义是, 当前这一次open的目的是读取数据. 所以, 只能读. 不能写</li>
<li>w 只写模式. 含义是, 当前这一次open的目的是写入数据. 所以, 只能写, 不能读</li>
<li>a 追加模式. 含义是, 当前这一次open的目的是向后追加. 所以, 只能写, 不能读</li>
<li>b 字节模式. 可以和上面三种模式进行混合搭配. 目的是. 写入的内容或读取的内容是字节.</li>
</ol>
<p>问: </p>
<ol>
<li>如果我想保存一张图片. 应该用哪种模式?</li>
<li>我想读取txt文件, 用哪种模式?</li>
<li>我想复制一个文件. 应该用哪种模式?</li>
</ol>
<p>encoding: 文件编码. 只有处理的文件是文本的时候才能使用. 并且mode不可以是<code>b</code>.   99%的时候我们用的是<code>utf-8</code></p>
<p>另一种写法:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(文件名, mode=模式, encoding=编码) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>

<p>这种写法的好处是, 不需要我们手动去关闭<code>f</code></p>
<p>读取一个文本文件:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;躺尸一摆手.txt&quot;</span>, mode=<span class="string">&quot;r&quot;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> f:  <span class="comment"># for循环可以逐行的进行循环文件中的内容</span></span><br><span class="line">        <span class="built_in">print</span>(line)</span><br></pre></td></tr></table></figure>



<h3 id="3-7-关于函数"><a href="#3-7-关于函数" class="headerlink" title="3.7  关于函数"></a>3.7  关于函数</h3><p>在代码量很少的时候, 我们并不需要函数. 但是一旦代码量大了. 一次写个几百行代码. 调试起来就很困难. 此时, 建议把程序改写成一个一个具有特定功能的函数. 方便调试. 也方便代码的重用</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">函数名</span>(<span class="params">形式参数</span>):</span><br><span class="line">    <span class="comment"># 函数体</span></span><br><span class="line">    <span class="keyword">return</span> 返回值</span><br></pre></td></tr></table></figure>

<p>上面是编写一个函数的固定逻辑. 但是, 编写好的函数是不会自己运行的. 必须有人调用才可以</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">函数名(实际参数)</span><br></pre></td></tr></table></figure>

<p>写一个试试:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">get_page_source</span>(<span class="params">url</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;我要发送请求了. 我要获取到页面源代码啊&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;页面源代码&quot;</span></span><br><span class="line"></span><br><span class="line">pg_one = get_page_source(<span class="string">&quot;baidu.com&quot;</span>)</span><br><span class="line">pg_two = get_page_source(<span class="string">&quot;koukou.com&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>再来一个</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">download_image</span>(<span class="params">url, save_path</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;我要下载图片<span class="subst">&#123;url&#125;</span>了&quot;</span>, <span class="string">f&quot;保存在<span class="subst">&#123;save_path&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">donwload_image(<span class="string">&quot;http://www.baidu.com/abc/huyifei.jpg&quot;</span>, <span class="string">&quot;胡二飞.jpg&quot;</span>)</span><br><span class="line">donwload_image(<span class="string">&quot;http://www.baidu.com/aaa/dagedagefeifeifei.jpg&quot;</span>, <span class="string">&quot;大哥大哥飞飞飞.jpg&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>总结, 函数的好处就是, 以后需要该功能. 不用再写重复代码了. </p>
<h3 id="3-8-关于模块"><a href="#3-8-关于模块" class="headerlink" title="3.8 关于模块"></a>3.8 关于模块</h3><p>模块是啥? 模块就是已经有人帮我们写好了的一些代码, 这些代码被保存在一个py文件或者一个文件夹里. 我们可以拿来直接用</p>
<p>在python中有三种模块.</p>
<p>第一种, python内置模块</p>
<p>​	不用安装. 直接导入就能用</p>
<p>第二种, 第三方模块</p>
<p>​	需要安装. 安装后. 导入就可以用了</p>
<p>第三种, 自定义模块(新手先别自己定义模块)</p>
<p>​	直接导入就能用</p>
<p>导入模块的语法</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> 模块</span><br><span class="line"><span class="keyword">from</span> 模块 <span class="keyword">import</span> 功能</span><br><span class="line"><span class="keyword">from</span> 模块.子模块 <span class="keyword">import</span> 功能</span><br><span class="line"></span><br><span class="line">举例子, </span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">from</span> urllib.parse <span class="keyword">import</span> urljoin</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br></pre></td></tr></table></figure>

<p>搞爬虫.必须要了解的一些python内置模块</p>
<ol>
<li><p>time模块</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line">time.time()  <span class="comment"># 这个是获取到时间戳</span></span><br><span class="line">time.sleep(<span class="number">999</span>)  <span class="comment"># 让程序暂停999秒</span></span><br></pre></td></tr></table></figure>


</li>
<li><p>os模块</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="comment"># 判断文件是否存在</span></span><br><span class="line">os.path.exists()  <span class="comment">#  判断文件或者文件夹是否存在</span></span><br><span class="line">os.path.join()    <span class="comment"># 路径拼接</span></span><br><span class="line">os.makedirs()     <span class="comment"># 创建文件夹</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>


</li>
<li><p>json模块(重中之重)</p>
<p>现在的网站不同于从前了. 习惯性用json来传递数据. 所以, 我们必须要知道json是啥, 以及python如何处理json. </p>
<p>json是一种类似字典一样的东西.  对于python而言, json是字符串.  </p>
<p>例如, </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="string">&#x27;&#123;&quot;name&quot;: &quot;jay&quot;, &quot;age&quot;: 18&#125;&#x27;</span></span><br></pre></td></tr></table></figure>

<p>你看. 这破玩意就是<code>json</code></p>
<p>如何来转化它. </p>
<p><strong><span style="background-color:yellow;color:red;">json字符串 &#x3D;&gt; python字典</span></strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line">s = <span class="string">&#x27;&#123;&quot;name&quot;: &quot;jay&quot;, &quot;age&quot;: 18&#125;&#x27;</span></span><br><span class="line">dic = json.loads(s)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(dic))</span><br></pre></td></tr></table></figure>

<p><strong><span style="background-color:yellow;color:red;">python字典 &#x3D;&gt; json字符串</span></strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line">dic = &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;jay&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">18</span>&#125;</span><br><span class="line">s = json.dumps(dic)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(s))</span><br></pre></td></tr></table></figure>


</li>
<li><p>random模块</p>
<p>随机. 没别的用处.生成随机数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line">i = random.randint(<span class="number">1</span>, <span class="number">10</span>)  <span class="comment"># 1~10的随机数</span></span><br><span class="line"><span class="built_in">print</span>(i)   <span class="comment"># 多跑两次.效果更加</span></span><br></pre></td></tr></table></figure>


</li>
<li><p>异常处理</p>
<p>这个是重点. 我们在写爬虫的时候. 非常容易遇到问题. 但这些问题本身并不是我们程序的问题. </p>
<p>比如, 你在抓取某网站的时候. 由于网络波动或者他服务器本身压力太大. 导致本次请求失败. 这种现象太常见了. 此时, 我们程序这边就会崩溃. 打印一堆红色的文字. 让你难受的一P.  怎么办?</p>
<p>我们要清楚一个事情. 我们平时在打开一个网址的时候. 如果长时间没有反应, 或者加载很慢的时候. 我们习惯性的会刷新网页. 对吧. 这个逻辑就像: <code>程序如果本次请求失败了. 能不能重新来一次</code>. OK, 我们接下来聊的这个异常处理. 就是干这个事儿的. </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>: <span class="comment"># 尝试...</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;假如, 我是一段爬虫代码, 请求到对方服务器&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;我得出事儿啊&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">1</span>/<span class="number">0</span>)  <span class="comment"># 出事儿了</span></span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:  <span class="comment"># 出错了. 我给你兜着</span></span><br><span class="line">    <span class="built_in">print</span>(e)  <span class="comment"># 怎么兜?  打印一下. 就过去了</span></span><br><span class="line">    </span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;不论上面是否出错. 我这里, 依然可以执行&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>看懂了么? 程序执行的时候. 如果<code>try</code>中的代码出现错误. 则自动跳到<code>except</code>中. 并执行<code>except</code>中的代码. 然后程序正常的, 继续执行</p>
<p>有了这玩意. 我们就可以写出一段很漂亮的代码逻辑:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> <span class="number">1</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        我要发送请求了. 我要干美国CIA的总部. 我要上天</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;我成功了!!&quot;</span>)</span><br><span class="line">        <span class="keyword">break</span>  <span class="comment"># 成功了.就跳出循环</span></span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;失败了&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;我不怕失败&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;再来&quot;</span>)</span><br><span class="line">       </span><br></pre></td></tr></table></figure>

<p>改良版:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        我要发送请求了. 我要干美国CIA的总部. 我要上天</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;我成功了!!&quot;</span>)</span><br><span class="line">        <span class="keyword">break</span>  <span class="comment"># 成功了.就跳出循环</span></span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;失败了&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;我不怕失败&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;再来&quot;</span>)</span><br><span class="line">        time.sleep(i * <span class="number">10</span>)</span><br><span class="line">       </span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="第二节-正则"><a href="#第二节-正则" class="headerlink" title="第二节 正则"></a>第二节 正则</h1><h2 id="一、正则基础"><a href="#一、正则基础" class="headerlink" title="一、正则基础"></a>一、正则基础</h2><h3 id="1、为什么使用正则"><a href="#1、为什么使用正则" class="headerlink" title="1、为什么使用正则"></a>1、为什么使用正则</h3><ul>
<li><p>需求</p>
<p>判断一个字符串是否是手机号</p>
</li>
<li><p>解决</p>
<p>编写一个函数，给函数一个字符串，如果是手机号则返回True，否则返回False</p>
</li>
<li><p>代码</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">isPhone</span>(<span class="params">phone</span>):</span><br><span class="line">    <span class="comment"># 长度为11</span></span><br><span class="line">    <span class="comment"># 全部都是数字字符</span></span><br><span class="line">    <span class="comment"># 以1开头</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> isPhone(<span class="string">&quot;13812345678&quot;</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;是手机号&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;不是手机号&quot;</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>注意</p>
<p>如果使用正则会让这个问题变得简单</p>
</li>
</ul>
<h3 id="2、正则与re模块简介"><a href="#2、正则与re模块简介" class="headerlink" title="2、正则与re模块简介"></a>2、正则与re模块简介</h3><p><strong>概述：</strong> <strong>正则表达式</strong>，又称规则表达式</p>
<p>正则表达式(regular expression)描述了一种字符串匹配的模式（pattern）</p>
<p>正则匹配是一个 模糊的匹配(不是精确匹配)</p>
<p><strong>re：</strong>python自1.5版本开始增加了re模块，该模块提供了perl风格的正则表达式模式，re模块是python语言拥有了所有正则表达式的功能</p>
<ul>
<li>如下四个方法经常使用<ul>
<li>match()</li>
<li>search()</li>
<li>findall()</li>
<li>finditer()</li>
</ul>
</li>
</ul>
<h2 id="二、正则表达式"><a href="#二、正则表达式" class="headerlink" title="二、正则表达式"></a>二、正则表达式</h2><h3 id="1、匹配单个字符与数字"><a href="#1、匹配单个字符与数字" class="headerlink" title="1、匹配单个字符与数字"></a>1、匹配单个字符与数字</h3><table>
<thead>
<tr>
<th>匹配</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>.</td>
<td>匹配除换行符以外的任意字符，当flags被设置为re.S时，可以匹配包含换行符以内的所有字符</td>
</tr>
<tr>
<td>[]</td>
<td>里面是字符集合，匹配[]里任意一个字符</td>
</tr>
<tr>
<td>[0123456789]</td>
<td>匹配任意一个数字字符</td>
</tr>
<tr>
<td>[0-9]</td>
<td>匹配任意一个数字字符</td>
</tr>
<tr>
<td>[a-z]</td>
<td>匹配任意一个小写英文字母字符</td>
</tr>
<tr>
<td>[A-Z]</td>
<td>匹配任意一个大写英文字母字符</td>
</tr>
<tr>
<td>[A-Za-z]</td>
<td>匹配任意一个英文字母字符</td>
</tr>
<tr>
<td>[A-Za-z0-9]</td>
<td>匹配任意一个数字或英文字母字符</td>
</tr>
<tr>
<td>[^lucky]</td>
<td>[]里的^称为脱字符，表示非，匹配不在[]内的任意一个字符</td>
</tr>
<tr>
<td>^[lucky]</td>
<td>以[]中内的某一个字符作为开头</td>
</tr>
<tr>
<td>\d</td>
<td>匹配任意一个数字字符，相当于[0-9]</td>
</tr>
<tr>
<td>\D</td>
<td>匹配任意一个非数字字符，相当于<code>[^0-9]</code></td>
</tr>
<tr>
<td>\w</td>
<td>匹配字母、下划线、数字中的任意一个字符，相当于[0-9A-Za-z_]</td>
</tr>
<tr>
<td>\W</td>
<td>匹配非字母、下划线、数字中的任意一个字符，相当于<code>[^0-9A-Za-z_]</code></td>
</tr>
<tr>
<td>\s</td>
<td>匹配空白符(空格、换页、换行、回车、制表)，相当于[ \f\n\r\t]</td>
</tr>
<tr>
<td>\S</td>
<td>匹配非空白符(空格、换页、换行、回车、制表)，相当于<code>[^ \f\n\r\t]</code></td>
</tr>
</tbody></table>
<h3 id="2、匹配锚字符"><a href="#2、匹配锚字符" class="headerlink" title="2、匹配锚字符"></a>2、匹配锚字符</h3><p>锚字符:用来判定是否按照规定开始或者结尾</p>
<table>
<thead>
<tr>
<th>匹配</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>^</td>
<td>行首匹配，和[]里的^不是一个意思</td>
</tr>
<tr>
<td>$</td>
<td>行尾匹配</td>
</tr>
</tbody></table>
<h3 id="3、限定符"><a href="#3、限定符" class="headerlink" title="3、限定符"></a>3、限定符</h3><p>限定符用来指定正则表达式的一个给定组件必须要出现多少次才能满足匹配。有 * 或 + 或 ? 或 大括号n大括号 或 {n,} 或 {n,m} 共6种。</p>
<table>
<thead>
<tr>
<th>匹配</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>(xyz)</td>
<td>匹配括号内的xyz，作为一个整体去匹配  一个单元 子存储</td>
</tr>
<tr>
<td>x?</td>
<td>匹配0个或者1个x，非贪婪匹配</td>
</tr>
<tr>
<td>x*</td>
<td>匹配0个或任意多个x</td>
</tr>
<tr>
<td>x+</td>
<td>匹配至少一个x</td>
</tr>
<tr>
<td>x n}</td>
<td>确定匹配n个x，n是非负数</td>
</tr>
<tr>
<td>x n,}</td>
<td>至少匹配n个x</td>
</tr>
<tr>
<td>x n,m}</td>
<td>匹配至少n个最多m个x</td>
</tr>
<tr>
<td>x\</td>
<td>y</td>
</tr>
</tbody></table>
<h2 id="三、re模块中常用函数"><a href="#三、re模块中常用函数" class="headerlink" title="三、re模块中常用函数"></a>三、re模块中常用函数</h2><p><strong>通用flags（修正符）</strong></p>
<table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>re.I</td>
<td>是匹配对大小写不敏感</td>
</tr>
<tr>
<td>re.S</td>
<td>使.匹配包括换行符在内的所有字符</td>
</tr>
</tbody></table>
<p><strong>通用函数</strong></p>
<ul>
<li><p>获取匹配结果</p>
<ul>
<li><p>使用group()方法 获取到匹配的值</p>
</li>
<li><p>groups()    返回一个包含所有小组字符串的元组(也就是自存储的值)，从 1 到 所含的小组号。</p>
</li>
</ul>
</li>
</ul>
<h3 id="1、match-函数"><a href="#1、match-函数" class="headerlink" title="1、match()函数"></a>1、match()函数</h3><ul>
<li><p>原型</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">def match(pattern, string, flags=0)</span><br></pre></td></tr></table></figure>
</li>
<li><p>功能</p>
<p>匹配成功返回 匹配的对象  </p>
<p>匹配失败 返回 None</p>
</li>
</ul>
<ul>
<li><p>获取匹配结果</p>
<ul>
<li><p>使用group()方法 获取到匹配的值</p>
</li>
<li><p>groups()    返回一个包含所有小组字符串的元组，从 1 到 所含的小组号。</p>
</li>
</ul>
</li>
<li><p>注意：从第一位开始匹配  只匹配一次</p>
</li>
</ul>
<ul>
<li><p>参数</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>pattern</td>
<td>匹配的正则表达式(一种字符串的模式)</td>
</tr>
<tr>
<td>string</td>
<td>要匹配的字符串</td>
</tr>
<tr>
<td>flags</td>
<td>标识位，用于控制正则表达式的匹配方式</td>
</tr>
</tbody></table>
</li>
<li><p>代码</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">res = re.<span class="keyword">match</span>(<span class="string">&#x27;\d&#123;2&#125;&#x27;</span>,<span class="string">&#x27;123&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(res.group())</span><br><span class="line"></span><br><span class="line"><span class="comment">#给当前匹配到的结果起别名</span></span><br><span class="line">s = <span class="string">&#x27;3G4HFD567&#x27;</span></span><br><span class="line">re.<span class="keyword">match</span>(<span class="string">&quot;(?P&lt;value&gt;\d+)&quot;</span>,s)</span><br><span class="line"><span class="built_in">print</span>(x.group(<span class="number">0</span>))</span><br><span class="line"><span class="built_in">print</span>(x.group(<span class="string">&#x27;value&#x27;</span>))</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="2、searce-函数"><a href="#2、searce-函数" class="headerlink" title="2、searce()函数"></a>2、searce()函数</h3><ul>
<li><p>原型</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">def search(pattern, string, flags=0)</span><br></pre></td></tr></table></figure>
</li>
<li><p>功能</p>
<p>扫描整个字符串string，并返回第一个pattern模式成功的匹配</p>
<p>匹配失败 返回 None</p>
</li>
<li><p>参数</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>pattern</td>
<td>匹配的正则表达式(一种字符串的模式)</td>
</tr>
<tr>
<td>string</td>
<td>要匹配的字符串</td>
</tr>
<tr>
<td>flags</td>
<td>标识位，用于控制正则表达式的匹配方式</td>
</tr>
</tbody></table>
</li>
<li><p>注意：</p>
<p>只要字符串包含就可以</p>
<p>只匹配一次</p>
</li>
<li><p>示例</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">res = re.search(<span class="string">&#x27;[a-z]&#x27;</span>, <span class="string">&#x27;131A3ab889s&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(res)</span><br><span class="line"><span class="built_in">print</span>(res.group()</span><br></pre></td></tr></table></figure></li>
</ul>
<ul>
<li><p>注意</p>
<p>与search的区别</p>
<p>相同点：</p>
<p>都只匹配一次</p>
<p>不同点：</p>
<ul>
<li>search是在要匹配的字符串中  包含正则表达式的内容就可以</li>
<li>match 必须第一位就开始匹配  否则匹配失败</li>
</ul>
</li>
</ul>
<h3 id="3、findall-函数（返回列表）"><a href="#3、findall-函数（返回列表）" class="headerlink" title="3、findall()函数（返回列表）"></a>3、findall()函数（返回列表）</h3><ul>
<li><p>原型</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">def findall(pattern, string, flags=0)</span><br></pre></td></tr></table></figure>
</li>
<li><p>功能</p>
<p>扫描整个字符串string，并返回所有匹配的pattern模式结果的字符串列表</p>
</li>
<li><p>参数</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>pattern</td>
<td>匹配的正则表达式(一种字符串的模式)</td>
</tr>
<tr>
<td>string</td>
<td>要匹配的字符串</td>
</tr>
<tr>
<td>flags</td>
<td>标识位，用于控制正则表达式的匹配方式</td>
</tr>
</tbody></table>
</li>
<li><p>示例</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">myStr = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">&lt;a href=&quot;http://www.baidu.com&quot;&gt;百度&lt;/a&gt;</span></span><br><span class="line"><span class="string">&lt;A href=&quot;http://www.taobao.com&quot;&gt;淘宝&lt;/A&gt;</span></span><br><span class="line"><span class="string">&lt;a href=&quot;http://www.id97.com&quot;&gt;电</span></span><br><span class="line"><span class="string">影网站&lt;/a&gt;</span></span><br><span class="line"><span class="string">&lt;i&gt;我是倾斜1&lt;/i&gt;</span></span><br><span class="line"><span class="string">&lt;i&gt;我是倾斜2&lt;/i&gt;</span></span><br><span class="line"><span class="string">&lt;em&gt;我是倾斜2&lt;/em&gt;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="comment"># html里是不区分大小写</span></span><br><span class="line"><span class="comment"># （1）给正则里面匹配的 加上圆括号 会将括号里面的内容进行 单独的返回</span></span><br><span class="line">res = re.findall(<span class="string">&quot;(&lt;a href=\&quot;http://www\.(.*?)\.com\&quot;&gt;(.*?)&lt;/a&gt;)&quot;</span>,myStr) <span class="comment">#[(&#x27;&lt;a href=&quot;http://www.baidu.com&quot;&gt;百度&lt;/a&gt;&#x27;, &#x27;baidu&#x27;, &#x27;百度&#x27;)]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 括号的区别</span></span><br><span class="line">res = re.findall(<span class="string">&quot;&lt;a href=\&quot;http://www\..*?\.com\&quot;&gt;.*?&lt;/a&gt;&quot;</span>,myStr) <span class="comment">#[&#x27;&lt;a href=&quot;http://www.baidu.com&quot;&gt;百度&lt;/a&gt;&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#(2) 不区分大小写的匹配</span></span><br><span class="line">res = re.findall(<span class="string">&quot;&lt;a href=\&quot;http://www\..*?\.com\&quot;&gt;.*?&lt;/a&gt;&quot;</span>,myStr,re.I) <span class="comment">#[&#x27;&lt;a href=&quot;http://www.baidu.com&quot;&gt;百度&lt;/a&gt;&#x27;, &#x27;&lt;A href=&quot;http://www.taobao.com&quot;&gt;淘宝&lt;/A&gt;&#x27;]</span></span><br><span class="line">res = re.findall(<span class="string">&quot;&lt;[aA] href=\&quot;http://www\..*?\.com\&quot;&gt;.*?&lt;/[aA]&gt;&quot;</span>,myStr) <span class="comment">#[&#x27;&lt;a href=&quot;http://www.baidu.com&quot;&gt;百度&lt;/a&gt;&#x27;]</span></span><br><span class="line"><span class="comment"># (3) 使.支持换行匹配</span></span><br><span class="line">res = re.findall(<span class="string">&quot;&lt;a href=&quot;</span>http://www..?.com<span class="string">&quot;&gt;.?&lt;/a&gt;&quot;</span>,myStr,re.S) <span class="comment">#</span></span><br><span class="line"><span class="comment"># (4) 支持换行 支持不区分大小写匹配</span></span><br><span class="line">res = re.findall(<span class="string">&quot;&lt;a href=&quot;</span>http://www..?.com<span class="string">&quot;&gt;.?&lt;/a&gt;&quot;</span>,myStr,re.S|re.I) <span class="comment">#</span></span><br><span class="line"><span class="built_in">print</span>(res)</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="4、finditer-函数"><a href="#4、finditer-函数" class="headerlink" title="4、finditer()函数"></a>4、finditer()函数</h3><ul>
<li><p>原型</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">def finditer(pattern, string, flags=0)</span><br></pre></td></tr></table></figure>
</li>
<li><p>功能</p>
<p>与findall()类似，返回一个迭代器</p>
</li>
<li><p>参数</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>pattern</td>
<td>匹配的正则表达式(一种字符串的模式)</td>
</tr>
<tr>
<td>string</td>
<td>要匹配的字符串</td>
</tr>
<tr>
<td>flags</td>
<td>标识位，用于控制正则表达式的匹配方式</td>
</tr>
</tbody></table>
</li>
<li><p>代码</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">res = re.finditer(<span class="string">&#x27;\w&#x27;</span>, <span class="string">&#x27;12hsakda1&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(res)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">next</span>(res))</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> res:</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="5、split-函数"><a href="#5、split-函数" class="headerlink" title="5、split()函数"></a>5、split()函数</h3><ul>
<li><p>作用：切割字符串</p>
</li>
<li><p>原型：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">def split(patter, string, maxsplit=0, flags=0)</span><br></pre></td></tr></table></figure>
</li>
<li><p>参数</p>
<p>pattern   正则表达式</p>
<p>string      要拆分的字符串</p>
<p>maxsplit   最大拆分次数  默认拆分全部</p>
<p>flags          修正符</p>
</li>
<li><p>示例</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">myStr = <span class="string">&quot;asdas\rd&amp;a\ts12d\n*a3sd@a_1sd&quot;</span></span><br><span class="line"><span class="comment">#通过特殊字符 对其进行拆分 成列表</span></span><br><span class="line">res = re.split(<span class="string">&quot;[^a-z]&quot;</span>,myStr)</span><br><span class="line">res = re.split(<span class="string">&quot;\W&quot;</span>,myStr)</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="6、修正符"><a href="#6、修正符" class="headerlink" title="6、修正符"></a>6、修正符</h3><ul>
<li><p>作用</p>
<p>对正则进行修正</p>
</li>
<li><p>使用</p>
<p>search&#x2F;match&#x2F;findall&#x2F;finditer 等函数 flags参数的使用</p>
</li>
<li><p>修正符</p>
<p>re.I   不区分大小写匹配</p>
<p>re.S    使.可以匹配换行符   匹配任意字符</p>
</li>
<li><p>使用</p>
<p>re.I</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;[a-z]&#x27;</span>,<span class="string">&#x27;AaBb&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;[a-z]&#x27;</span>,<span class="string">&#x27;AaBb&#x27;</span>, flags=re.I))</span><br></pre></td></tr></table></figure>

<p>re.S</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;&lt;b&gt;.*?&lt;/b&gt;&#x27;</span>,<span class="string">&#x27;&lt;b&gt;b标签&lt;/b&gt;&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">&#x27;&lt;b&gt;.*?&lt;/b&gt;&#x27;</span>,<span class="string">&#x27;&lt;b&gt;b标\n签&lt;/b&gt;&#x27;</span>, flags=re.S))</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="四、正则高级"><a href="#四、正则高级" class="headerlink" title="四、正则高级"></a>四、正则高级</h2><h3 id="1、分组-起名称"><a href="#1、分组-起名称" class="headerlink" title="1、分组&amp;起名称"></a>1、分组&amp;起名称</h3><ul>
<li><p>概念</p>
<p>处理简单的判断是否匹配之外，正则表达式还有提取子串的功能，用()表示的就是要提取的分组</p>
</li>
<li><p>代码</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#给当前匹配到的结果起别名</span></span><br><span class="line">s = <span class="string">&#x27;3G4HFD567&#x27;</span></span><br><span class="line">re.<span class="keyword">match</span>(<span class="string">&quot;(?P&lt;value&gt;\d+)&quot;</span>,s)</span><br><span class="line"><span class="built_in">print</span>(x.group(<span class="number">0</span>))</span><br><span class="line"><span class="built_in">print</span>(x.group(<span class="string">&#x27;value&#x27;</span>))</span><br></pre></td></tr></table></figure>
</li>
<li><p>说明</p>
<ul>
<li>正则表达式中定义了组，就可以在Match对象上用group()方法提取出子串来</li>
<li>group(0)永远是原始字符串，group(1)、group(2)……表示第1、2、……个子串</li>
</ul>
</li>
</ul>
<h3 id="2、编译"><a href="#2、编译" class="headerlink" title="2、编译"></a>2、编译</h3><ul>
<li><p>概念</p>
<p>当在python中使用正则表达式时，re模块会做两件事，一件是编译正则表达式，如果表达式的字符串本身不合法，会报错。另一件是用编译好的正则表达式提取匹配字符串</p>
</li>
<li><p>编译优点</p>
<p>如果一个正则表达式要使用几千遍，每一次都会编译，出于效率的考虑进行正则表达式的编译，就不需要每次都编译了，节省了编译的时间，从而提升效率</p>
</li>
<li><p>compile()函数</p>
<ul>
<li><p>原型</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">def compile(pattern, flags=0)</span><br></pre></td></tr></table></figure>
</li>
<li><p>作用</p>
<p>将pattern模式编译成正则对象</p>
</li>
<li><p>参数</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>pattern</td>
<td>匹配的正则表达式(一种字符串的模式)</td>
</tr>
<tr>
<td>flags</td>
<td>标识位，用于控制正则表达式的匹配方式</td>
</tr>
</tbody></table>
</li>
<li><p>flags</p>
<table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>re.I</td>
<td>是匹配对大小写不敏感</td>
</tr>
<tr>
<td>re.S</td>
<td>使.匹配包括换行符在内的所有字符</td>
</tr>
</tbody></table>
</li>
<li><p>返回值</p>
<p>编译好的正则对象</p>
</li>
<li><p>示例</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">re_phone = re.<span class="built_in">compile</span>(<span class="string">r&quot;(0\d&#123;2,3&#125;-\d&#123;7,8&#125;)&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(re_phone, <span class="built_in">type</span>(re_phone))</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>编译后其他方法的使用</p>
<p>原型</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">def match(self, string, pos=0, endpos=-1)</span><br><span class="line">def search(self, string, pos=0, endpos=-1)</span><br><span class="line">def findall(self, string, pos=0, endpos=-1)</span><br><span class="line">def finditer(self, string, pos=0, endpos=-1)</span><br></pre></td></tr></table></figure>

<p>参数</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>string</td>
<td>待匹配的字符串</td>
</tr>
<tr>
<td>pos</td>
<td>从string字符串pos下标开始</td>
</tr>
<tr>
<td>endpos</td>
<td>结束下标</td>
</tr>
</tbody></table>
<p>示例</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">s1 = <span class="string">&quot;lucky&#x27;s phone is 010-88888888&quot;</span></span><br><span class="line">s2 = <span class="string">&quot;kaige&#x27;s phone is 010-99999999&quot;</span></span><br><span class="line">ret1 = re_phone.search(s1)</span><br><span class="line"><span class="built_in">print</span>(ret1, ret1.group(<span class="number">1</span>))</span><br><span class="line">ret2 = re_phone.search(s2)</span><br><span class="line"><span class="built_in">print</span>(ret2, ret2.group(<span class="number">1</span>))</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="3、贪婪与非贪婪"><a href="#3、贪婪与非贪婪" class="headerlink" title="3、贪婪与非贪婪"></a>3、贪婪与非贪婪</h3><ul>
<li><p>贪婪模式  </p>
<p>贪婪概念：匹配尽可能多的字符</p>
<ul>
<li>.+  匹配换行符以外的字符至少一次</li>
<li>.*  匹配换行符以外的字符任意次</li>
</ul>
<p>实例</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">res = re.search(<span class="string">&#x27;&lt;b&gt;.+&lt;/b&gt;&#x27;</span>, <span class="string">&#x27;&lt;b&gt;&lt;/b&gt;&lt;b&gt;b标签&lt;/b&gt;&#x27;</span>)</span><br><span class="line">res = re.search(<span class="string">&#x27;&lt;b&gt;.*&lt;/b&gt;&#x27;</span>, <span class="string">&#x27;&lt;b&gt;b标签&lt;/b&gt;&lt;b&gt;b标签&lt;/b&gt;&lt;b&gt;b标签&lt;/b&gt;&lt;b&gt;b标签&lt;/b&gt;&#x27;</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>非贪婪模式</p>
<p>非贪婪概念：尽可能少的匹配称为非贪婪匹配，*?、+?即可</p>
</li>
<li><p>.+?  匹配换行符以外的字符至少一次  拒绝贪婪</p>
<ul>
<li>.*?   匹配换行符以外的字符任意次      拒绝贪婪</li>
</ul>
<p>实例</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">res = re.search(<span class="string">&#x27;&lt;b&gt;.+?&lt;/b&gt;&#x27;</span>, <span class="string">&#x27;&lt;b&gt;b标签&lt;/b&gt;&lt;b&gt;b标签&lt;/b&gt;&#x27;</span>)</span><br><span class="line">res = re.search(<span class="string">&#x27;&lt;b&gt;.*?&lt;/b&gt;&#x27;</span>, <span class="string">&#x27;&lt;b&gt;b标签&lt;/b&gt;&lt;b&gt;b标签&lt;/b&gt;&lt;b&gt;b标签&lt;/b&gt;&lt;b&gt;b标签&lt;/b&gt;&#x27;</span>)</span><br></pre></td></tr></table></figure></li>
</ul>
<p>练习：</p>
<ol>
<li><p>中信证券</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># 将产品名称管理人  风险评级 认购金额 起点公示  信息  全部抓到</span><br></pre></td></tr></table></figure>
</li>
<li><p>练习抓取股票  每一行数据</p>
</li>
<li><p>豆瓣</p>
<p>抓取标题和图片img标签</p>
</li>
</ol>
<h1 id="第三节-beautifulsoup"><a href="#第三节-beautifulsoup" class="headerlink" title="第三节 beautifulsoup"></a>第三节 beautifulsoup</h1><h2 id="一、beautifulsoup的简单使用"><a href="#一、beautifulsoup的简单使用" class="headerlink" title="一、beautifulsoup的简单使用"></a>一、beautifulsoup的简单使用</h2><p>简单来说，Beautiful Soup是python的一个库，最主要的功能是从网页抓取数据。官方解释如下：</p>
<p>Beautiful Soup提供一些简单的、python式的函数用来处理导航、搜索、修改分析树等功能。<br>它是一个工具箱，通过解析文档为用户提供需要抓取的数据，因为简单，所以不需要多少代码就可以写出一个完整的应用程序。</p>
<h3 id="1、安装"><a href="#1、安装" class="headerlink" title="1、安装"></a>1、安装</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install beautifulsoup4</span><br></pre></td></tr></table></figure>

<h4 id="1-1解析器"><a href="#1-1解析器" class="headerlink" title="1.1解析器"></a><strong>1.1解析器</strong></h4><p>Beautiful Soup支持Python标准库中的HTML解析器,还支持一些第三方的解析器，如果我们不安装它，则 Python 会使用 Python默认的解析器，lxml 解析器更加强大，速度更快，推荐安装。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install lxml</span><br></pre></td></tr></table></figure>

<h4 id="1-2-解析器对比"><a href="#1-2-解析器对比" class="headerlink" title="1.2 解析器对比"></a>1.2 解析器对比</h4><p><a target="_blank" rel="noopener" href="http://beautifulsoup.readthedocs.io/zh_CN/latest/">官网文档</a></p>
<h3 id="2、快速开始"><a href="#2、快速开始" class="headerlink" title="2、快速开始"></a>2、快速开始</h3><p>下面的一段HTML代码将作为例子被多次用到.这是 <em>爱丽丝梦游仙境的</em> 的一段内容(以后内容中简称为 <em>爱丽丝</em> 的文档):</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">html_doc = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">&lt;html&gt;&lt;head&gt;&lt;title&gt;The Dormouse&#x27;s story&lt;/title&gt;&lt;/head&gt;</span></span><br><span class="line"><span class="string">&lt;body&gt;</span></span><br><span class="line"><span class="string">&lt;p class=&quot;title&quot;&gt;&lt;b&gt;The Dormouse&#x27;s story&lt;/b&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&lt;p class=&quot;story&quot;&gt;Once upon a time there were three little sisters; and their names were</span></span><br><span class="line"><span class="string">&lt;a href=&quot;http://example.com/elsie&quot; class=&quot;sister&quot; id=&quot;link1&quot;&gt;Elsie&lt;/a&gt;,</span></span><br><span class="line"><span class="string">&lt;a href=&quot;http://example.com/lacie&quot; class=&quot;sister&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt; and</span></span><br><span class="line"><span class="string">&lt;a href=&quot;http://example.com/tillie&quot; class=&quot;sister&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;;</span></span><br><span class="line"><span class="string">and they lived at the bottom of a well.&lt;/p&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&lt;p class=&quot;story&quot;&gt;...&lt;/p&gt;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<p>使用BeautifulSoup解析这段代码,能够得到一个 <code>BeautifulSoup</code> 的对象,并能按照标准的缩进格式的结构输出:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line">soup = BeautifulSoup(html_doc, <span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line"><span class="comment"># html进行美化</span></span><br><span class="line"><span class="built_in">print</span>(soup.prettify())</span><br></pre></td></tr></table></figure>

<p>匹配代码</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line"> &lt;head&gt;</span><br><span class="line">  &lt;title&gt;</span><br><span class="line">   The Dormouse<span class="string">&#x27;s story</span></span><br><span class="line"><span class="string">  &lt;/title&gt;</span></span><br><span class="line"><span class="string"> &lt;/head&gt;</span></span><br><span class="line"><span class="string"> &lt;body&gt;</span></span><br><span class="line"><span class="string">  &lt;p class=&quot;title&quot;&gt;</span></span><br><span class="line"><span class="string">   &lt;b&gt;</span></span><br><span class="line"><span class="string">    The Dormouse&#x27;</span>s story</span><br><span class="line">   &lt;/b&gt;</span><br><span class="line">  &lt;/p&gt;</span><br><span class="line">  &lt;p <span class="keyword">class</span>=<span class="string">&quot;story&quot;</span>&gt;</span><br><span class="line">   Once upon a time there were three little sisters; <span class="keyword">and</span> their names were</span><br><span class="line">   &lt;a <span class="keyword">class</span>=<span class="string">&quot;sister&quot;</span> href=<span class="string">&quot;http://example.com/elsie&quot;</span> <span class="built_in">id</span>=<span class="string">&quot;link1&quot;</span>&gt;</span><br><span class="line">    Elsie</span><br><span class="line">   &lt;/a&gt;</span><br><span class="line">   ,</span><br><span class="line">   &lt;a <span class="keyword">class</span>=<span class="string">&quot;sister&quot;</span> href=<span class="string">&quot;http://example.com/lacie&quot;</span> <span class="built_in">id</span>=<span class="string">&quot;link2&quot;</span>&gt;</span><br><span class="line">    Lacie</span><br><span class="line">   &lt;/a&gt;</span><br><span class="line">   <span class="keyword">and</span></span><br><span class="line">   &lt;a <span class="keyword">class</span>=<span class="string">&quot;sister&quot;</span> href=<span class="string">&quot;http://example.com/tillie&quot;</span> <span class="built_in">id</span>=<span class="string">&quot;link3&quot;</span>&gt;</span><br><span class="line">    Tillie</span><br><span class="line">   &lt;/a&gt;</span><br><span class="line">   ;</span><br><span class="line"><span class="keyword">and</span> they lived at the bottom of a well.</span><br><span class="line">  &lt;/p&gt;</span><br><span class="line">  &lt;p <span class="keyword">class</span>=<span class="string">&quot;story&quot;</span>&gt;</span><br><span class="line">   ...</span><br><span class="line">  &lt;/p&gt;</span><br><span class="line"> &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>几个简单的浏览结构化数据的方法:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">soup.title  <span class="comment"># 获取标签title</span></span><br><span class="line"><span class="comment"># &lt;title&gt;The Dormouse&#x27;s story&lt;/title&gt;</span></span><br><span class="line"></span><br><span class="line">soup.title.name   <span class="comment"># 获取标签名称</span></span><br><span class="line"><span class="comment"># &#x27;title&#x27;</span></span><br><span class="line"></span><br><span class="line">soup.title.string   <span class="comment"># 获取标签title内的内容</span></span><br><span class="line"><span class="comment"># &#x27;The Dormouse&#x27;s story&#x27;</span></span><br><span class="line"></span><br><span class="line">soup.title.parent  <span class="comment"># 获取父级标签</span></span><br><span class="line"></span><br><span class="line">soup.title.parent.name  <span class="comment"># 获取父级标签名称</span></span><br><span class="line"><span class="comment"># &#x27;head&#x27;</span></span><br><span class="line"></span><br><span class="line">soup.p</span><br><span class="line"><span class="comment"># &lt;p class=&quot;title&quot;&gt;&lt;b&gt;The Dormouse&#x27;s story&lt;/b&gt;&lt;/p&gt;</span></span><br><span class="line"></span><br><span class="line">soup.p[<span class="string">&#x27;class&#x27;</span>]  <span class="comment"># 获取p的class属性值</span></span><br><span class="line"><span class="comment"># &#x27;title&#x27;</span></span><br><span class="line"></span><br><span class="line">soup.a</span><br><span class="line"><span class="comment"># &lt;a class=&quot;sister&quot; href=&quot;http://example.com/elsie&quot; id=&quot;link1&quot;&gt;Elsie&lt;/a&gt;</span></span><br><span class="line"></span><br><span class="line">soup.find_all(<span class="string">&#x27;a&#x27;</span>)</span><br><span class="line"><span class="comment"># [&lt;a class=&quot;sister&quot; href=&quot;http://example.com/elsie&quot; id=&quot;link1&quot;&gt;Elsie&lt;/a&gt;,</span></span><br><span class="line"><span class="comment">#  &lt;a class=&quot;sister&quot; href=&quot;http://example.com/lacie&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt;,</span></span><br><span class="line"><span class="comment">#  &lt;a class=&quot;sister&quot; href=&quot;http://example.com/tillie&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;]</span></span><br><span class="line"></span><br><span class="line">soup.find(<span class="built_in">id</span>=<span class="string">&quot;link3&quot;</span>)  <span class="comment"># 获取id为link3的标签</span></span><br><span class="line"><span class="comment"># &lt;a class=&quot;sister&quot; href=&quot;http://example.com/tillie&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;</span></span><br></pre></td></tr></table></figure>

<p>从文档中找到所有&lt;a&gt;标签的链接:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> link <span class="keyword">in</span> soup.find_all(<span class="string">&#x27;a&#x27;</span>):</span><br><span class="line">    <span class="built_in">print</span>(link.get(<span class="string">&#x27;href&#x27;</span>))</span><br><span class="line">    <span class="comment"># http://example.com/elsie</span></span><br><span class="line">    <span class="comment"># http://example.com/lacie</span></span><br><span class="line">    <span class="comment"># http://example.com/tillie</span></span><br></pre></td></tr></table></figure>

<p>从文档中获取所有文字内容:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(soup.get_text())</span><br></pre></td></tr></table></figure>

<h3 id="3、如何使用"><a href="#3、如何使用" class="headerlink" title="3、如何使用"></a>3、如何使用</h3><p>将一段文档传入BeautifulSoup 的构造方法,就能得到一个文档的对象, 可以传入一段字符串或一个文件句柄.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"></span><br><span class="line">soup = BeautifulSoup(<span class="built_in">open</span>(<span class="string">&quot;index.html&quot;</span>))</span><br><span class="line"></span><br><span class="line">soup = BeautifulSoup(<span class="string">&quot;&lt;html&gt;data&lt;/html&gt;&quot;</span>, <span class="string">&#x27;lxml&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>然后,Beautiful Soup选择最合适的解析器来解析这段文档,如果手动指定解析器那么Beautiful Soup会选择指定的解析器来解析文档。</p>
<h2 id="二、beautifulsoup的遍历文档树"><a href="#二、beautifulsoup的遍历文档树" class="headerlink" title="二、beautifulsoup的遍历文档树"></a>二、beautifulsoup的遍历文档树</h2><p>还拿”爱丽丝梦游仙境”的文档来做例子:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">html_doc = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">&lt;html&gt;&lt;head&gt;&lt;title&gt;The Dormouse&#x27;s story&lt;/title&gt;&lt;/head&gt;</span></span><br><span class="line"><span class="string">    &lt;body&gt;</span></span><br><span class="line"><span class="string">&lt;p class=&quot;title&quot;&gt;&lt;b&gt;The Dormouse&#x27;s story&lt;/b&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&lt;p class=&quot;story&quot;&gt;Once upon a time there were three little sisters; and their names were</span></span><br><span class="line"><span class="string">&lt;a href=&quot;http://example.com/elsie&quot; class=&quot;sister&quot; id=&quot;link1&quot;&gt;Elsie&lt;/a&gt;,</span></span><br><span class="line"><span class="string">&lt;a href=&quot;http://example.com/lacie&quot; class=&quot;sister&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt; and</span></span><br><span class="line"><span class="string">&lt;a href=&quot;http://example.com/tillie&quot; class=&quot;sister&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;;</span></span><br><span class="line"><span class="string">and they lived at the bottom of a well.&lt;/p&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&lt;p class=&quot;story&quot;&gt;...&lt;/p&gt;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="comment"># lxml和html.parser解析的有时候会根据html是否完整而有解析不同的问题，需要注意</span></span><br><span class="line">soup = BeautifulSoup(html_doc, <span class="string">&#x27;html.parser&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>通过这段例子来演示怎样从文档的一段内容找到另一段内容</p>
<h3 id="1、子节点"><a href="#1、子节点" class="headerlink" title="1、子节点"></a>1、子节点</h3><p>一个Tag可能包含多个字符串或其它的Tag,这些都是这个Tag的子节点.Beautiful Soup提供了许多操作和遍历子节点的属性.</p>
<p>注意: Beautiful Soup中字符串节点不支持这些属性,因为字符串没有子节点。</p>
<h4 id="1-1-contents"><a href="#1-1-contents" class="headerlink" title="1.1 .contents"></a>1.1 .contents</h4><p>tag的 <code>.contents</code> 属性可以将tag的子节点以列表的方式输出:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">head_tag = soup.head</span><br><span class="line">head_tag</span><br><span class="line"><span class="comment"># &lt;head&gt;&lt;title&gt;The Dormouse&#x27;s story&lt;/title&gt;&lt;/head&gt;</span></span><br><span class="line"></span><br><span class="line">head_tag.contents</span><br><span class="line">[&lt;title&gt;The Dormouse<span class="string">&#x27;s story&lt;/title&gt;]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">title_tag = head_tag.contents[0]</span></span><br><span class="line"><span class="string">title_tag</span></span><br><span class="line"><span class="string"># &lt;title&gt;The Dormouse&#x27;</span>s story&lt;/title&gt;</span><br><span class="line">title_tag.contents</span><br><span class="line"><span class="comment"># [u&#x27;The Dormouse&#x27;s story&#x27;]</span></span><br></pre></td></tr></table></figure>

<p>字符串没有 <code>.contents</code> 属性,因为字符串没有子节点:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">text = title_tag.contents[<span class="number">0</span>]</span><br><span class="line">text.contents</span><br><span class="line"><span class="comment"># AttributeError: &#x27;NavigableString&#x27; object has no attribute &#x27;contents&#x27;</span></span><br></pre></td></tr></table></figure>



<h3 id="2、-节点内容"><a href="#2、-节点内容" class="headerlink" title="2、 节点内容"></a>2、 节点内容</h3><h4 id="2-1-string"><a href="#2-1-string" class="headerlink" title="2.1 .string"></a>2.1 .string</h4><p>如果tag只有一个 <code>NavigableString</code> 类型子节点,那么这个tag可以使用 <code>.string</code> 得到子节点。如果一个tag仅有一个子节点,那么这个tag也可以使用 <code>.string</code> 方法,输出结果与当前唯一子节点的 <code>.string</code> 结果相同。</p>
<p>通俗点说就是：如果一个标签里面没有标签了，那么 .string 就会返回标签里面的内容。如果标签里面只有唯一的一个标签了，那么 .string 也会返回最里面的内容。例如：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span> (soup.head.string)</span><br><span class="line"><span class="comment">#The Dormouse&#x27;s story</span></span><br><span class="line"><span class="comment"># &lt;title&gt;&lt;b&gt;The Dormouse&#x27;s story&lt;/b&gt;&lt;/title&gt;</span></span><br><span class="line"><span class="built_in">print</span> (soup.title.string)</span><br><span class="line"><span class="comment">#The Dormouse&#x27;s story</span></span><br></pre></td></tr></table></figure>

<p>如果tag包含了多个子节点,tag就无法确定，string 方法应该调用哪个子节点的内容, .string 的输出结果是 None</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span> (soup.html.string)</span><br><span class="line"><span class="comment">#None</span></span><br></pre></td></tr></table></figure>

<h4 id="2-2-text"><a href="#2-2-text" class="headerlink" title="2.2 .text"></a>2.2 .text</h4><p>如果tag包含了多个子节点, text则会返回内部所有文本内容</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print (soup.html.text)</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>strings和text都可以返回所有文本内容  </p>
<p>区别：text返回内容为字符串类型  strings为生成器generator</p>
<h3 id="3、-多个内容"><a href="#3、-多个内容" class="headerlink" title="3、 多个内容"></a>3、 <strong>多个内容</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.strings .stripped_strings 属性</span><br></pre></td></tr></table></figure>

<h4 id="3-1-strings"><a href="#3-1-strings" class="headerlink" title="3.1**.strings**"></a>3.1**.strings**</h4><p>获取多个内容，不过需要遍历获取，比如下面的例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> string <span class="keyword">in</span> soup.strings:</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">repr</span>(string))</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">  &#x27;\n&#x27;</span></span><br><span class="line"><span class="string">&quot;The Dormouse&#x27;s story&quot;</span></span><br><span class="line"><span class="string">&#x27;\n&#x27;</span></span><br><span class="line"><span class="string">&#x27;\n&#x27;</span></span><br><span class="line"><span class="string">&quot;The Dormouse&#x27;s story&quot;</span></span><br><span class="line"><span class="string">&#x27;\n&#x27;</span></span><br><span class="line"><span class="string">&#x27;Once upon a time there were three little sisters; and their names were\n&#x27;</span></span><br><span class="line"><span class="string">&#x27;Elsie&#x27;</span></span><br><span class="line"><span class="string">&#x27;,\n&#x27;</span></span><br><span class="line"><span class="string">&#x27;Lacie&#x27;</span></span><br><span class="line"><span class="string">&#x27; and\n&#x27;</span></span><br><span class="line"><span class="string">&#x27;Tillie&#x27;</span></span><br><span class="line"><span class="string">&#x27;;\nand they lived at the bottom of a well.&#x27;</span></span><br><span class="line"><span class="string">&#x27;\n&#x27;</span></span><br><span class="line"><span class="string">&#x27;...&#x27;</span></span><br><span class="line"><span class="string">&#x27;\n&#x27;  </span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span>    </span><br></pre></td></tr></table></figure>

<h4 id="3-2-stripped-strings"><a href="#3-2-stripped-strings" class="headerlink" title="3.2 .stripped_strings"></a>3.2 <strong>.stripped_strings</strong></h4><p>输出的字符串中可能包含了很多空格或空行,使用 <code>.stripped_strings</code> 可以去除多余空白内容</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> string <span class="keyword">in</span> soup.stripped_strings:</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">repr</span>(string))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;The Dormouse&#x27;s story&quot;</span></span><br><span class="line"><span class="string">&quot;The Dormouse&#x27;s story&quot;</span></span><br><span class="line"><span class="string">&#x27;Once upon a time there were three little sisters; and their names were&#x27;</span></span><br><span class="line"><span class="string">&#x27;Elsie&#x27;</span></span><br><span class="line"><span class="string">&#x27;,&#x27;</span></span><br><span class="line"><span class="string">&#x27;Lacie&#x27;</span></span><br><span class="line"><span class="string">&#x27;and&#x27;</span></span><br><span class="line"><span class="string">&#x27;Tillie&#x27;</span></span><br><span class="line"><span class="string">&#x27;;\nand they lived at the bottom of a well.&#x27;</span></span><br><span class="line"><span class="string">&#x27;...&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="4、-父节点"><a href="#4、-父节点" class="headerlink" title="4、 父节点"></a>4、 父节点</h3><p>继续分析文档树,每个tag或字符串都有父节点:被包含在某个tag中</p>
<h4 id="4-1-parent"><a href="#4-1-parent" class="headerlink" title="4.1 .parent"></a>4.1 .parent</h4><p>通过 <code>.parent</code> 属性来获取某个元素的父节点.在例子“爱丽丝”的文档中,&lt;head&gt;标签是&lt;title&gt;标签的父节点:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">title_tag = soup.title</span><br><span class="line">title_tag</span><br><span class="line"><span class="comment"># &lt;title&gt;The Dormouse&#x27;s story&lt;/title&gt;</span></span><br><span class="line">title_tag.parent</span><br><span class="line"><span class="comment"># &lt;head&gt;&lt;title&gt;The Dormouse&#x27;s story&lt;/title&gt;&lt;/head&gt;</span></span><br></pre></td></tr></table></figure>

<p>文档的顶层节点比如&lt;html&gt;的父节点是 <code>BeautifulSoup</code> 对象:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">html_tag = soup.html</span><br><span class="line"><span class="built_in">type</span>(html_tag.parent)</span><br><span class="line"><span class="comment"># &lt;class &#x27;bs4.BeautifulSoup&#x27;&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="三、beautifulsoup的搜索文档树"><a href="#三、beautifulsoup的搜索文档树" class="headerlink" title="三、beautifulsoup的搜索文档树"></a>三、beautifulsoup的搜索文档树</h2><h3 id="1、find-all"><a href="#1、find-all" class="headerlink" title="1、find_all"></a>1、find_all</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find_all( name , attrs , recursive , string , **kwargs )</span><br></pre></td></tr></table></figure>

<p><code>find_all()</code> 方法搜索当前tag的所有tag子节点,并判断是否符合过滤器的条件:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">soup.find_all(<span class="string">&quot;title&quot;</span>)</span><br><span class="line"><span class="comment"># [&lt;title&gt;The Dormouse&#x27;s story&lt;/title&gt;]</span></span><br><span class="line"></span><br><span class="line">soup.find_all(<span class="string">&quot;p&quot;</span>, <span class="string">&quot;title&quot;</span>)</span><br><span class="line"><span class="comment"># [&lt;p class=&quot;title&quot;&gt;&lt;b&gt;The Dormouse&#x27;s story&lt;/b&gt;&lt;/p&gt;]</span></span><br><span class="line"></span><br><span class="line">soup.find_all(<span class="string">&quot;a&quot;</span>)</span><br><span class="line"><span class="comment"># [&lt;a class=&quot;sister&quot; href=&quot;http://example.com/elsie&quot; id=&quot;link1&quot;&gt;Elsie&lt;/a&gt;,</span></span><br><span class="line"><span class="comment">#  &lt;a class=&quot;sister&quot; href=&quot;http://example.com/lacie&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt;,</span></span><br><span class="line"><span class="comment">#  &lt;a class=&quot;sister&quot; href=&quot;http://example.com/tillie&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;]</span></span><br><span class="line"></span><br><span class="line">soup.find_all(<span class="built_in">id</span>=<span class="string">&quot;link2&quot;</span>)</span><br><span class="line"><span class="comment"># [&lt;a class=&quot;sister&quot; href=&quot;http://example.com/lacie&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt;]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="comment"># 模糊查询 包含sisters的就可以</span></span><br><span class="line">soup.find(string=re.<span class="built_in">compile</span>(<span class="string">&quot;sisters&quot;</span>))</span><br><span class="line"><span class="comment"># &#x27;Once upon a time there were three little sisters; and their names were\n&#x27;</span></span><br></pre></td></tr></table></figure>

<p>有几个方法很相似,还有几个方法是新的,参数中的 <code>string</code> 和 <code>id</code> 是什么含义? 为什么 <code>find_all(&quot;p&quot;, &quot;title&quot;)</code> 返回的是CSS Class为”title”的&lt;p&gt;标签? 我们来仔细看一下 <code>find_all()</code> 的参数.</p>
<h4 id="1-1-name-参数"><a href="#1-1-name-参数" class="headerlink" title="1.1 name 参数"></a>1.1 name 参数</h4><p><code>name</code> 参数可以查找所有名字为 <code>name</code> 的tag,字符串对象会被自动忽略掉.</p>
<p>简单的用法如下:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">soup.find_all(<span class="string">&quot;title&quot;</span>)</span><br><span class="line"><span class="comment"># [&lt;title&gt;The Dormouse&#x27;s story&lt;/title&gt;]</span></span><br></pre></td></tr></table></figure>

<p>搜索 <code>name</code> 参数的值可以使任一类型的 过滤器 ,字符串,正则表达式,列表,方法或是 <code>True</code> .</p>
<p><strong>&lt;1&gt; 传字符串</strong></p>
<p>最简单的过滤器是字符串.在搜索方法中传入一个字符串参数,Beautiful Soup会查找与字符串完整匹配的内容,下面的例子用于查找文档中所有的<code>&lt;b&gt;</code>标签</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">soup.find_all(<span class="string">&#x27;b&#x27;</span>)</span><br><span class="line"><span class="comment"># [&lt;b&gt;The Dormouse&#x27;s story&lt;/b&gt;]</span></span><br></pre></td></tr></table></figure>

<p><strong>&lt;2&gt; 传正则表达式</strong></p>
<p>如果传入正则表达式作为参数,Beautiful Soup会通过正则表达式的 <code>match()</code> 来匹配内容.下面例子中找出所有以b开头的标签,这表示&lt;body&gt;和&lt;b&gt;标签都应该被找到</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">for</span> tag <span class="keyword">in</span> soup.find_all(re.<span class="built_in">compile</span>(<span class="string">&quot;^b&quot;</span>)):</span><br><span class="line">    <span class="built_in">print</span>(tag.name)</span><br><span class="line"><span class="comment"># body</span></span><br><span class="line"><span class="comment"># b</span></span><br></pre></td></tr></table></figure>

<p><strong>&lt;3&gt; 传列表</strong></p>
<p>如果传入列表参数,Beautiful Soup会将与列表中任一元素匹配的内容返回.下面代码找到文档中所有&lt;a&gt;标签和&lt;b&gt;标签</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">soup.find_all([<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>])</span><br><span class="line"><span class="comment"># [&lt;b&gt;The Dormouse&#x27;s story&lt;/b&gt;,</span></span><br><span class="line"><span class="comment">#  &lt;a class=&quot;sister&quot; href=&quot;http://example.com/elsie&quot; id=&quot;link1&quot;&gt;Elsie&lt;/a&gt;,</span></span><br><span class="line"><span class="comment">#  &lt;a class=&quot;sister&quot; href=&quot;http://example.com/lacie&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt;,</span></span><br><span class="line"><span class="comment">#  &lt;a class=&quot;sister&quot; href=&quot;http://example.com/tillie&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;]</span></span><br></pre></td></tr></table></figure>



<h4 id="1-2-keyword-参数"><a href="#1-2-keyword-参数" class="headerlink" title="1.2 keyword 参数"></a>1.2 <strong>keyword 参数</strong></h4><p>如果一个指定名字的参数不是搜索内置的参数名,搜索时会把该参数当作指定名字tag的属性来搜索,如果包含一个名字为 <code>id</code> 的参数,Beautiful Soup会搜索每个tag的”id”属性.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">soup.find_all(<span class="built_in">id</span>=<span class="string">&#x27;link2&#x27;</span>)</span><br><span class="line"><span class="comment"># [&lt;a class=&quot;sister&quot; href=&quot;http://example.com/lacie&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt;]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="comment"># 超链接包含elsie标签</span></span><br><span class="line"><span class="built_in">print</span>(soup.find_all(href=re.<span class="built_in">compile</span>(<span class="string">&quot;elsie&quot;</span>)))</span><br><span class="line"><span class="comment"># [&lt;a class=&quot;sister&quot; href=&quot;http://example.com/elsie&quot; id=&quot;link1&quot;&gt;Elsie&lt;/a&gt;]</span></span><br><span class="line"><span class="comment"># 以The作为开头的字符串</span></span><br><span class="line"><span class="built_in">print</span>(soup.find_all(text=re.<span class="built_in">compile</span>(<span class="string">&quot;^The&quot;</span>))) </span><br><span class="line"><span class="comment"># [&quot;The Dormouse&#x27;s story&quot;, &quot;The Dormouse&#x27;s story&quot;]</span></span><br><span class="line"><span class="comment"># class选择器包含st的节点</span></span><br><span class="line"><span class="built_in">print</span>(soup.find_all(class_=re.<span class="built_in">compile</span>(<span class="string">&quot;st&quot;</span>)))</span><br></pre></td></tr></table></figure>

<p>搜索指定名字的属性时可以使用的参数值包括 字符串 , 正则表达式 , 列表, True .</p>
<p>下面的例子在文档树中查找所有包含 <code>id</code> 属性的tag,无论 <code>id</code> 的值是什么:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">soup.find_all(<span class="built_in">id</span>=<span class="literal">True</span>)</span><br><span class="line"><span class="comment"># [&lt;a class=&quot;sister&quot; href=&quot;http://example.com/elsie&quot; id=&quot;link1&quot;&gt;Elsie&lt;/a&gt;,</span></span><br><span class="line"><span class="comment">#  &lt;a class=&quot;sister&quot; href=&quot;http://example.com/lacie&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt;,</span></span><br><span class="line"><span class="comment">#  &lt;a class=&quot;sister&quot; href=&quot;http://example.com/tillie&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;]</span></span><br></pre></td></tr></table></figure>

<p>使用多个指定名字的参数可以同时过滤tag的多个属性:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">soup.find_all(href=re.<span class="built_in">compile</span>(<span class="string">&quot;elsie&quot;</span>), <span class="built_in">id</span>=<span class="string">&#x27;link1&#x27;</span>)</span><br><span class="line"><span class="comment"># [&lt;a class=&quot;sister&quot; href=&quot;http://example.com/elsie&quot; id=&quot;link1&quot;&gt;three&lt;/a&gt;]</span></span><br></pre></td></tr></table></figure>

<p>在这里我们想用 class 过滤，不过 class 是 python 的关键词，这怎么办？加个下划线就可以</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(soup.find_all(<span class="string">&quot;a&quot;</span>, class_=<span class="string">&quot;sister&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">[&lt;a class=&quot;sister&quot; href=&quot;http://example.com/elsie&quot; id=&quot;link1&quot;&gt;Elsie&lt;/a&gt;,</span></span><br><span class="line"><span class="string">&lt;a class=&quot;sister&quot; href=&quot;http://example.com/lacie&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt;,</span></span><br><span class="line"><span class="string">&lt;a class=&quot;sister&quot; href=&quot;http://example.com/tillie&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;</span></span><br><span class="line"><span class="string">]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<p>通过 <code>find_all()</code> 方法的 <code>attrs</code> 参数定义一个字典参数来搜索包含特殊属性的tag:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">data_soup.find_all(attrs=&#123;<span class="string">&quot;data-foo&quot;</span>: <span class="string">&quot;value&quot;</span>&#125;)</span><br><span class="line"><span class="comment"># [&lt;div data-foo=&quot;value&quot;&gt;foo!&lt;/div&gt;]</span></span><br></pre></td></tr></table></figure>

<p>注意：如何查看条件id和class同时存在时的写法</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(soup.find_all(<span class="string">&#x27;b&#x27;</span>, class_=<span class="string">&quot;story&quot;</span>, <span class="built_in">id</span>=<span class="string">&quot;x&quot;</span>))</span><br><span class="line"><span class="built_in">print</span>(soup.find_all(<span class="string">&#x27;b&#x27;</span>, attrs=&#123;<span class="string">&quot;class&quot;</span>:<span class="string">&quot;story&quot;</span>, <span class="string">&quot;id&quot;</span>:<span class="string">&quot;x&quot;</span>&#125;))</span><br></pre></td></tr></table></figure>

<h4 id="1-3-text-参数"><a href="#1-3-text-参数" class="headerlink" title="1.3  text 参数"></a>1.3  <strong>text 参数</strong></h4><p>通过 <code>text</code> 参数可以搜搜文档中的字符串内容.与 <code>name</code> 参数的可选值一样, <code>text</code> 参数接受 字符串 , 正则表达式 , 列表, True</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(soup.find_all(text=<span class="string">&quot;Elsie&quot;</span>))</span><br><span class="line"><span class="comment"># [&#x27;Elsie&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(soup.find_all(text=[<span class="string">&quot;Tillie&quot;</span>, <span class="string">&quot;Elsie&quot;</span>, <span class="string">&quot;Lacie&quot;</span>]))</span><br><span class="line"><span class="comment"># [&#x27;Elsie&#x27;, &#x27;Lacie&#x27;, &#x27;Tillie&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 只要包含Dormouse就可以</span></span><br><span class="line"><span class="built_in">print</span>(soup.find_all(text=re.<span class="built_in">compile</span>(<span class="string">&quot;Dormouse&quot;</span>)))</span><br><span class="line"><span class="comment"># [&quot;The Dormouse&#x27;s story&quot;, &quot;The Dormouse&#x27;s story&quot;]</span></span><br></pre></td></tr></table></figure>

<h4 id="1-4-limit-参数"><a href="#1-4-limit-参数" class="headerlink" title="1.4 limit 参数"></a>1.4 <strong>limit 参数</strong></h4><p><code>find_all()</code> 方法返回全部的搜索结构,如果文档树很大那么搜索会很慢.如果我们不需要全部结果,可以使用 <code>limit</code> 参数限制返回结果的数量.效果与SQL中的limit关键字类似,当搜索到的结果数量达到 <code>limit</code> 的限制时,就停止搜索返回结果.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(soup.find_all(<span class="string">&quot;a&quot;</span>,limit=<span class="number">2</span>))</span><br><span class="line"><span class="built_in">print</span>(soup.find_all(<span class="string">&quot;a&quot;</span>)[<span class="number">0</span>:<span class="number">2</span>])</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">[&lt;a class=&quot;sister&quot; href=&quot;http://example.com/elsie&quot; id=&quot;link1&quot;&gt;Elsie&lt;/a&gt;, </span></span><br><span class="line"><span class="string">&lt;a class=&quot;sister&quot; href=&quot;http://example.com/lacie&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt;]</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="2、find"><a href="#2、find" class="headerlink" title="2、find()"></a>2、find()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find( name , attrs , recursive , string , **kwargs )</span><br></pre></td></tr></table></figure>

<p><code>find_all()</code> 方法将返回文档中符合条件的所有tag,尽管有时候我们只想得到一个结果.比如文档中只有一个&lt;body&gt;标签,那么使用 <code>find_all()</code> 方法来查找&lt;body&gt;标签就不太合适, 使用 <code>find_all</code> 方法并设置 <code>limit=1</code> 参数不如直接使用 <code>find()</code> 方法.下面两行代码是等价的:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">soup.find_all(<span class="string">&#x27;title&#x27;</span>, limit=<span class="number">1</span>)</span><br><span class="line"><span class="comment"># [&lt;title&gt;The Dormouse&#x27;s story&lt;/title&gt;]</span></span><br><span class="line"></span><br><span class="line">soup.find(<span class="string">&#x27;title&#x27;</span>)</span><br><span class="line"><span class="comment"># &lt;title&gt;The Dormouse&#x27;s story&lt;/title&gt;</span></span><br></pre></td></tr></table></figure>

<p>唯一的区别是 <code>find_all()</code> 方法的返回结果是值包含一个元素的列表,而 <code>find()</code> 方法直接返回结果.</p>
<p><code>find_all()</code> 方法没有找到目标是返回空列表, <code>find()</code> 方法找不到目标时,返回 <code>None</code> .</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(soup.find(<span class="string">&quot;nosuchtag&quot;</span>))</span><br><span class="line"><span class="comment"># None</span></span><br></pre></td></tr></table></figure>

<p><code>soup.head.title</code> 是 tag的名字 方法的简写.这个简写的原理就是多次调用当前tag的 <code>find()</code> 方法:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">soup.head.title</span><br><span class="line"><span class="comment"># &lt;title&gt;The Dormouse&#x27;s story&lt;/title&gt;</span></span><br><span class="line"></span><br><span class="line">soup.find(<span class="string">&quot;head&quot;</span>).find(<span class="string">&quot;title&quot;</span>)</span><br><span class="line"><span class="comment"># &lt;title&gt;The Dormouse&#x27;s story&lt;/title&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="四、beautifulsoup的css选择器"><a href="#四、beautifulsoup的css选择器" class="headerlink" title="四、beautifulsoup的css选择器"></a>四、beautifulsoup的css选择器</h2><p>我们在写 CSS 时，标签名不加任何修饰，类名前加点，id名前加 #，在这里我们也可以利用类似的方法来筛选元素，用到的方法是 <strong>soup.select()，</strong>返回类型是 <strong>list</strong></p>
<h3 id="1、通过标签名查找"><a href="#1、通过标签名查找" class="headerlink" title="1、通过标签名查找"></a>1、通过标签名查找</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(soup.select(<span class="string">&quot;title&quot;</span>))  <span class="comment">#[&lt;title&gt;The Dormouse&#x27;s story&lt;/title&gt;]</span></span><br><span class="line"><span class="built_in">print</span>(soup.select(<span class="string">&quot;b&quot;</span>))      <span class="comment">#[&lt;b&gt;The Dormouse&#x27;s story&lt;/b&gt;]</span></span><br></pre></td></tr></table></figure>

<h3 id="2、通过类名查找"><a href="#2、通过类名查找" class="headerlink" title="2、通过类名查找"></a>2、通过类名查找</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(soup.select(<span class="string">&quot;.sister&quot;</span>)) </span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">[&lt;a class=&quot;sister&quot; href=&quot;http://example.com/elsie&quot; id=&quot;link1&quot;&gt;Elsie&lt;/a&gt;, </span></span><br><span class="line"><span class="string">&lt;a class=&quot;sister&quot; href=&quot;http://example.com/lacie&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt;, </span></span><br><span class="line"><span class="string">&lt;a class=&quot;sister&quot; href=&quot;http://example.com/tillie&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="3、id名查找"><a href="#3、id名查找" class="headerlink" title="3、id名查找"></a>3、id名查找</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(soup.select(<span class="string">&quot;#link1&quot;</span>))</span><br><span class="line"><span class="comment"># [&lt;a class=&quot;sister&quot; href=&quot;http://example.com/elsie&quot; id=&quot;link1&quot;&gt;Elsie&lt;/a&gt;]</span></span><br></pre></td></tr></table></figure>

<h3 id="4、组合查找"><a href="#4、组合查找" class="headerlink" title="4、组合查找"></a>4、组合查找</h3><p>组合查找即和写 class 文件时，标签名与类名、id名进行的组合原理是一样的，例如查找 p 标签中，id 等于 link1的内容，二者需要用空格分开</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(soup.select(<span class="string">&quot;p #link2&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">#[&lt;a class=&quot;sister&quot; href=&quot;http://example.com/lacie&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt;]</span></span><br></pre></td></tr></table></figure>

<p>直接子标签查找</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(soup.select(<span class="string">&quot;p &gt; #link2&quot;</span>))</span><br><span class="line"><span class="comment"># [&lt;a class=&quot;sister&quot; href=&quot;http://example.com/lacie&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt;]</span></span><br></pre></td></tr></table></figure>

<p>查找既有class也有id选择器的标签</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a_string = soup.select(&quot;.story#test&quot;)</span><br></pre></td></tr></table></figure>

<p>查找有多个class选择器的标签</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a_string = soup.select(&quot;.story.test&quot;)</span><br></pre></td></tr></table></figure>

<p>查找有多个class选择器和一个id选择器的标签</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a_string = soup.select(&quot;.story.test#book&quot;)</span><br></pre></td></tr></table></figure>

<h3 id="5、属性查找"><a href="#5、属性查找" class="headerlink" title="5、属性查找"></a>5、属性查找</h3><p>查找时还可以加入属性元素，属性需要用中括号括起来，注意属性和标签属于同一节点，所以中间不能加空格，否则会无法匹配到。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(soup.select(<span class="string">&quot;a[href=&#x27;http://example.com/tillie&#x27;]&quot;</span>))</span><br><span class="line"><span class="comment">#[&lt;a class=&quot;sister&quot; href=&quot;http://example.com/tillie&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;]</span></span><br></pre></td></tr></table></figure>

<p>select 方法返回的结果都是列表形式，可以遍历形式输出，然后用 get_text() 方法来获取它的内容：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> title <span class="keyword">in</span> soup.select(<span class="string">&#x27;a&#x27;</span>):</span><br><span class="line">    <span class="built_in">print</span> (title.get_text())</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">Elsie</span></span><br><span class="line"><span class="string">Lacie</span></span><br><span class="line"><span class="string">Tillie</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>



</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202309300844043.png" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202309300844043.png" title="头像" alt="头像"></a><div class="post-copyright__author_name">小u</div><div class="post-copyright__author_desc">热爱可抵岁月漫长</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="http://example.com/2023/10/01/codenotes/python/lf/oc/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('http://example.com/2023/10/01/codenotes/python/lf/oc/')">路飞爬虫(第六期)</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202309300816229.jpg" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202309300816229.jpg" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202309300816224.jpg" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202309300816224.jpg" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="http://example.com/2023/10/01/codenotes/python/lf/oc/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=路飞爬虫(第六期)&amp;url=http://example.com/2023/10/01/codenotes/python/lf/oc/&amp;pic=" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="rm.copyPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/python/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>python<span class="tagsPageCount">8</span></a><a class="post-meta__box__tags" href="/tags/%E8%B7%AF%E9%A3%9E%E5%AD%A6%E9%99%A2/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>路飞学院<span class="tagsPageCount">3</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202309300844043.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/10/01/codenotes/python/lf/1/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">01-Python基础</div></div></a></div><div class="next-post pull-right"><a href="/2023/10/01/codenotes/python/lf/README/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">01-python基础</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>Related Articles</span></div><div class="relatedPosts-list"><div><a href="/2023/10/01/codenotes/python/lf/1/" title="01-Python基础"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-10-01</div><div class="title">01-Python基础</div></div></a></div><div><a href="/2023/10/01/codenotes/python/lf/2/" title="02-函数和模块"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-10-01</div><div class="title">02-函数和模块</div></div></a></div><div><a href="/2023/10/01/codenotes/python/auto/" title="办公自动化"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-10-01</div><div class="title">办公自动化</div></div></a></div><div><a href="/2023/10/01/codenotes/python/2023/" title="爬虫实战2023"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-10-01</div><div class="title">爬虫实战2023</div></div></a></div><div><a href="/2023/10/01/codenotes/python/python-50-down/" title="python基础50课(下)"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-10-01</div><div class="title">python基础50课(下)</div></div></a></div><div><a href="/2023/10/01/codenotes/python/python-50-up/" title="python基础50课(上)"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-10-01</div><div class="title">python基础50课(上)</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaou-1305448902.cos.ap-nanjing.myqcloud.com/img/202309300844043.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/24/64e6ce9c507bb.png" ait="status"/></div></div><div class="author-info__description">Java,java,springboot,mysql,redis,教程,git,软件,编程,开发,互联网,Java 基础,Java 教程,Java程序员进阶之路,Java 入门,Vue,前端,算法</div></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bullhorn anzhiyu-shake"></i><span>Announcement</span></div><div class="announcement_content">欢迎来看我的博客 博客主地址：http://blog.xiaou61.top/  备用地址：https://newblog.guoyaxue.top/</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>Catalog</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E8%8A%82-python%E5%9F%BA%E7%A1%80%E5%86%85%E5%AE%B9%E5%9B%9E%E9%A1%BE"><span class="toc-number">1.</span> <span class="toc-text">第一节,  python基础内容回顾</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C-%E5%85%B3%E4%BA%8E%E7%88%AC%E8%99%AB%E7%9A%84%E7%89%B9%E6%AE%8A%E6%80%A7"><span class="toc-number">1.1.</span> <span class="toc-text">二. 关于爬虫的特殊性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89-%E5%BF%85%E9%A1%BB%E8%A6%81%E6%8E%8C%E6%8F%A1%E7%9A%84py%E5%9F%BA%E7%A1%80"><span class="toc-number">1.2.</span> <span class="toc-text">三. 必须要掌握的py基础</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E7%9B%B8%E5%85%B3"><span class="toc-number">1.2.1.</span> <span class="toc-text">3.1 基础语法相关</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">1.2.2.</span> <span class="toc-text">3.2  字符串</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-%E5%88%97%E8%A1%A8"><span class="toc-number">1.2.3.</span> <span class="toc-text">3.3  列表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-%E5%AD%97%E5%85%B8"><span class="toc-number">1.2.4.</span> <span class="toc-text">3.4  字典</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-%E5%AD%97%E7%AC%A6%E9%9B%86%E5%92%8Cbytes"><span class="toc-number">1.2.5.</span> <span class="toc-text">3.5  字符集和bytes</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-6-%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C"><span class="toc-number">1.2.6.</span> <span class="toc-text">3.6 文件操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-7-%E5%85%B3%E4%BA%8E%E5%87%BD%E6%95%B0"><span class="toc-number">1.2.7.</span> <span class="toc-text">3.7  关于函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-8-%E5%85%B3%E4%BA%8E%E6%A8%A1%E5%9D%97"><span class="toc-number">1.2.8.</span> <span class="toc-text">3.8 关于模块</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E8%8A%82-%E6%AD%A3%E5%88%99"><span class="toc-number">2.</span> <span class="toc-text">第二节 正则</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E6%AD%A3%E5%88%99%E5%9F%BA%E7%A1%80"><span class="toc-number">2.1.</span> <span class="toc-text">一、正则基础</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8%E6%AD%A3%E5%88%99"><span class="toc-number">2.1.1.</span> <span class="toc-text">1、为什么使用正则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E6%AD%A3%E5%88%99%E4%B8%8Ere%E6%A8%A1%E5%9D%97%E7%AE%80%E4%BB%8B"><span class="toc-number">2.1.2.</span> <span class="toc-text">2、正则与re模块简介</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">2.2.</span> <span class="toc-text">二、正则表达式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E5%8C%B9%E9%85%8D%E5%8D%95%E4%B8%AA%E5%AD%97%E7%AC%A6%E4%B8%8E%E6%95%B0%E5%AD%97"><span class="toc-number">2.2.1.</span> <span class="toc-text">1、匹配单个字符与数字</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E5%8C%B9%E9%85%8D%E9%94%9A%E5%AD%97%E7%AC%A6"><span class="toc-number">2.2.2.</span> <span class="toc-text">2、匹配锚字符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E9%99%90%E5%AE%9A%E7%AC%A6"><span class="toc-number">2.2.3.</span> <span class="toc-text">3、限定符</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81re%E6%A8%A1%E5%9D%97%E4%B8%AD%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0"><span class="toc-number">2.3.</span> <span class="toc-text">三、re模块中常用函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81match-%E5%87%BD%E6%95%B0"><span class="toc-number">2.3.1.</span> <span class="toc-text">1、match()函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81searce-%E5%87%BD%E6%95%B0"><span class="toc-number">2.3.2.</span> <span class="toc-text">2、searce()函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81findall-%E5%87%BD%E6%95%B0%EF%BC%88%E8%BF%94%E5%9B%9E%E5%88%97%E8%A1%A8%EF%BC%89"><span class="toc-number">2.3.3.</span> <span class="toc-text">3、findall()函数（返回列表）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81finditer-%E5%87%BD%E6%95%B0"><span class="toc-number">2.3.4.</span> <span class="toc-text">4、finditer()函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81split-%E5%87%BD%E6%95%B0"><span class="toc-number">2.3.5.</span> <span class="toc-text">5、split()函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6%E3%80%81%E4%BF%AE%E6%AD%A3%E7%AC%A6"><span class="toc-number">2.3.6.</span> <span class="toc-text">6、修正符</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E6%AD%A3%E5%88%99%E9%AB%98%E7%BA%A7"><span class="toc-number">2.4.</span> <span class="toc-text">四、正则高级</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E5%88%86%E7%BB%84-%E8%B5%B7%E5%90%8D%E7%A7%B0"><span class="toc-number">2.4.1.</span> <span class="toc-text">1、分组&amp;起名称</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E7%BC%96%E8%AF%91"><span class="toc-number">2.4.2.</span> <span class="toc-text">2、编译</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E8%B4%AA%E5%A9%AA%E4%B8%8E%E9%9D%9E%E8%B4%AA%E5%A9%AA"><span class="toc-number">2.4.3.</span> <span class="toc-text">3、贪婪与非贪婪</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E8%8A%82-beautifulsoup"><span class="toc-number">3.</span> <span class="toc-text">第三节 beautifulsoup</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81beautifulsoup%E7%9A%84%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8"><span class="toc-number">3.1.</span> <span class="toc-text">一、beautifulsoup的简单使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E5%AE%89%E8%A3%85"><span class="toc-number">3.1.1.</span> <span class="toc-text">1、安装</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1%E8%A7%A3%E6%9E%90%E5%99%A8"><span class="toc-number">3.1.1.1.</span> <span class="toc-text">1.1解析器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-%E8%A7%A3%E6%9E%90%E5%99%A8%E5%AF%B9%E6%AF%94"><span class="toc-number">3.1.1.2.</span> <span class="toc-text">1.2 解析器对比</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B"><span class="toc-number">3.1.2.</span> <span class="toc-text">2、快速开始</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8"><span class="toc-number">3.1.3.</span> <span class="toc-text">3、如何使用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81beautifulsoup%E7%9A%84%E9%81%8D%E5%8E%86%E6%96%87%E6%A1%A3%E6%A0%91"><span class="toc-number">3.2.</span> <span class="toc-text">二、beautifulsoup的遍历文档树</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E5%AD%90%E8%8A%82%E7%82%B9"><span class="toc-number">3.2.1.</span> <span class="toc-text">1、子节点</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-contents"><span class="toc-number">3.2.1.1.</span> <span class="toc-text">1.1 .contents</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81-%E8%8A%82%E7%82%B9%E5%86%85%E5%AE%B9"><span class="toc-number">3.2.2.</span> <span class="toc-text">2、 节点内容</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-string"><span class="toc-number">3.2.2.1.</span> <span class="toc-text">2.1 .string</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-text"><span class="toc-number">3.2.2.2.</span> <span class="toc-text">2.2 .text</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81-%E5%A4%9A%E4%B8%AA%E5%86%85%E5%AE%B9"><span class="toc-number">3.2.3.</span> <span class="toc-text">3、 多个内容</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-strings"><span class="toc-number">3.2.3.1.</span> <span class="toc-text">3.1**.strings**</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-stripped-strings"><span class="toc-number">3.2.3.2.</span> <span class="toc-text">3.2 .stripped_strings</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81-%E7%88%B6%E8%8A%82%E7%82%B9"><span class="toc-number">3.2.4.</span> <span class="toc-text">4、 父节点</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1-parent"><span class="toc-number">3.2.4.1.</span> <span class="toc-text">4.1 .parent</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81beautifulsoup%E7%9A%84%E6%90%9C%E7%B4%A2%E6%96%87%E6%A1%A3%E6%A0%91"><span class="toc-number">3.3.</span> <span class="toc-text">三、beautifulsoup的搜索文档树</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81find-all"><span class="toc-number">3.3.1.</span> <span class="toc-text">1、find_all</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-name-%E5%8F%82%E6%95%B0"><span class="toc-number">3.3.1.1.</span> <span class="toc-text">1.1 name 参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-keyword-%E5%8F%82%E6%95%B0"><span class="toc-number">3.3.1.2.</span> <span class="toc-text">1.2 keyword 参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-text-%E5%8F%82%E6%95%B0"><span class="toc-number">3.3.1.3.</span> <span class="toc-text">1.3  text 参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-4-limit-%E5%8F%82%E6%95%B0"><span class="toc-number">3.3.1.4.</span> <span class="toc-text">1.4 limit 参数</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81find"><span class="toc-number">3.3.2.</span> <span class="toc-text">2、find()</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81beautifulsoup%E7%9A%84css%E9%80%89%E6%8B%A9%E5%99%A8"><span class="toc-number">3.4.</span> <span class="toc-text">四、beautifulsoup的css选择器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E9%80%9A%E8%BF%87%E6%A0%87%E7%AD%BE%E5%90%8D%E6%9F%A5%E6%89%BE"><span class="toc-number">3.4.1.</span> <span class="toc-text">1、通过标签名查找</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E9%80%9A%E8%BF%87%E7%B1%BB%E5%90%8D%E6%9F%A5%E6%89%BE"><span class="toc-number">3.4.2.</span> <span class="toc-text">2、通过类名查找</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81id%E5%90%8D%E6%9F%A5%E6%89%BE"><span class="toc-number">3.4.3.</span> <span class="toc-text">3、id名查找</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81%E7%BB%84%E5%90%88%E6%9F%A5%E6%89%BE"><span class="toc-number">3.4.4.</span> <span class="toc-text">4、组合查找</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81%E5%B1%9E%E6%80%A7%E6%9F%A5%E6%89%BE"><span class="toc-number">3.4.5.</span> <span class="toc-text">5、属性查找</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/10/08/%E5%85%AC%E4%BC%97%E5%8F%B7%E6%94%B6%E8%97%8F/27/" title="再见 MyBatis-Plus ！">再见 MyBatis-Plus ！</a><time datetime="2023-10-08T12:28:14.000Z" title="Created 2023-10-08 20:28:14">2023-10-08</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/10/08/%E5%85%AC%E4%BC%97%E5%8F%B7%E6%94%B6%E8%97%8F/26/" title="“人尽皆知”的单例模式">“人尽皆知”的单例模式</a><time datetime="2023-10-08T12:28:14.000Z" title="Created 2023-10-08 20:28:14">2023-10-08</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/10/08/%E5%85%AC%E4%BC%97%E5%8F%B7%E6%94%B6%E8%97%8F/29/" title="阿里的同事，写的代码真 TMD 优雅！">阿里的同事，写的代码真 TMD 优雅！</a><time datetime="2023-10-08T12:28:14.000Z" title="Created 2023-10-08 20:28:14">2023-10-08</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/10/08/%E5%85%AC%E4%BC%97%E5%8F%B7%E6%94%B6%E8%97%8F/28/" title="别再用 BeanUtils 了，这款 PO VO DTO 转换神器不香么？">别再用 BeanUtils 了，这款 PO VO DTO 转换神器不香么？</a><time datetime="2023-10-08T12:28:14.000Z" title="Created 2023-10-08 20:28:14">2023-10-08</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/10/08/%E5%85%AC%E4%BC%97%E5%8F%B7%E6%94%B6%E8%97%8F/30/" title="MyBatis过时了吗？">MyBatis过时了吗？</a><time datetime="2023-10-08T12:28:14.000Z" title="Created 2023-10-08 20:28:14">2023-10-08</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2020 - 2023 By <a class="footer-bar-link" href="/" title="小u" target="_blank">小u</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">Articles</div><div class="length-num">238</div></a><a href="/tags/" title="tag"><div class="headline">Tags</div><div class="length-num">39</div></a><a href="/categories/" title="category"><div class="headline">Categories</div><div class="length-num">50</div></a></div><span class="sidebar-menu-item-title">Function</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="Display Mode"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>Display Mode</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://mydocs.guoyaxue.top/" title="旧版博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="旧版博客"/><span class="back-menu-item-text">旧版博客</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="http://pan.xiaou61.top/#/" title="免费网盘"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="免费网盘"/><span class="back-menu-item-text">免费网盘</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="http://cloud.xiaou61.top/" title="云盘(自用)"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="云盘(自用)"/><span class="back-menu-item-text">云盘(自用)</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="http://wpzc.xiaou61.top/" title="云盘转存"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="云盘转存"/><span class="back-menu-item-text">云盘转存</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="http://love.xiaou61.top/#/" title="关于我们(My girlFriend)"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="关于我们(My girlFriend)"/><span class="back-menu-item-text">关于我们(My girlFriend)</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">娱乐项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="http://fxq.xiaou61.top/#/" title="飞行棋"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="飞行棋"/><span class="back-menu-item-text">飞行棋</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://blogutil-1305448902.cos-website.ap-nanjing.myqcloud.com/game/sqnwmai803/" title="谁去拿外卖"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="谁去拿外卖"/><span class="back-menu-item-text">谁去拿外卖</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://blogutil-1305448902.cos-website.ap-nanjing.myqcloud.com/win12kymain/win12-main/desktop.html" title="win12网页版"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://blogutil-1305448902.cos-website.ap-nanjing.myqcloud.com/win12kymain/win12-main/icon/logo.svg" alt="win12网页版"/><span class="back-menu-item-text">win12网页版</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="http://game.xiaou61.top/" title="在线游戏"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="在线游戏"/><span class="back-menu-item-text">在线游戏</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 开往</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" target="_blank" rel="noopener" href="https://www.travellings.cn/go.html"><span> 开往</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Git/" style="font-size: 0.88rem;">Git<sup>3</sup></a><a href="/tags/HTML/" style="font-size: 0.88rem;">HTML<sup>1</sup></a><a href="/tags/JVM/" style="font-size: 0.88rem;">JVM<sup>22</sup></a><a href="/tags/Nginx/" style="font-size: 0.88rem;">Nginx<sup>1</sup></a><a href="/tags/Spring/" style="font-size: 0.88rem;">Spring<sup>1</sup></a><a href="/tags/Ts/" style="font-size: 0.88rem;">Ts<sup>1</sup></a><a href="/tags/TypeScript/" style="font-size: 0.88rem;">TypeScript<sup>1</sup></a><a href="/tags/WebApi/" style="font-size: 0.88rem;">WebApi<sup>1</sup></a><a href="/tags/coder1v5/" style="font-size: 0.88rem;">coder1v5<sup>2</sup></a><a href="/tags/css/" style="font-size: 0.88rem;">css<sup>3</sup></a><a href="/tags/java/" style="font-size: 0.88rem;">java<sup>12</sup></a><a href="/tags/javaSE/" style="font-size: 0.88rem;">javaSE<sup>3</sup></a><a href="/tags/javaWeb/" style="font-size: 0.88rem;">javaWeb<sup>2</sup></a><a href="/tags/js%E9%80%86%E5%90%91/" style="font-size: 0.88rem;">js逆向<sup>1</sup></a><a href="/tags/leetcode/" style="font-size: 0.88rem;">leetcode<sup>3</sup></a><a href="/tags/python/" style="font-size: 0.88rem;">python<sup>8</sup></a><a href="/tags/%E4%B9%A6%E7%B1%8D%E6%8E%A8%E8%8D%90/" style="font-size: 0.88rem;">书籍推荐<sup>2</sup></a><a href="/tags/%E5%85%AC%E4%BC%97%E5%8F%B7%E6%90%AC%E8%BF%90/" style="font-size: 0.88rem;">公众号搬运<sup>35</sup></a><a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 0.88rem;">前端<sup>10</sup></a><a href="/tags/%E5%8A%9E%E5%85%AC/" style="font-size: 0.88rem;">办公<sup>1</sup></a><a href="/tags/%E5%90%8E%E7%AB%AF/" style="font-size: 0.88rem;">后端<sup>8</sup></a><a href="/tags/%E5%A4%A9%E6%B6%AF%E8%AE%BA%E5%9D%9B/" style="font-size: 0.88rem;">天涯论坛<sup>1</sup></a><a href="/tags/%E5%AF%BC%E8%88%AA/" style="font-size: 0.88rem;">导航<sup>1</sup></a><a href="/tags/%E5%B0%B1%E4%B8%9A/" style="font-size: 0.88rem;">就业<sup>16</sup></a><a href="/tags/%E5%BE%AE%E4%BF%A1/" style="font-size: 0.88rem;">微信<sup>1</sup></a><a href="/tags/%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/" style="font-size: 0.88rem;">技术杂谈<sup>51</sup></a><a href="/tags/%E6%8E%98%E9%87%91/" style="font-size: 0.88rem;">掘金<sup>14</sup></a><a href="/tags/%E6%9D%82%E9%A1%B9/" style="font-size: 0.88rem;">杂项<sup>1</sup></a><a href="/tags/%E6%B5%8B%E8%AF%95/" style="font-size: 0.88rem;">测试<sup>1</sup></a><a href="/tags/%E6%B8%A1%E4%B8%80%E5%A4%A7%E5%B8%88%E8%AF%BE/" style="font-size: 0.88rem;">渡一大师课<sup>3</sup></a><a href="/tags/%E7%88%AC%E8%99%AB/" style="font-size: 0.88rem;">爬虫<sup>1</sup></a><a href="/tags/%E7%9B%AE%E5%BD%95/" style="font-size: 0.88rem;">目录<sup>1</sup></a><a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 0.88rem;">算法<sup>4</sup></a><a href="/tags/%E8%99%9A%E6%8B%9F%E6%9C%BA/" style="font-size: 0.88rem;">虚拟机<sup>12</sup></a><a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 0.88rem;">设计模式<sup>6</sup></a><a href="/tags/%E8%B7%AF%E9%A3%9E%E5%AD%A6%E9%99%A2/" style="font-size: 0.88rem;">路飞学院<sup>3</sup></a><a href="/tags/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" style="font-size: 0.88rem;">面向对象<sup>1</sup></a><a href="/tags/%E9%9D%A2%E8%AF%95/" style="font-size: 0.88rem;">面试<sup>51</sup></a><a href="/tags/%E9%A3%9E%E8%A1%8C%E6%A3%8B/" style="font-size: 0.88rem;">飞行棋<sup>1</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="Switch Between Traditional Chinese And Simplified Chinese">繁</button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Setting"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="7409599794" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random"></meting-js></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div id="he-plugin-simple"></div><script>var WIDGET = {
  "CONFIG": {
    "modules": "0124",
    "background": "2",
    "tmpColor": "FFFFFF",
    "tmpSize": "16",
    "cityColor": "FFFFFF",
    "citySize": "16",
    "aqiColor": "E8D87B",
    "aqiSize": "16",
    "weatherIconSize": "24",
    "alertIconSize": "18",
    "padding": "10px 10px 10px 10px",
    "shadow": "0",
    "language": "auto",
    "borderRadius": "20",
    "fixed": "true",
    "vertical": "top",
    "horizontal": "left",
    "left": "20",
    "top": "7.1",
    "key": "df245676fb434a0691ead1c63341cd94"
  }
}
</script><link rel="stylesheet" href="https://widget.qweather.net/simple/static/css/he-simple.css?v=1.4.0"/><script src="https://widget.qweather.net/simple/static/js/he-simple.js?v=1.4.0"></script><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.20/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.4/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script async src="/anzhiyu/random.js"></script><div class="js-pjax"><input type="hidden" name="page-type" id="page-type" value="post"></div><script async data-pjax src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.1/bubble/bubble.js"></script><script>var visitorMail = "visitor@anheyu.com";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><script src="/js/anzhiyu/right_click_menu.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>